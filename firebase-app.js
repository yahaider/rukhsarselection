!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];E.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=_,t.Response=E,t.fetch=function(n,i){return new Promise(function(r,t){var e=new _(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new E(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=v(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=y(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r,i=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t){return t&&t.Math==Math&&t}function y(t){try{return!!t()}catch(t){return!0}}function g(t){return"object"==typeof t?null!==t:"function"==typeof t}function r(t){return l?u.createElement(t):{}}function d(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t}function o(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function b(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function h(e,n){try{w(m,e,n)}catch(t){m[e]=n}return n}function c(t,e){return S.call(t,e)}function a(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++N+C).toString(36)}function i(t){return c(R,t)||(A&&c(O,t)?R[t]=O[t]:R[t]=P("Symbol."+t)),R[t]}var m=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),s=!1,f=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u=m.document,l=g(u)&&g(u.createElement),p=!f&&!y(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),v=Object.defineProperty,_={f:f?v:function(t,e,n){if(d(t),e=o(e,!0),d(n),p)try{return v(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},w=f?function(t,e,n){return _.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},E="__core-js_shared__",T=m[E]||h(E,{}),I=e(function(t){(t.exports=function(t,e){return T[t]||(T[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),S={}.hasOwnProperty,N=0,C=Math.random(),A=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),k=A&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,R=I("wks"),O=m.Symbol,P=k?O:O&&O.withoutSetter||a,D={};D[i("toStringTag")]="z";var x="[object z]"===String(D),L=Function.toString;function M(t){return W[t]||(W[t]=a(t))}"function"!=typeof T.inspectSource&&(T.inspectSource=function(t){return L.call(t)});var F,U,j,V=T.inspectSource,q=m.WeakMap,B="function"==typeof q&&/native code/.test(V(q)),W=I("keys"),K={},H=m.WeakMap;if(B){var G=new H,z=G.get,Q=G.has,Y=G.set;F=function(t,e){return Y.call(G,t,e),e},U=function(t){return z.call(G,t)||{}},j=function(t){return Q.call(G,t)}}else{var X=M("state");K[X]=!0,F=function(t,e){return w(t,X,e),e},U=function(t){return c(t,X)?t[X]:{}},j=function(t){return c(t,X)}}function J(t){return tt.call(t).slice(8,-1)}var $={set:F,get:U,has:j,enforce:function(t){return j(t)?U(t):F(t,{})},getterFor:function(n){return function(t){var e;if(!g(t)||(e=U(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Z=e(function(t){var e=$.get,a=$.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||w(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==m?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:w(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||V(this)})}),tt={}.toString,et=i("toStringTag"),nt="Arguments"==J(function(){return arguments}()),rt=x?J:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),et))?n:nt?J(e):"Object"==(r=J(e))&&"function"==typeof e.callee?"Arguments":r},it=x?{}.toString:function(){return"[object "+rt(this)+"]"};function ot(t){return isNaN(t=+t)?0:(0<t?Et:wt)(t)}function st(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(a){return function(t,e){var n,r,i=String(st(t)),o=ot(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function ut(t){return At(st(t))}function ct(t){return"function"==typeof t?t:void 0}function ht(t,e){return arguments.length<2?ct(Ot[t])||ct(m[t]):Ot[t]&&Ot[t][e]||m[t]&&m[t][e]}function lt(t){return 0<t?Pt(ot(t),9007199254740991):0}function ft(c){return function(t,e,n){var r,i,o,s=ut(t),a=lt(s.length),u=(r=a,(i=ot(n))<0?Dt(i+r,0):xt(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function pt(t,e){var n,r=ut(t),i=0,o=[];for(n in r)!c(K,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~Lt(o,n)||o.push(n));return o}function dt(t,e){for(var n=Vt(e),r=_.f,i=Rt.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function vt(t,e){var n=Wt[Bt(t)];return n==Ht||n!=Kt&&("function"==typeof e?y(e):!!e)}function yt(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?m:c?m[a]||h(a,{}):(m[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=zt(n,r))&&s.value:n[r],!Gt(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;dt(o,i)}(t.sham||i&&i.sham)&&w(o,"sham",!0),Z(n,r,o,t)}}function gt(t){return Object(st(t))}x||Z(Object.prototype,"toString",it,{unsafe:!0});var mt,bt,_t,wt=Math.ceil,Et=Math.floor,Tt={codeAt:at(!1),charAt:at(!0)},It={}.propertyIsEnumerable,St=Object.getOwnPropertyDescriptor,Nt={f:St&&!It.call({1:2},1)?function(t){var e=St(this,t);return!!e&&e.enumerable}:It},Ct="".split,At=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==J(t)?Ct.call(t,""):Object(t)}:Object,kt=Object.getOwnPropertyDescriptor,Rt={f:f?kt:function(t,e){if(t=ut(t),e=o(e,!0),p)try{return kt(t,e)}catch(t){}if(c(t,e))return b(!Nt.f.call(t,e),t[e])}},Ot=m,Pt=Math.min,Dt=Math.max,xt=Math.min,Lt=(ft(!0),ft(!1)),Mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ft=Mt.concat("length","prototype"),Ut={f:Object.getOwnPropertyNames||function(t){return pt(t,Ft)}},jt={f:Object.getOwnPropertySymbols},Vt=ht("Reflect","ownKeys")||function(t){var e=Ut.f(d(t)),n=jt.f;return n?e.concat(n(t)):e},qt=/#|\.prototype\./,Bt=vt.normalize=function(t){return String(t).replace(qt,".").toLowerCase()},Wt=vt.data={},Kt=vt.NATIVE="N",Ht=vt.POLYFILL="P",Gt=vt,zt=Rt.f,Qt=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Yt=M("IE_PROTO"),Xt=Object.prototype,Jt=Qt?Object.getPrototypeOf:function(t){return c(t=gt(t),Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xt:null},$t=i("iterator"),Zt=!1;function te(){}function ee(t){return"<script>"+t+"<\/script>"}[].keys&&("next"in(_t=[].keys())?(bt=Jt(Jt(_t)))!==Object.prototype&&(mt=bt):Zt=!0),null==mt&&(mt={}),c(mt,$t)||w(mt,$t,function(){return this});var ne,re={IteratorPrototype:mt,BUGGY_SAFARI_ITERATORS:Zt},ie=Object.keys||function(t){return pt(t,Mt)},oe=f?Object.defineProperties:function(t,e){d(t);for(var n,r=ie(e),i=r.length,o=0;o<i;)_.f(t,n=r[o++],e[n]);return t},se=ht("document","documentElement"),ae="prototype",ue=M("IE_PROTO"),ce=function(){try{ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ce=ne?function(t){t.write(ee("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ne):((e=r("iframe")).style.display="none",se.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ee("document.F=Object")),t.close(),t.F);for(var n=Mt.length;n--;)delete ce[ae][Mt[n]];return ce()};function he(t,e,n){t&&!c(t=n?t:t.prototype,ye)&&ve(t,ye,{configurable:!0,value:e})}function le(){return this}function fe(){return this}function pe(t,e,n,r,i,o,s){var a,u;function c(t){if(t===i&&g)return g;if(!we&&t in v)return v[t];switch(t){case"keys":case Te:case Ie:return function(){return new n(this,t)}}return function(){return new n(this)}}u=e+" Iterator",(a=n).prototype=de(me,{next:b(1,r)}),he(a,u,!1),ge[u]=le;var h,l,f,p=e+" Iterator",d=!1,v=t.prototype,y=v[Ee]||v["@@iterator"]||i&&v[i],g=!we&&y||c(i),m="Array"==e&&v.entries||y;if(m&&(h=Jt(m.call(new t)),_e!==Object.prototype&&h.next&&(Jt(h)!==_e&&(be?be(h,_e):"function"!=typeof h[Ee]&&w(h,Ee,fe)),he(h,p,!0))),i==Te&&y&&y.name!==Te&&(d=!0,g=function(){return y.call(this)}),v[Ee]!==g&&w(v,Ee,g),ge[e]=g,i)if(l={values:c(Te),keys:o?g:c("keys"),entries:c(Ie)},s)for(f in l)!we&&!d&&f in v||Z(v,f,l[f]);else yt({target:e,proto:!0,forced:we||d},l);return l}K[ue]=!0;var de=Object.create||function(t,e){var n;return null!==t?(te[ae]=d(t),n=new te,te[ae]=null,n[ue]=t):n=ce(),void 0===e?n:oe(n,e)},ve=_.f,ye=i("toStringTag"),ge={},me=re.IteratorPrototype,be=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return d(t),function(){if(!g(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(),r?n.call(t,e):t.__proto__=e,t}}():void 0),_e=re.IteratorPrototype,we=re.BUGGY_SAFARI_ITERATORS,Ee=i("iterator"),Te="values",Ie="entries",Se=Tt.charAt,Ne="String Iterator",Ce=$.set,Ae=$.getterFor(Ne);pe(String,"String",function(t){Ce(this,{type:Ne,string:String(t),index:0})},function(){var t,e=Ae(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Se(n,r),e.index+=t.length,{value:t,done:!1})});var ke={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Re=i("unscopables"),Oe=Array.prototype;function Pe(t){Oe[Re][t]=!0}null==Oe[Re]&&_.f(Oe,Re,{configurable:!0,value:de(null)});var De="Array Iterator",xe=$.set,Le=$.getterFor(De),Me=pe(Array,"Array",function(t,e){xe(this,{type:De,target:ut(t),index:0,kind:e})},function(){var t=Le(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");ge.Arguments=ge.Array,Pe("keys"),Pe("values"),Pe("entries");var Fe=i("iterator"),Ue=i("toStringTag"),je=Me.values;for(var Ve in ke){var qe=m[Ve],Be=qe&&qe.prototype;if(Be){if(Be[Fe]!==je)try{w(Be,Fe,je)}catch(Qa){Be[Fe]=je}if(Be[Ue]||w(Be,Ue,Ve),ke[Ve])for(var We in Me)if(Be[We]!==Me[We])try{w(Be,We,Me[We])}catch(Qa){Be[We]=Me[We]}}}function Ke(t,e,n){for(var r in e)Z(t,r,e[r],n);return t}function He(t){var e=ht(t),n=_.f;f&&e&&!e[Ze]&&n(e,Ze,{configurable:!0,get:function(){return this}})}function Ge(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function ze(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function Qe(t){return void 0!==t&&(ge.Array===t||en[tn]===t)}function Ye(r,i,t){if(Ge(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function Xe(t){if(null!=t)return t[nn]||t["@@iterator"]||ge[rt(t)]}function Je(t,e,n,r){try{return r?e(d(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&d(i.call(t)),e}}var $e=m.Promise,Ze=i("species"),tn=i("iterator"),en=Array.prototype,nn=i("iterator"),rn=e(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=Ye(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=Xe(t)))throw TypeError("Target is not iterable");if(Qe(s)){for(a=0,u=lt(t.length);a<u;a++)if((c=r?f(d(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=Je(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),on=i("iterator"),sn=!1;try{var an=0,un={next:function(){return{done:!!an++}},return:function(){sn=!0}};un[on]=function(){return this},Array.from(un,function(){throw 2})}catch(Qa){}function cn(t,e){if(!e&&!sn)return!1;var n=!1;try{var r={};r[on]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function hn(t,e){var n,r=d(t).constructor;return void 0===r||null==(n=d(r)[mn])?e:Ge(n)}function ln(t){if(An.hasOwnProperty(t)){var e=An[t];delete An[t],e()}}function fn(t){return function(){ln(t)}}function pn(t){ln(t.data)}function dn(t){m.postMessage(t+"",wn.protocol+"//"+wn.host)}var vn,yn,gn,mn=i("species"),bn=ht("navigator","userAgent")||"",_n=/(iphone|ipod|ipad).*applewebkit/i.test(bn),wn=m.location,En=m.setImmediate,Tn=m.clearImmediate,In=m.process,Sn=m.MessageChannel,Nn=m.Dispatch,Cn=0,An={},kn="onreadystatechange";En&&Tn||(En=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return An[++Cn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},vn(Cn),Cn},Tn=function(t){delete An[t]},"process"==J(In)?vn=function(t){In.nextTick(fn(t))}:Nn&&Nn.now?vn=function(t){Nn.now(fn(t))}:Sn&&!_n?(gn=(yn=new Sn).port2,yn.port1.onmessage=pn,vn=Ye(gn.postMessage,gn,1)):!m.addEventListener||"function"!=typeof postMessage||m.importScripts||y(dn)||"file:"===wn.protocol?vn=kn in r("script")?function(t){se.appendChild(r("script"))[kn]=function(){se.removeChild(this),ln(t)}}:function(t){setTimeout(fn(t),0)}:(vn=dn,m.addEventListener("message",pn,!1)));var Rn,On,Pn,Dn,xn,Ln,Mn,Fn,Un={set:En,clear:Tn},jn=Rt.f,Vn=Un.set,qn=m.MutationObserver||m.WebKitMutationObserver,Bn=m.process,Wn=m.Promise,Kn="process"==J(Bn),Hn=jn(m,"queueMicrotask"),Gn=Hn&&Hn.value;function zn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ge(n),this.reject=Ge(r)}function Qn(t,e){if(d(t),g(e)&&e.constructor===t)return e;var n=Zn.f(t);return(0,n.resolve)(e),n.promise}function Yn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}Gn||(Rn=function(){var t,e;for(Kn&&(t=Bn.domain)&&t.exit();On;){e=On.fn,On=On.next;try{e()}catch(t){throw On?Dn():Pn=void 0,t}}Pn=void 0,t&&t.enter()},Dn=Kn?function(){Bn.nextTick(Rn)}:qn&&!_n?(xn=!0,Ln=document.createTextNode(""),new qn(Rn).observe(Ln,{characterData:!0}),function(){Ln.data=xn=!xn}):Wn&&Wn.resolve?(Mn=Wn.resolve(void 0),Fn=Mn.then,function(){Fn.call(Mn,Rn)}):function(){Vn.call(m,Rn)});var Xn,Jn,$n=Gn||function(t){var e={fn:t,next:void 0};Pn&&(Pn.next=e),On||(On=e,Dn()),Pn=e},Zn={f:function(t){return new zn(t)}},tr=m.process,er=tr&&tr.versions,nr=er&&er.v8;function rr(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function ir(l,f,p){if(!f.notified){f.notified=!0;var d=f.reactions;$n(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&Dr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(_r("Promise-chain cycle")):(i=rr(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&Or(l,f)})}}function or(t,e,n){var r,i;Cr?((r=wr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:n},(i=m["on"+t])?i(r):t===Ar&&function(t,e){var n=m.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function sr(e,n,r,i){return function(t){e(n,r,t,i)}}function ar(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,ir(t,e,!0))}nr?Jn=(Xn=nr.split("."))[0]+Xn[1]:bn&&(!(Xn=bn.match(/Edge\/(\d+)/))||74<=Xn[1])&&(Xn=bn.match(/Chrome\/(\d+)/))&&(Jn=Xn[1]);var ur,cr,hr,lr,fr=Jn&&+Jn,pr=Un.set,dr=i("species"),vr="Promise",yr=$.get,gr=$.set,mr=$.getterFor(vr),br=$e,_r=m.TypeError,wr=m.document,Er=m.process,Tr=ht("fetch"),Ir=Zn.f,Sr=Ir,Nr="process"==J(Er),Cr=!!(wr&&wr.createEvent&&m.dispatchEvent),Ar="unhandledrejection",kr=Gt(vr,function(){if(V(br)===String(br)){if(66===fr)return!0;if(!Nr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=fr&&/native code/.test(br))return!1;function t(t){t(function(){},function(){})}var e=br.resolve(1);return(e.constructor={})[dr]=t,!(e.then(function(){})instanceof t)}),Rr=kr||!cn(function(t){br.all(t).catch(function(){})}),Or=function(n,r){pr.call(m,function(){var t,e=r.value;if(Pr(r)&&(t=Yn(function(){Nr?Er.emit("unhandledRejection",e,n):or(Ar,n,e)}),r.rejection=Nr||Pr(r)?2:1,t.error))throw t.value})},Pr=function(t){return 1!==t.rejection&&!t.parent},Dr=function(t,e){pr.call(m,function(){Nr?Er.emit("rejectionHandled",t):or("rejectionhandled",t,e.value)})},xr=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw _r("Promise can't be resolved itself");var i=rr(t);i?$n(function(){var e={done:!1};try{i.call(t,sr(xr,n,e,r),sr(ar,n,e,r))}catch(t){ar(n,e,t,r)}}):(r.value=t,r.state=1,ir(n,r,!1))}catch(t){ar(n,{done:!1},t,r)}}};kr&&(br=function(t){ze(this,br,vr),Ge(t),ur.call(this);var e=yr(this);try{t(sr(xr,this,e),sr(ar,this,e))}catch(t){ar(this,e,t)}},(ur=function(){gr(this,{type:vr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ke(br.prototype,{then:function(t,e){var n=mr(this),r=Ir(hn(this,br));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Nr?Er.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&ir(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),cr=function(){var t=new ur,e=yr(t);this.promise=t,this.resolve=sr(xr,t,e),this.reject=sr(ar,t,e)},Zn.f=Ir=function(t){return t===br||t===hr?new cr:Sr(t)},"function"==typeof $e&&(lr=$e.prototype.then,Z($e.prototype,"then",function(t,e){var n=this;return new br(function(t,e){lr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Tr&&yt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Qn(br,Tr.apply(m,arguments))}}))),yt({global:!0,wrap:!0,forced:kr},{Promise:br}),he(br,vr,!1),He(vr),hr=ht(vr),yt({target:vr,stat:!0,forced:kr},{reject:function(t){var e=Ir(this);return e.reject.call(void 0,t),e.promise}}),yt({target:vr,stat:!0,forced:kr},{resolve:function(t){return Qn(this,t)}}),yt({target:vr,stat:!0,forced:Rr},{all:function(t){var a=this,e=Ir(a),u=e.resolve,c=e.reject,n=Yn(function(){var r=Ge(a.resolve),i=[],o=0,s=1;rn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Ir(n),i=r.reject,e=Yn(function(){var e=Ge(n.resolve);rn(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),yt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Zn.f(a),u=e.resolve,n=e.reject,r=Yn(function(){var r=Ge(a.resolve),i=[],o=0,s=1;rn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}}),yt({target:"Promise",proto:!0,real:!0,forced:!!$e&&y(function(){$e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=hn(this,ht("Promise")),t="function"==typeof e;return this.then(t?function(t){return Qn(n,e()).then(function(){return t})}:e,t?function(t){return Qn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof $e||$e.prototype.finally||Z($e.prototype,"finally",ht("Promise").prototype.finally),Ot.Promise;var Lr=$.set,Mr=$.getterFor("AggregateError"),Fr=function(t,e){var n=this;if(!(n instanceof Fr))return new Fr(t,e);be&&(n=be(new Error(e),Jt(n)));var r=[];return rn(t,r.push,r),f?Lr(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&w(n,"message",String(e)),n};Fr.prototype=de(Error.prototype,{constructor:b(5,Fr),message:b(5,""),name:b(5,"AggregateError")}),f&&_.f(Fr.prototype,"errors",{get:function(){return Mr(this).errors},configurable:!0}),yt({global:!0},{AggregateError:Fr}),yt({target:"Promise",stat:!0},{try:function(t){var e=Zn.f(this),n=Yn(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var Ur="No one promise resolved";function jr(t,e){var n;return Wr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Wr(n.prototype))||g(n)&&null===(n=n[Kr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Vr(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=gt(t),a=At(s),u=Ye(e,n,3),c=lt(a.length),h=0,l=r||jr,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:Hr.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function qr(t){throw t}function Br(t,e){if(c(Qr,t))return Qr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:qr,o=c(e,1)?e[1]:void 0;return Qr[t]=!!n&&!y(function(){if(r&&!f)return 1;var t={length:-1};r?zr(t,1,{enumerable:!0,get:qr}):t[1]=1,n.call(t,i,o)})}yt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Zn.f(u),c=e.resolve,h=e.reject,n=Yn(function(){var r=Ge(u.resolve),i=[],o=0,s=1,a=!1;rn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(ht("AggregateError"))(i,Ur)))})}),--s||h(new(ht("AggregateError"))(i,Ur))});return n.error&&h(n.value),e.promise}});var Wr=Array.isArray||function(t){return"Array"==J(t)},Kr=i("species"),Hr=[].push,Gr={forEach:Vr(0),map:Vr(1),filter:Vr(2),some:Vr(3),every:Vr(4),find:Vr(5),findIndex:Vr(6)},zr=Object.defineProperty,Qr={},Yr=Gr.find,Xr="find",Jr=!0,$r=Br(Xr);function Zr(t,e,n){return Ye(ti,m[t].prototype[e],n)}Xr in[]&&Array(1)[Xr](function(){Jr=!1}),yt({target:"Array",proto:!0,forced:Jr||!$r},{find:function(t,e){return Yr(this,t,1<arguments.length?e:void 0)}}),Pe(Xr);var ti=Function.call,ei=(Zr("Array","find"),Gr.findIndex),ni="findIndex",ri=!0,ii=Br(ni);function oi(t,e,n){var r=o(e);r in t?_.f(t,r,b(0,n)):t[r]=n}ni in[]&&Array(1)[ni](function(){ri=!1}),yt({target:"Array",proto:!0,forced:ri||!ii},{findIndex:function(t,e){return ei(this,t,1<arguments.length?e:void 0)}}),Pe(ni),Zr("Array","findIndex"),yt({target:"Array",stat:!0,forced:!cn(function(t){Array.from(t)})},{from:function(t,e,n){var r,i,o,s,a,u=gt(t),c="function"==typeof this?this:Array,h=arguments.length,l=1<h?e:void 0,f=void 0!==l,p=Xe(u),d=0;if(f&&(l=Ye(l,2<h?n:void 0,2)),null==p||c==Array&&Qe(p))for(i=new c(r=lt(u.length));d<r;d++)oi(i,d,f?l(u[d],d):u[d]);else for(a=(s=p.call(u)).next,i=new c;!(o=a.call(s)).done;d++)oi(i,d,f?Je(s,l,[o.value,d],!0):o.value);return i.length=d,i}}),Ot.Array.from;var si,ai=Gr.some,ui=!!(si=[].some)&&y(function(){si.call(null,function(){throw 1},1)}),ci=Br("some");yt({target:"Array",proto:!0,forced:!ui||!ci},{some:function(t,e){return ai(this,t,1<arguments.length?e:void 0)}}),Zr("Array","some");var hi,li="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,fi=_.f,pi=m.Int8Array,di=pi&&pi.prototype,vi=m.Uint8ClampedArray,yi=vi&&vi.prototype,gi=pi&&Jt(pi),mi=di&&Jt(di),bi=Object.prototype,_i=(bi.isPrototypeOf,i("toStringTag")),wi=a("TYPED_ARRAY_TAG"),Ei=li&&!!be&&"Opera"!==rt(m.opera),Ti={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(hi in Ti)m[hi]||(Ei=!1);if((!Ei||"function"!=typeof gi||gi===Function.prototype)&&(gi=function(){throw TypeError("Incorrect invocation")},Ei))for(hi in Ti)m[hi]&&be(m[hi],gi);if((!Ei||!mi||mi===bi)&&(mi=gi.prototype,Ei))for(hi in Ti)m[hi]&&be(m[hi].prototype,mi);if(Ei&&Jt(yi)!==mi&&be(yi,mi),f&&!c(mi,_i))for(hi in fi(mi,_i,{get:function(){return g(this)?this[wi]:void 0}}),Ti)m[hi]&&w(m[hi],wi,hi);function Ii(){return Ci.call(Ri(this))}var Si=i("iterator"),Ni=m.Uint8Array,Ci=Me.values,Ai=Me.keys,ki=Me.entries,Ri=function(t){if(g(e=t)&&c(Ti,rt(e)))return t;var e;throw TypeError("Target is not a typed array")},Oi=function(t,e,n){if(f){if(n)for(var r in Ti){var i=m[r];i&&c(i.prototype,t)&&delete i.prototype[t]}mi[t]&&!n||Z(mi,t,!n&&Ei&&di[t]||e)}},Pi=Ni&&Ni.prototype[Si],Di=!!Pi&&("values"==Pi.name||null==Pi.name);Oi("entries",function(){return ki.call(Ri(this))}),Oi("keys",function(){return Ai.call(Ri(this))}),Oi("values",Ii,!Di),Oi(Si,Ii,!Di);var xi=Object.assign,Li=Object.defineProperty,Mi=!xi||y(function(){if(f&&1!==xi({b:1},xi(Li({},"a",{enumerable:!0,get:function(){Li(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=xi({},t)[n]||ie(xi({},e)).join("")!=r})?function(t,e){for(var n=gt(t),r=arguments.length,i=1,o=jt.f,s=Nt.f;i<r;)for(var a,u=At(arguments[i++]),c=o?ie(u).concat(o(u)):ie(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:xi;function Fi(a){return function(t){for(var e,n=ut(t),r=ie(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Ui.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}yt({target:"Object",stat:!0,forced:Object.assign!==Mi},{assign:Mi}),Ot.Object.assign;var Ui=Nt.f,ji={entries:Fi(!0),values:Fi(!1)},Vi=ji.entries;yt({target:"Object",stat:!0},{entries:function(t){return Vi(t)}}),Ot.Object.entries;var qi=ji.values;function Bi(t){if(g(e=t)&&(void 0!==(n=e[Ki])?n:"RegExp"==J(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function Wi(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Hi]=!1,"/./"[e](n)}catch(t){}}return!1}yt({target:"Object",stat:!0},{values:function(t){return qi(t)}}),Ot.Object.values;var Ki=i("match"),Hi=i("match");yt({target:"String",proto:!0,forced:!Wi("includes")},{includes:function(t,e){return!!~String(st(this)).indexOf(Bi(t),1<arguments.length?e:void 0)}}),Zr("String","includes");var Gi,zi=Rt.f,Qi="".startsWith,Yi=Math.min,Xi=Wi("startsWith");function Ji(t){if(g(t)){var e=t[Zi];return void 0!==e?e:Wr(t)}}yt({target:"String",proto:!0,forced:!!(Xi||!(Gi=zi(String.prototype,"startsWith"))||Gi.writable)&&!Xi},{startsWith:function(t,e){var n=String(st(this));Bi(t);var r=lt(Yi(1<arguments.length?e:void 0,n.length)),i=String(t);return Qi?Qi.call(n,i,r):n.slice(r,r+i.length)===i}}),Zr("String","startsWith"),yt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(st(this)),n="",r=ot(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),Zr("String","repeat");var $i=i("species"),Zi=i("isConcatSpreadable"),to=9007199254740991,eo="Maximum allowed index exceeded",no=51<=fr||!y(function(){var t=[];return t[Zi]=!1,t.concat()[0]!==t}),ro=51<=fr||!y(function(){var t=[];return(t.constructor={})[$i]=function(){return{foo:1}},1!==t.concat(Boolean).foo});function io(t){var e=Ot.Symbol||(Ot.Symbol={});c(e,t)||go(e,t,{value:yo.f(t)})}function oo(t,e){var n=Po[t]=de(No[wo]);return To(n,{type:_o,tag:t,description:e}),f||(n.description=e),n}function so(e,t){d(e);var n=ut(t),r=ie(n).concat(ho(n));return mo(r,function(t){f&&!co.call(n,t)||qo(e,t,n[t])}),e}function ao(t,e){var n=ut(t),r=o(e,!0);if(n!==So||!c(Po,r)||c(Do,r)){var i=Ao(n,r);return!i||!c(Po,r)||c(n,bo)&&n[bo][r]||(i.enumerable=!0),i}}function uo(t){var e=Ro(ut(t)),n=[];return mo(e,function(t){c(Po,t)||c(K,t)||n.push(t)}),n}yt({target:"Array",proto:!0,forced:!no||!ro},{concat:function(t){var e,n,r,i,o,s=gt(this),a=jr(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(Ji(o=-1===e?s:arguments[e])){if(i=lt(o.length),to<u+i)throw TypeError(eo);for(n=0;n<i;n++,u++)n in o&&oi(a,u,o[n])}else{if(to<=u)throw TypeError(eo);oi(a,u++,o)}return a.length=u,a}});function co(t){var e=o(t,!0),n=Oo.call(this,e);return!(this===So&&c(Po,e)&&!c(Do,e))&&(!(n||!c(this,e)||!c(Po,e)||c(this,bo)&&this[bo][e])||n)}function ho(t){var e=t===So,n=Ro(e?Do:ut(t)),r=[];return mo(n,function(t){!c(Po,t)||e&&!c(So,t)||r.push(Po[t])}),r}var lo=Ut.f,fo={}.toString,po="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],vo={f:function(t){return po&&"[object Window]"==fo.call(t)?function(t){try{return lo(t)}catch(t){return po.slice()}}(t):lo(ut(t))}},yo={f:i},go=_.f,mo=Gr.forEach,bo=M("hidden"),_o="Symbol",wo="prototype",Eo=i("toPrimitive"),To=$.set,Io=$.getterFor(_o),So=Object[wo],No=m.Symbol,Co=ht("JSON","stringify"),Ao=Rt.f,ko=_.f,Ro=vo.f,Oo=Nt.f,Po=I("symbols"),Do=I("op-symbols"),xo=I("string-to-symbol-registry"),Lo=I("symbol-to-string-registry"),Mo=I("wks"),Fo=m.QObject,Uo=!Fo||!Fo[wo]||!Fo[wo].findChild,jo=f&&y(function(){return 7!=de(ko({},"a",{get:function(){return ko(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Ao(So,e);r&&delete So[e],ko(t,e,n),r&&t!==So&&ko(So,e,r)}:ko,Vo=k?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof No},qo=function(t,e,n){t===So&&qo(Do,e,n),d(t);var r=o(e,!0);return d(n),c(Po,r)?(n.enumerable?(c(t,bo)&&t[bo][r]&&(t[bo][r]=!1),n=de(n,{enumerable:b(0,!1)})):(c(t,bo)||ko(t,bo,b(1,{})),t[bo][r]=!0),jo(t,r,n)):ko(t,r,n)};A||(Z((No=function(t){if(this instanceof No)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=a(e),r=function(t){this===So&&r.call(Do,t),c(this,bo)&&c(this[bo],n)&&(this[bo][n]=!1),jo(this,n,b(1,t))};return f&&Uo&&jo(So,n,{configurable:!0,set:r}),oo(n,e)})[wo],"toString",function(){return Io(this).tag}),Z(No,"withoutSetter",function(t){return oo(a(t),t)}),Nt.f=co,_.f=qo,Rt.f=ao,Ut.f=vo.f=uo,jt.f=ho,yo.f=function(t){return oo(i(t),t)},f&&(ko(No[wo],"description",{configurable:!0,get:function(){return Io(this).description}}),Z(So,"propertyIsEnumerable",co,{unsafe:!0}))),yt({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:No}),mo(ie(Mo),function(t){io(t)}),yt({target:_o,stat:!0,forced:!A},{for:function(t){var e=String(t);if(c(xo,e))return xo[e];var n=No(e);return xo[e]=n,Lo[n]=e,n},keyFor:function(t){if(!Vo(t))throw TypeError(t+" is not a symbol");if(c(Lo,t))return Lo[t]},useSetter:function(){Uo=!0},useSimple:function(){Uo=!1}}),yt({target:"Object",stat:!0,forced:!A,sham:!f},{create:function(t,e){return void 0===e?de(t):so(de(t),e)},defineProperty:qo,defineProperties:so,getOwnPropertyDescriptor:ao}),yt({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:uo,getOwnPropertySymbols:ho}),yt({target:"Object",stat:!0,forced:y(function(){jt.f(1)})},{getOwnPropertySymbols:function(t){return jt.f(gt(t))}}),Co&&yt({target:"JSON",stat:!0,forced:!A||y(function(){var t=No();return"[null]"!=Co([t])||"{}"!=Co({a:t})||"{}"!=Co(Object(t))})},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((g(r=e)||void 0!==t)&&!Vo(t))return Wr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Vo(e))return e}),i[1]=e,Co.apply(null,i)}});No[wo][Eo]||w(No[wo],Eo,No[wo].valueOf),he(No,_o),K[bo]=!0,io("asyncIterator");var Bo=_.f,Wo=m.Symbol;if(f&&"function"==typeof Wo&&!("description"in Wo.prototype&&void 0===Wo().description)){var Ko={},Ho=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof Ho?new Wo(e):void 0===e?Wo():Wo(e);return""===e&&(Ko[n]=!0),n};dt(Ho,Wo);var Go=Ho.prototype=Wo.prototype;Go.constructor=Ho;var zo=Go.toString,Qo="Symbol(test)"==String(Wo("test")),Yo=/^Symbol\((.*)\)[^)]+$/;Bo(Go,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=zo.call(t);if(c(Ko,t))return"";var n=Qo?e.slice(7,-1):e.replace(Yo,"$1");return""===n?void 0:n}}),yt({global:!0,forced:!0},{Symbol:Ho})}function Xo(s,t,e){function n(t){var n=i[t];Z(i,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!g(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!g(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!g(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var a=-1!==s.indexOf("Map"),r=-1!==s.indexOf("Weak"),u=a?"set":"add",c=m[s],i=c&&c.prototype,h=c,o={};if(Gt(s,"function"!=typeof c||!(r||i.forEach&&!y(function(){(new c).entries().next()}))))h=e.getConstructor(t,s,a,u),Zo.REQUIRED=!0;else if(Gt(s,!0)){var l=new h,f=l[u](r?{}:-0,1)!=l,p=y(function(){l.has(1)}),d=cn(function(t){new c(t)}),v=!r&&y(function(){for(var t=new c,e=5;e--;)t[u](e,e);return!t.has(-0)});d||(((h=t(function(t,e){ze(t,h,s);var n,r,i,o=(n=new c,be&&"function"==typeof(r=t.constructor)&&r!==h&&g(i=r.prototype)&&i!==h.prototype&&be(n,i),n);return null!=e&&rn(e,o[u],o,a),o})).prototype=i).constructor=h),(p||v)&&(n("delete"),n("has"),a&&n("get")),(v||f)&&n(u),r&&i.clear&&delete i.clear}return yt({global:!0,forced:(o[s]=h)!=c},o),he(h,s),r||e.setStrong(h,s,a),h}function Jo(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return Ge(this),(r=void 0!==u)&&Ge(u),null==t?new this:(i=[],r?(o=0,s=Ye(u,2<a?n:void 0,2),rn(t,function(t){i.push(s(t,o++))})):rn(t,i.push,i),new this(i))}io("hasInstance"),io("isConcatSpreadable"),io("iterator"),io("match"),io("matchAll"),io("replace"),io("search"),io("species"),io("split"),io("toPrimitive"),io("toStringTag"),io("unscopables"),he(Math,"Math",!0),he(m.JSON,"JSON",!0),Ot.Symbol,io("asyncDispose"),io("dispose"),io("observable"),io("patternMatch"),io("replaceAll"),yo.f("iterator");var $o=!y(function(){return Object.isExtensible(Object.preventExtensions({}))}),Zo=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=_.f,r=a("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return $o&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};K[r]=!0}),ts=(Zo.REQUIRED,Zo.fastKey,Zo.getWeakData,Zo.onFreeze,_.f),es=Zo.fastKey,ns=$.set,rs=$.getterFor,is={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=u(t),s=a(t,e);return s?s.value=n:(o.last=s={index:i=es(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),f?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}function a(t,e){var n,r=u(t),i=es(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n}var s=t(function(t,e){ze(t,s,n),ns(t,{type:n,index:de(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&rn(e,t[i],t,r)}),u=rs(n);return Ke(s.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=u(this),n=a(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),f?e.size--:this.size--}return!!n},forEach:function(t,e){for(var n,r=u(this),i=Ye(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!a(this,t)}}),Ke(s.prototype,r?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&ts(s.prototype,"size",{get:function(){return u(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=rs(e),o=rs(r);pe(t,e,function(t,e){ns(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),He(e)}};function os(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}function ss(){for(var t,e=d(this),n=Ge(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function as(t){return Map.prototype.entries.call(t)}function us(t,e,n){var r,i=d(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}function cs(t){return Set.prototype.values.call(t)}Xo("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},is),Ot.Map,yt({target:"Map",stat:!0},{from:Jo}),yt({target:"Map",stat:!0},{of:os}),yt({target:"Map",proto:!0,real:!0,forced:s},{deleteAll:function(){return ss.apply(this,arguments)}}),yt({target:"Map",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3);return!rn(r,function(t,e){if(!i(e,t,n))return rn.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3),o=new(hn(n,ht("Map"))),s=Ge(o.set);return rn(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3);return rn(r,function(t,e){if(i(e,t,n))return rn.stop(e)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{findKey:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3);return rn(r,function(t,e){if(i(e,t,n))return rn.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ge(n);var i=Ge(r.has),o=Ge(r.get),s=Ge(r.set);return rn(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}}),yt({target:"Map",proto:!0,real:!0,forced:s},{includes:function(n){return rn(as(d(this)),function(t,e){if(e===n||e!=e&&n!=n)return rn.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ge(e);var r=Ge(n.set);return rn(t,function(t){r.call(n,e(t),t)}),n}}),yt({target:"Map",proto:!0,real:!0,forced:s},{keyOf:function(n){return rn(as(d(this)),function(t,e){if(e===n)return rn.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapKeys:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3),o=new(hn(n,ht("Map"))),s=Ge(o.set);return rn(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapValues:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3),o=new(hn(n,ht("Map"))),s=Ge(o.set);return rn(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{merge:function(t){for(var e=d(this),n=Ge(e.set),r=0;r<arguments.length;)rn(arguments[r++],n,e,!0);return e}}),yt({target:"Map",proto:!0,real:!0,forced:s},{reduce:function(n,t){var r=d(this),e=as(r),i=arguments.length<2,o=i?void 0:t;if(Ge(n),rn(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=as(n),i=Ye(t,1<arguments.length?e:void 0,3);return rn(r,function(t,e){if(i(e,t,n))return rn.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{update:function(t,e,n){var r=d(this),i=arguments.length;Ge(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):Ge(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}}),yt({target:"Map",proto:!0,real:!0,forced:s},{upsert:us}),yt({target:"Map",proto:!0,real:!0,forced:s},{updateOrInsert:us}),Xo("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},is),Ot.Set,yt({target:"Set",stat:!0},{from:Jo}),yt({target:"Set",stat:!0},{of:os}),yt({target:"Set",proto:!0,real:!0,forced:s},{addAll:function(){return function(){for(var t=d(this),e=Ge(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{deleteAll:function(){return ss.apply(this,arguments)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=cs(n),i=Ye(t,1<arguments.length?e:void 0,3);return!rn(r,function(t){if(!i(t,t,n))return rn.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{difference:function(t){var e=d(this),n=new(hn(e,ht("Set")))(e),r=Ge(n.delete);return rn(t,function(t){r.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=cs(n),i=Ye(t,1<arguments.length?e:void 0,3),o=new(hn(n,ht("Set"))),s=Ge(o.add);return rn(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=cs(n),i=Ye(t,1<arguments.length?e:void 0,3);return rn(r,function(t){if(i(t,t,n))return rn.stop(t)},void 0,!1,!0).result}}),yt({target:"Set",proto:!0,real:!0,forced:s},{intersection:function(t){var e=d(this),n=new(hn(e,ht("Set"))),r=Ge(e.has),i=Ge(n.add);return rn(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:function(t){var e=d(this),n=Ge(e.has);return!rn(t,function(t){if(!0===n.call(e,t))return rn.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:function(t){var e=function(t){var e=Xe(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return d(e.call(t))}(this),n=d(t),r=n.has;return"function"!=typeof r&&(n=new(ht("Set"))(t),r=Ge(n.has)),!rn(e,function(t){if(!1===r.call(n,t))return rn.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:function(t){var e=d(this),n=Ge(e.has);return!rn(t,function(t){if(!1===n.call(e,t))return rn.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{join:function(t){var e=cs(d(this)),n=void 0===t?",":String(t),r=[];return rn(e,r.push,r,!1,!0),r.join(n)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{map:function(t,e){var n=d(this),r=cs(n),i=Ye(t,1<arguments.length?e:void 0,3),o=new(hn(n,ht("Set"))),s=Ge(o.add);return rn(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{reduce:function(e,t){var n=d(this),r=cs(n),i=arguments.length<2,o=i?void 0:t;if(Ge(e),rn(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=cs(n),i=Ye(t,1<arguments.length?e:void 0,3);return rn(r,function(t){if(i(t,t,n))return rn.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:function(t){var e=d(this),n=new(hn(e,ht("Set")))(e),r=Ge(n.delete),i=Ge(n.add);return rn(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{union:function(t){var e=d(this),n=new(hn(e,ht("Set")))(e);return rn(t,Ge(n.add),n),n}});var hs=Math.floor;yt({target:"Number",stat:!0},{isInteger:function(t){return!g(t)&&isFinite(t)&&hs(t)===t}}),Ot.Number.isInteger;var ls=function(t,e){return(ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function fs(t,e){function n(){this.constructor=t}ls(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ps=function(){return(ps=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ds(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function vs(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function ys(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gs(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ms(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gs(arguments[e]));return t}function bs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function _s(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function ws(t){try{return Ss.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Es={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ts=function(t,e){if(!t)throw Is(e)},Is=function(t){return new Error("Firebase Database ("+Es.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Ss={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ns(t){return Cs(void 0,t)}function Cs(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Cs(t[n],e[n]));return t}var As=(ks.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},ks);function ks(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Rs(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Os(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rs())}function Ps(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ds(){return!0===Es.NODE_ADMIN}var xs,Ls=(fs(Ms,xs=Error),Ms);function Ms(t,e){var n=xs.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,Fs.prototype.create),n}var Fs=(Us.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(js,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new Ls(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},Us);function Us(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var js=/\{\$([^}]+)}/g;function Vs(t){return JSON.parse(t)}function qs(t){return JSON.stringify(t)}function Bs(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Vs(ws(o[0])||""),n=Vs(ws(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Ws(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ks(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Hs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gs(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var zs=(Qs.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Qs.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Qs.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Qs.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Qs);function Qs(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Ys(t,e){var n=new Xs(t,e);return n.subscribe.bind(n)}var Xs=(Js.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Js.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Js.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Js.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t){if("object"==typeof t&&null!==t)for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=$s),void 0===r.error&&(r.error=$s),void 0===r.complete&&(r.complete=$s);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},Js.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Js.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Js.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Js.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Js);function Js(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function $s(){}function Zs(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function ta(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function ea(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ta(t,e,r)+"must be a valid function.")}function na(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ta(t,e,r)+"must be a valid context object.")}function ra(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ia=(oa.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},oa.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},oa.prototype.setServiceProps=function(t){return this.serviceProps=t,this},oa);function oa(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var sa="[DEFAULT]",aa=(ua.prototype.get=function(t){void 0===t&&(t=sa);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new As;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},ua.prototype.getImmediate=function(t){var e=ps({identifier:sa,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},ua.prototype.getComponent=function(){return this.component},ua.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(sa)}catch(t){}try{for(var r=ys(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=gs(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},ua.prototype.clearInstance=function(t){void 0===t&&(t=sa),this.instancesDeferred.delete(t),this.instances.delete(t)},ua.prototype.delete=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},ua.prototype.isComponentSet=function(){return null!=this.component},ua.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,t===sa?void 0:t),this.instances.set(t,e)),e||null},ua.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:sa},ua);function ua(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var ca,ha=(la.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},la.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},la.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new aa(t,this);return this.providers.set(t,e),e},la.prototype.getProviders=function(){return Array.from(this.providers.values())},la);function la(t){this.name=t,this.providers=new Map}function fa(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var pa,da,va=[];function ya(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=_a[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,fa(["["+i+"]  "+t.name+":"],n))}}(da=pa=pa||{})[da.DEBUG=0]="DEBUG",da[da.VERBOSE=1]="VERBOSE",da[da.INFO=2]="INFO",da[da.WARN=3]="WARN",da[da.ERROR=4]="ERROR",da[da.SILENT=5]="SILENT";var ga,ma={debug:pa.DEBUG,verbose:pa.VERBOSE,info:pa.INFO,warn:pa.WARN,error:pa.ERROR,silent:pa.SILENT},ba=pa.INFO,_a=((ca={})[pa.DEBUG]="log",ca[pa.VERBOSE]="log",ca[pa.INFO]="info",ca[pa.WARN]="warn",ca[pa.ERROR]="error",ca),wa=(Object.defineProperty(Ea.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in pa))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ea.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ea.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),Ea.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fa([this,pa.DEBUG],t)),this._logHandler.apply(this,fa([this,pa.DEBUG],t))},Ea.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fa([this,pa.VERBOSE],t)),this._logHandler.apply(this,fa([this,pa.VERBOSE],t))},Ea.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fa([this,pa.INFO],t)),this._logHandler.apply(this,fa([this,pa.INFO],t))},Ea.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fa([this,pa.WARN],t)),this._logHandler.apply(this,fa([this,pa.WARN],t))},Ea.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fa([this,pa.ERROR],t)),this._logHandler.apply(this,fa([this,pa.ERROR],t))},Ea);function Ea(t){this.name=t,this._logLevel=ba,this._logHandler=ya,this._userLogHandler=null,va.push(this)}function Ta(t){var e="string"==typeof t?ma[t]:t;va.forEach(function(t){t.logLevel=e})}var Ia,Sa=((ga={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ga["bad-app-name"]="Illegal App name: '{$appName}",ga["duplicate-app"]="Firebase App named '{$appName}' already exists",ga["app-deleted"]="Firebase App named '{$appName}' already deleted",ga["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ga["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ga),Na=new Fs("app","Firebase",Sa),Ca="@firebase/app",Aa="[DEFAULT]",ka=((Ia={})[Ca]="fire-core",Ia["@firebase/analytics"]="fire-analytics",Ia["@firebase/auth"]="fire-auth",Ia["@firebase/database"]="fire-rtdb",Ia["@firebase/functions"]="fire-fn",Ia["@firebase/installations"]="fire-iid",Ia["@firebase/messaging"]="fire-fcm",Ia["@firebase/performance"]="fire-perf",Ia["@firebase/remote-config"]="fire-rc",Ia["@firebase/storage"]="fire-gcs",Ia["@firebase/firestore"]="fire-fst",Ia["fire-js"]="fire-js",Ia["firebase-wrapper"]="fire-js-all",Ia),Ra=new wa("@firebase/app"),Oa=(Object.defineProperty(Pa.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(Pa.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Pa.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Pa.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Pa.prototype._getService=function(t,e){return void 0===e&&(e=Aa),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Pa.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Aa),this.container.getProvider(t).clearInstance(e)},Pa.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Ra.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Pa.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Pa.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Na.create("app-deleted",{appName:this.name_})},Pa);function Pa(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ns(t),this.container=new ha(e.name),this._addComponent(new ia("app",function(){return o},"PUBLIC"));try{for(var s=ys(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Oa.prototype.name&&Oa.prototype.options||Oa.prototype.delete||console.log("dc");var Da=function t(){var u,c,h,l,e=(u=Oa,c={},h=new Map,(l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={}),"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=Aa);var r=n.name;if("string"!=typeof r||!r)throw Na.create("bad-app-name",{appName:String(r)});if(Ws(c,r))throw Na.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=ka[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ra.warn(a.join(" "))}p(new ia(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:Ta,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Na.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=function(t){var o=null;e&&e.level&&(o=ma[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:pa[e].toLowerCase(),message:i,args:n,type:t.name})}},n=0,r=va;n<r.length;n++)t(r[n])}(t,e)},apps:null,SDK_VERSION:"7.14.1-0",INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"!==e?e:null}}}).default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l);function f(t){if(!Ws(c,t=t||Aa))throw Na.create("no-app",{appName:t});return c[t]}function p(n){var t,e,r=n.name;if(h.has(r))return Ra.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?l[r]:null;if(h.set(r,n),"PUBLIC"===n.type){var i=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[r])throw Na.create("invalid-app-argument",{appName:r});return t[r]()};void 0!==n.serviceProps&&Cs(i,n.serviceProps),l[r]=i,u.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])}}try{for(var o=ys(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return"PUBLIC"===n.type?l[r]:null}return e.INTERNAL=ps(ps({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Cs(e,t)},createSubscribe:Ys,ErrorFactory:Fs,deepExtend:Cs}),e}(),xa=(La.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},La);function La(t){this.container=t}if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ra.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ma=self.firebase.SDK_VERSION;Ma&&0<=Ma.indexOf("LITE")&&Ra.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Fa=Da.initializeApp;Da.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Ra.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Fa.apply(void 0,t)};var Ua,Fl=Da;(Ua=Fl).INTERNAL.registerComponent(new ia("platform-logger",function(t){return new xa(t)},"PRIVATE")),Ua.registerVersion(Ca,"0.6.2-0",void 0),Ua.registerVersion("fire-js",""),Fl.registerVersion("firebase","7.14.1-0","app"),function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},s=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=s;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=s.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=u,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).Oa(t,e)})},a.all=function(t){var o=c(t),s=o.next();return s.done?u([]):new a(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(s.value).Oa(e(r.length-1),t),!(s=o.next()).done;);})},a});var u=u||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function a(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=I+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(I.length),t.message,t.serverResponse):null}e(w,Error),w.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.v()};var T,I="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function C(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function O(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}T=C("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(R,k),R.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length})}function H(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,X=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){z=ot;break t}}z=""}function st(t){return nt(z,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===It&&e||"",this.b=Tt}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===Tt?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function _t(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(wt,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(It,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Tt={},It={};function St(t,e){this.a=t===Rt&&e||"",this.b=kt}function Nt(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Ct.test(t)||(t="about:invalid#zClosurez"),new St(Rt,t))}var kt={},Rt={};function Ot(){this.a="",this.b=Dt}function Pt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Dt?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Ot.prototype.ra=!0,Ot.prototype.qa=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Ot;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=a;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Kt=Wt||Bt,Ht=st("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Gt=nt(z.toLowerCase(),"webkit")&&!st("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Vt=z,Ht?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Gt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){var Xt=zt();if(null!=Xt&&Xt>parseFloat(Qt)){jt=String(Xt);break t}}jt=Qt}var Jt,$t={};function Zt(a){return t=a,e=function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}Jt=l.document&&Bt?zt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ae(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){ie||function(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);ie=function(){t.then(fe)}}else ie=function(){var t=fe;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e,n=se(document,"IFRAME");n.style.display="none",t=n,e=new mt(It,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Pt(Lt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}(),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new x;function fe(){for(var t;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}D(L,t)}var e,n;he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Ne(n,ve,t)},function(t){if(!(t instanceof De))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ne(n,ye,t)})}catch(t){Ne(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new P(function(){return new ge},function(t){t.reset()});function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function _e(t){if(t instanceof pe)return t;var e=new pe(a);return Ne(e,ve,t),e}function we(n){return new pe(function(t,e){e(n)})}function Ee(t,e,n){Ce(t,e,n,null)||ce(b(e,t))}function Te(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ee(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Ie(t,e){t.b||t.a!=ve&&t.a!=ye||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=be(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof De?r(t):n(e)}catch(t){r(t)}}:r}),Ie(e.a.c=t,e),e.a}function Ne(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ye||n instanceof De||(i=n,(r=t).g=!0,ce(function(){r.g&&Pe.call(null,i)}))))}function Ce(t,e,n,r){if(t instanceof pe)return Ie(t,be(e||a,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ce(t.ec,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Re(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Oe(e,n,r);else try{e.c?e.g.call(e.f):Oe(e,n,r)}catch(t){Pe.call(null,t)}D(me,e)}function Oe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,d(t)?t:null,d(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).ma=function(t,e){return(t=be(t,t,e)).c=!0,Ie(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){if(this.a==de){var e=new De(t);ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Re(r,o,ye,n)))}e.c=null}else Ne(e,ye,n)}(this,e)},this)}},t.Yc=function(t){this.a=de,Ne(this,ve,t)},t.Zc=function(t){this.a=de,Ne(this,ye,t)},t.ec=function(){for(var t;t=ke(this);)Re(this,t,this.a,this.i);this.h=!1};var Pe=ue;function De(t){k.call(this,t)}function xe(){this.wa=this.wa,this.na=this.na}e(De,k);var Le=0;function Me(t){var e;t.wa||(t.wa=!0,t.Ba(),0==Le)||(e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i))}xe.prototype.wa=!(De.prototype.name="cancel"),xe.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Fe=Object.freeze||function(t){return t},Ue=!Bt||9<=Number(Jt),je=Bt&&!Zt("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",a,e),l.removeEventListener("test",a,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:We[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},e(Be,qe);var We=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,je)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.f=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++He,this.ua=this.Na=!1}function ze(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Ge(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[Ke]?pn(t,e,n,v(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=Ue?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ve||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[Ke]?dn(t,e,n,v(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=ln(n),t&&t[Ke]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=Xe(o=t.a[e],n,r,i))&&(ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&cn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Xe(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Ke])Ye(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[Je]=null)):ze(t)}}}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&rn(t),n.call(r,e)}function un(t,e){if(t.ua)return!0;if(Ue)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return d(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){xe.call(this),this.u=new Qe(this),(this.Yb=this).eb=null}function pn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&Ye(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function yn(t,e,n){if(d(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function bn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];En(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)En(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function En(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(fn,xe),fn.prototype[Ke]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new qe(t,n);else if(t instanceof qe)t.target=t.target||n;else{var i=t;lt(t=new qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=vn(s,r,!0,t)&&i}if(i=vn(s=t.b=n,r,!0,t)&&i,i=vn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=vn(s=t.b=e[o],r,!1,t)&&i;return i},fn.prototype.Ba=function(){if(fn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ze(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=_n.prototype).V=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return En(this.b,t)?this.b[t]:e},t.set=function(t,e){En(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Tn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function In(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof In?(this.h=void 0!==e?e:t.h,Sn(this,t.f),this.i=t.i,this.b=t.b,Nn(this,t.l),this.c=t.c,Cn(this,Gn(t.a)),this.g=t.g):t&&(n=String(t).match(Tn))?(this.h=!!e,Sn(this,n[1]||"",!0),this.i=Pn(n[2]||""),this.b=Pn(n[3]||"",!0),Nn(this,n[4]),this.c=Pn(n[5]||"",!0),Cn(this,n[6]||"",!0),this.g=Pn(n[7]||"")):(this.h=!!e,this.a=new Vn(null,this.h))}function Sn(t,e,n){t.f=n?Pn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Nn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Cn(t,e,n){var r,i;e instanceof Vn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Hn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,Un)),t.a=new Vn(e,t.h))}function An(t,e,n){t.a.set(e,n)}function kn(t,e){return t.a.get(e)}function Rn(t){return t instanceof In?new In(t):new In(t,void 0)}function On(t,e){var n=new In(null,void 0);return Sn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}In.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Dn(e,Ln,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Dn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Dn(n,jn)),t.join("")},In.prototype.resolve=function(t){var e=new In(this),n=!!t.f;n?Sn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Nn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(nt(i,"./")||nt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Cn(e,Gn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,Un=/[#\?@]/g,jn=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(a){a.a||(a.a=new _n,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n=t[e].indexOf("="),r=null;if(0<=n){var i=t[e].substring(0,n);r=t[e].substring(n+1)}else i=t[e];o=i,s=r?decodeURIComponent(r.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function Bn(t){var e=bn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Hn(n,i,o):n.add(i,o)}return n}function Wn(t,e){qn(t),e=zn(t,e),En(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,En((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Kn(t,e){return qn(t),e=zn(t,e),En(t.a.b,e)}function Hn(t,e,n){Wn(t,e),0<n.length&&(t.c=null,t.a.set(zn(t,e),G(n)),t.b+=n.length)}function Gn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function zn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=zn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){qn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){qn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=H(e,this.a.get(zn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Kn(this,t=zn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(At(t))),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=se(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Ct.test(e)||(e="about:invalid#zClosurez"),e=new St(Rt,e)),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Nt(e),s&&(Kt&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(Nt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Tr()&&"ionic:"!==Tr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Fl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Fl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?pr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Er()||"chrome-extension:"===Tr()||ur())&&!fr()&&_r()&&!hr()}function Er(){return"http:"===Tr()||"https:"===Tr()}function Tr(){return l.location&&l.location.protocol||null}function Ir(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Nr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Cr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Rr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Or(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Pr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function xr(){return br("fireauth.oauthhelper",l)||br("fireauth.iframe",l)}Or.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==Tr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lr,Mr={};function Fr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Lr=2==Ur.abcd}catch(t){Lr=!1}function jr(t,e,n){Lr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Vr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function qr(t){var e={};return Vr(e,t),e}function Br(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Br(t[n]));return e}function Wr(t){var e=t&&(t[Qr]?"phone":null);if(!(e&&t&&t[zr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");jr(this,"uid",t[zr]),jr(this,"displayName",t[Hr]||null);var n=null;t[Gr]&&(n=new Date(t[Gr]).toUTCString()),jr(this,"enrollmentTime",n),jr(this,"factorId",e)}function Kr(t){try{var e=new Yr(t)}catch(t){e=null}return e}Wr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Hr="displayName",Gr="enrolledAt",zr="mfaEnrollmentId",Qr="phoneInfo";function Yr(t){Wr.call(this,t),jr(this,"phoneNumber",t[Qr])}function Xr(t){var e={},n=t[ti],r=t[ni],i=t[ri];if(t=Kr(t[ei]),!i||i!=$r&&i!=Zr&&!n||i==Zr&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==Zr?(e[oi]=n||null,e[ai]=n||null,e[ii]=r):(e[oi]=r||null,e[ai]=r||null,e[ii]=n||null),e[si]=t||null,jr(this,ci,i),jr(this,ui,Br(e))}e(Yr,Wr),Yr.prototype.v=function(){var t=Yr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",$r="EMAIL_SIGNIN",Zr="VERIFY_AND_CHANGE_EMAIL",ti="email",ei="mfaInfo",ni="newEmail",ri="requestType",ii="email",oi="fromEmail",si="multiFactorInfo",ai="previousEmail",ui="data",ci="operation";function hi(t){var e=kn(t=Rn(t),li)||null,n=kn(t,fi)||null,r=kn(t,vi)||null;if(r=r&&gi[r]||null,!e||!n||!r)throw new w("argument-error",li+", "+fi+"and "+vi+" are required in a valid action code URL.");Vr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,pi)||null,languageCode:kn(t,di)||null,tenantId:kn(t,yi)||null})}var li="apiKey",fi="oobCode",pi="continueUrl",di="languageCode",vi="mode",yi="tenantId",gi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:$r,verifyAndChangeEmail:Zr,verifyEmail:"VERIFY_EMAIL"};function mi(t){try{return new hi(t)}catch(t){return null}}function bi(t){var e=t[Ii];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[_i];if(n&&"object"==typeof n){e=n[Ci];var r=n[Si];if(n=n[Ni],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new w("argument-error",Si+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new w("argument-error",Ni+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new w("argument-error",Ci+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new w("missing-android-pkg-name")}}else if(void 0!==n)throw new w("argument-error",_i+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[Ai])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",Ai+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ei])&&"boolean"!=typeof e)throw new w("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[wi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",wi+" property must be a non empty string when specified.");this.i=t||null}var _i="android",wi="dynamicLinkDomain",Ei="handleCodeInApp",Ti="iOS",Ii="url",Si="installApp",Ni="minimumVersion",Ci="packageName",Ai="bundleId";function ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ri=null;function Oi(t){var e=Di(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Pi(t){try{return new Oi(t)}catch(t){return null}}function Di(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse((r="",function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ri[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ri){Ri={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ri[o]&&(Ri[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){r+=String.fromCharCode(t)}),r))}catch(t){}var r;return null}Oi.prototype.S=function(){return this.f},Oi.prototype.i=function(){return this.b},Oi.prototype.toString=function(){return this.g};var xi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Li=["client_id","response_type","scope","redirect_uri","state"],Mi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Li},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Li},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Li},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:xi},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function Fi(t){for(var e in Mi)if(Mi[e].ea==t)return Mi[e];return null}function Ui(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Hi,e["github.com"]=Ki,e["twitter.com"]=Gi;var n=t&&t[Vi];try{if(n)return e[n]?new e[n](t):new Bi(t);if(void 0!==t[ji])return new qi(t)}catch(t){}return null}var ji="idToken",Vi="providerId";function qi(t){var e=t[Vi];if(!e&&t[ji]){var n=Pi(t[ji]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),jr(this,"providerId",e),jr(this,"isNewUser",n)}function Bi(t){qi.call(this,t),jr(this,"profile",Br((t=Cr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Bi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Bi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Hi(t){if(Bi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(t){if(Bi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function zi(t){var e=Rn(t),n=kn(e,"link"),r=kn(Rn(n),"link");return e=kn(e,"deep_link_id"),kn(Rn(e),"link")||e||r||n||t}function Qi(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Yi:Xi}e(Bi,qi),e(Wi,Bi),e(Ki,Bi),e(Hi,Bi),e(Gi,Bi);var Yi="enroll",Xi="signin";function Ji(){}function $i(t,n){return t.then(function(t){if(t[Vs]){var e=Pi(t[Vs]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==I+"user-not-found"?new w("user-mismatch"):t})}function Zi(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function to(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function eo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Zi(t.providerId,t.pendingToken)}catch(t){}return null}function no(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function ro(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function io(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new no(t.providerId,e,t.signInMethod)}catch(t){}}return null}function oo(t,e){this.Oc=e||[],Vr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Fi(t)||{}).Ha||null,this.kb=null}function so(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');oo.call(this,t,[])}function ao(t){oo.call(this,t,Li),this.a=[]}function uo(){ao.call(this,"facebook.com")}function co(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function ho(){ao.call(this,"github.com")}function lo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){ao.call(this,"google.com"),this.Aa("profile")}function po(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new fo).credential({idToken:n,accessToken:e})}function vo(){oo.call(this,"twitter.com",xi)}function yo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new no("twitter.com",n,"twitter.com")}function go(t,e,n){this.a=t,this.f=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===bo.EMAIL_LINK_SIGN_IN_METHOD?bo.EMAIL_LINK_SIGN_IN_METHOD:bo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function mo(t){return t&&t.email&&t.password?new go(t.email,t.password,t.signInMethod):null}function bo(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function _o(t,e){if(!(e=wo(e)))throw new w("argument-error","Invalid email link!");return new go(t,e.code,bo.EMAIL_LINK_SIGN_IN_METHOD)}function wo(t){return(t=mi(t=zi(t)))&&t.operation===$r?t:null}function Eo(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new w("internal-error");this.a=t,jr(this,"providerId","phone"),this.ea="phone",jr(this,"signInMethod","phone")}function To(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Eo(n)}return null}function Io(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function So(t){try{this.a=t||Fl.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function No(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new Eo({bb:t,ab:e})}function Co(t){if(t.temporaryProof&&t.phoneNumber)return new Eo({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return po(o,n);case"facebook.com":return co(n);case"github.com":return lo(n);case"twitter.com":return yo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Zi(e,s):new no(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ao(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ao(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function ko(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function Ro(t){return(t=t||{}).type?new ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Oo(){this.b=null,this.a=[]}Qi.prototype.Fa=function(){return this.a?_e(this.a):_e(this.b)},Qi.prototype.v=function(){return this.type==Yi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Ji.prototype.ia=function(){},Ji.prototype.b=function(){},Ji.prototype.c=function(){},Ji.prototype.v=function(){},Zi.prototype.ia=function(t){return oa(t,to(this))},Zi.prototype.b=function(t,e){var n=to(this);return n.idToken=e,sa(t,n)},Zi.prototype.c=function(t,e){return $i(aa(t,to(this)),e)},Zi.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},no.prototype.ia=function(t){return oa(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,sa(t,n)},no.prototype.c=function(t,e){return $i(aa(t,ro(this)),e)},no.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},oo.prototype.Ia=function(t){return this.Fb=ct(t),this},e(so,oo),e(ao,oo),ao.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},ao.prototype.Nb=function(){return G(this.a)},ao.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new no(this.providerId,n,this.providerId)},e(uo,ao),jr(uo,"PROVIDER_ID","facebook.com"),jr(uo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(ho,ao),jr(ho,"PROVIDER_ID","github.com"),jr(ho,"GITHUB_SIGN_IN_METHOD","github.com"),e(fo,ao),jr(fo,"PROVIDER_ID","google.com"),jr(fo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(vo,oo),jr(vo,"PROVIDER_ID","twitter.com"),jr(vo,"TWITTER_SIGN_IN_METHOD","twitter.com"),go.prototype.ia=function(t){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,va,{email:this.a,oobCode:this.f}):Ba(t,Fa,{email:this.a,password:this.f})},go.prototype.b=function(t,e){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,ya,{idToken:e,email:this.a,oobCode:this.f}):Ba(t,ka,{idToken:e,email:this.a,password:this.f})},go.prototype.c=function(t,e){return $i(this.ia(t),e)},go.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Vr(bo,{PROVIDER_ID:"password"}),Vr(bo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(bo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Eo.prototype.ia=function(t){return t.cb(Io(this))},Eo.prototype.b=function(t,e){var n=Io(this);return n.idToken=e,Ba(t,ja,n)},Eo.prototype.c=function(t,e){var n=Io(this);return n.operation="REAUTH",$i(t=Ba(t,Va,n),e)},Eo.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},So.prototype.cb=function(r,i){var o=this.a.b;return _e(i.verify()).then(function(n){if("string"!=typeof n)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(i.type){case"recaptcha":var t=v(r)?r.session:null,e=v(r)?r.phoneNumber:r;return(t&&t.type==Yi?t.Fa().then(function(t){return Ba(o,Oa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Xi?t.Fa().then(function(t){return e={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Ba(o,Pa,e).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Ba(o,Ca,{phoneNumber:e,recaptchaToken:n})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t});default:throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Vr(So,{PROVIDER_ID:"phone"}),Vr(So,{PHONE_SIGN_IN_METHOD:"phone"}),ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ko.prototype.S=function(){return this.h},ko.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Po,Do=null;function xo(t){var e="unauthorized-domain",n=void 0,r=Rn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function Lo(t,e,n){w.call(this,t,n),(t=e||{}).Gb&&jr(this,"email",t.Gb),t.da&&jr(this,"phoneNumber",t.da),t.credential&&jr(this,"credential",t.credential),t.Wb&&jr(this,"tenantId",t.Wb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(I)&&(e=e.substring(I.length));var n={credential:Co(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new Lo(e,n,t.message)}return null}function Fo(){}function Uo(t){return t.c||(t.c=t.b())}function jo(){}function Vo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function qo(){}function Bo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ko(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ho(t){this.f=t,this.b=this.c=this.a=null}function Go(t,e){this.name=t,this.value=e}e(xo,w),e(Lo,w),Lo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Lo.prototype.toJSON=function(){return this.v()},Fo.prototype.c=null,e(jo,Fo),jo.prototype.a=function(){var t=Vo(this);return t?new ActiveXObject(t):new XMLHttpRequest},jo.prototype.b=function(){var t={};return Vo(this)&&(t[0]=!0,t[1]=!0),t},Po=new jo,e(qo,Fo),qo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Bo;throw Error("Unsupported browser")},qo.prototype.b=function(){return{}},(t=Bo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ko.prototype.a=null,Ko.prototype.reset=function(t,e,n,r,i){delete this.a},Go.prototype.toString=function(){return this.name};var zo=new Go("SEVERE",1e3),Qo=new Go("WARNING",900),Yo=new Go("CONFIG",700),Xo=new Go("FINE",500);Ho.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(O("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ko(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Jo,$o={},Zo=null;function ts(t){var e;if(Zo||(Zo=new Ho(""),($o[""]=Zo).c=Yo),!(e=$o[t])){e=new Ho(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ts(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,$o[t]=e}return e}function es(t,e){t&&t.log(Xo,e,void 0)}function ns(t){this.f=t}function rs(t){fn.call(this),this.s=t,this.readyState=is,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ts("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(ns,Fo),ns.prototype.a=function(){return new rs(this.f)},ns.prototype.b=(Jo={},function(){return Jo}),e(rs,fn);var is=0;function os(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function ss(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,as(t)}function as(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function us(t){fn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=cs,this.w=this.R=!1}(t=rs.prototype).open=function(t,e){if(this.readyState!=is)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,as(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ss(this,!1)),this.readyState=is},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,as(this)),this.a&&(this.readyState=3,as(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,os(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ss(this,!0):as(this),3==this.readyState&&os(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,ss(this,!0))},t.qc=function(t){this.a&&(this.response=t,ss(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Qo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ss(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Qo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Qo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(us,fn);var cs="";us.prototype.b=ts("goog.net.XhrIo");var hs=/^https?$/i,ls=["POST","PUT"];function fs(t){return"content-type"==t.toLowerCase()}function ps(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ds(t),ys(t)}function ds(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function vs(t){if(t.c&&void 0!==u)if(t.B[1]&&4==ms(t)&&2==bs(t))es(t.b,_s(t,"Local request error detected and ignored"));else if(t.i&&4==ms(t))yn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==ms(t)){es(t.b,_s(t,"Request complete")),t.c=!1;try{var e,n=bs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Tn)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!hs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<ms(t)?t.a.statusText:""}catch(e){es(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+bs(t)+"]",ds(t)}}finally{ys(t)}}}function ys(t,e){if(t.a){gs(t);var n=t.a,r=t.B[0]?a:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(zo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function gs(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ms(t){return t.a?t.a.readyState:0}function bs(t){try{return 2<ms(t)?t.a.status:-1}catch(t){return-1}}function _s(t,e){return e+" ["+t.P+" "+t.l+" "+bs(t)+"]"}function ws(t){var e=Ps;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Es(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function Ts(t){if(t.a){if(!t.u)throw new Cs;t.u=!1}}function Is(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function Ss(t){return q(t.g,function(t){return d(t[1])})}function Ns(t){if(t.h&&t.a&&Ss(t)){var e=t.h,n=Rs[e];n&&(l.clearTimeout(n.a),delete Rs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(A(e)||"function"==typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ss(t)||(n=!0)}}t.c=e,r&&(a=m(t.m,t,!0),r=m(t.m,t,!1),e instanceof ws?(Is(e,a,r),e.B=!0):e.then(a,r)),n&&(e=new ks(e),Rs[e.a]=e,t.h=e.a)}function Cs(){k.call(this)}function As(){k.call(this)}function ks(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=us.prototype).Ka=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",es(this.b,_s(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(es(this.b,_s(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ys(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ys(this,!0)),us.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?vs(this):this.Hc())},t.Hc=function(){vs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case cs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(zo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return es(this.b,"Can not get response: "+t.message),null}},ws.prototype.cancel=function(t){if(this.a)this.c instanceof ws&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new As,Ts(this),Es(this,!1,t))}},ws.prototype.m=function(t,e){this.i=!1,Es(this,t,e)},ws.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return Is(this,r,function(t){t instanceof As?o.cancel():i(t)}),o.then(t,e,n)},ws.prototype.$goog_Thenable=!0,e(Cs,k),Cs.prototype.message="Deferred has already fired",Cs.prototype.name="AlreadyCalledError",e(As,k),As.prototype.message="Deferred was canceled",As.prototype.name="CanceledError",ks.prototype.c=function(){throw delete Rs[this.a],this.b};var Rs={};function Os(t){var e,n,r,i,o,s=document,a=bt(t).toString(),u=se(document,"SCRIPT"),c={Tb:u,Ka:void 0},h=new ws(c);return e=window.setTimeout(function(){Ds(u,!0);var t=new Ms(Ls,"Timeout reached for loading script "+a);Ts(h),Es(h,!1,t)},5e3),c.Ka=e,u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(Ds(u,!1,e),Ts(h),Es(h,!0,null))},u.onerror=function(){Ds(u,!0,e);var t=new Ms(xs,"Error while loading script "+a);Ts(h),Es(h,!1,t)},lt(c={},{type:"text/javascript",charset:"UTF-8"}),ne(u,c),r=t,ft(n=u,"HTMLScriptElement"),n.src=bt(r),null===p&&(p=(r=(r=l.document).querySelector&&r.querySelector("script[nonce]"))&&(r=r.nonce||r.getAttribute("nonce"))&&f.test(r)?r:""),(r=p)&&n.setAttribute("nonce",r),((o=((i=s)||document).getElementsByTagName("HEAD"))&&0!=o.length?o[0]:i.documentElement).appendChild(u),h}function Ps(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Ds(t,!0,this.Ka)}}function Ds(t,e,n){null!=n&&l.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var xs=0,Ls=1;function Ms(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Fs(t){this.f=t}function Us(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||qs,this.g=ct(t.secureTokenHeaders||Bs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ws,this.a=ct(t.firebaseHeaders||Ks),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Fl.INTERNAL.node&&Fl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new ns(self):fr()?this.f=new Fs(n):this.f=new qo,this.b=null}e(Ms,k),e(Fs,Fo),Fs.prototype.a=function(){return new this.f},Fs.prototype.b=function(){return{}};var js,Vs="idToken",qs=new Or(3e4,6e4),Bs={"Content-Type":"application/x-www-form-urlencoded"},Ws=new Or(3e4,6e4),Ks={"Content-Type":"application/json"};function Hs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Gs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function zs(t,e,n,r,i,o,s){var a;(t=!((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))||hr()?m(t.w,t):(js=js||new pe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Ys]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Is(Os(_t(Qs,{onload:Ys})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.s,t)))(e,n,r,i,o,s)}Us.prototype.S=function(){return this.b},Us.prototype.w=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new us(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}pn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return es(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(s,"ready",function(){a&&clearTimeout(a),Me(this)}),dn(s,"timeout",function(){a&&clearTimeout(a),Me(this),n&&n(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Po.a(),t.B=t.D?Uo(t.D):Uo(Po),t.a.onreadystatechange=m(t.Sb,t);try{es(t.b,_s(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return es(t.b,_s(t,"Error opening Xhr: "+e.message)),ps(t,e)}e=r||"";var o,s=new _n(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)U(t,e,void 0);else for(var n=bn(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=fs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&e instanceof l.FormData,!B(ls,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{gs(t),0<t.g&&(t.w=(o=t.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),es(t.b,_s(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ka,t)):t.s=yn(t.Ka,t.g,t)),es(t.b,_s(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){es(t.b,_s(t,"Send error: "+e.message)),ps(t,e)}}(s,t,e,r,i)};var Qs=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Ys="__fcb"+Math.floor(1e6*Math.random()).toString();function Xs(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new w("invalid-email")}function Js(t){"email"in t&&Xs(t)}function $s(t){if(!t[Vs]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ct(t));throw new w("internal-error")}}function Zs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}Us.prototype.s=function(t,n,r,i,o){var s=this;js.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Us.prototype.vb=function(){return Ba(this,Ra,{})},Us.prototype.xb=function(t,e){return Ba(this,Aa,{idToken:t,email:e})},Us.prototype.yb=function(t,e){return Ba(this,ka,{idToken:t,password:e})};var ta={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ea(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function na(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function ra(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Kn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ia(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=Wa(t.errorMessage)),e)throw e;$s(t)}function oa(t,e){return e.returnIdpCredential=!0,Ba(t,Da,e)}function sa(t,e){return e.returnIdpCredential=!0,Ba(t,La,e)}function aa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ba(t,xa,e)}function ua(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=Us.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(ta,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ba(this,Aa,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Ba(this,Ta,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ba(this,_a,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ba(this,wa,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ba(this,Ea,t)},t.cb=function(t){return Ba(this,Ua,t)},t.jb=function(t,e){return Ba(this,Na,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ba(this,ha,{oobCode:t})},t.fb=function(t){return Ba(this,ca,{oobCode:t})};var ca={endpoint:"setAccountInfo",A:ua,Y:"email",C:!0},ha={endpoint:"resetPassword",A:ua,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},la={endpoint:"signupNewUser",A:function(t){if(Xs(t),!t.password)throw new w("weak-password")},G:$s,U:!0,C:!0},fa={endpoint:"createAuthUri",C:!0},pa={endpoint:"deleteAccount",M:["idToken"]},da={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},va={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Xs,G:$s,U:!0,C:!0},ya={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Xs,G:$s,U:!0},ga={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ea,G:$s,C:!0,La:!0},ma={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ea,G:$s,C:!0,La:!0},ba={endpoint:"getAccountInfo"},_a={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");Xs(t)},Y:"email",C:!0},wa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Ea={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Ta={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");Xs(t)},Y:"email",C:!0},Ia={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Sa={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Na={endpoint:"resetPassword",A:ua,Y:"email",C:!0},Ca={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Aa={endpoint:"setAccountInfo",M:["idToken"],A:Js,U:!0},ka={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(Js(t),!t.password)throw new w("weak-password")},G:$s,U:!0},Ra={endpoint:"signupNewUser",G:$s,U:!0,C:!0},Oa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Pa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Da={endpoint:"verifyAssertion",A:na,Wa:ra,G:ia,U:!0,C:!0},xa={endpoint:"verifyAssertion",A:na,Wa:ra,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw Wa(t.errorMessage);$s(t)},U:!0,C:!0},La={endpoint:"verifyAssertion",A:function(t){if(na(t),!t.idToken)throw new w("internal-error")},Wa:ra,G:ia,U:!0},Ma={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new w("invalid-custom-token")},G:$s,U:!0,C:!0},Fa={endpoint:"verifyPassword",A:function(t){if(Xs(t),!t.password)throw new w("wrong-password")},G:$s,U:!0,C:!0},Ua={endpoint:"verifyPhoneNumber",A:Zs,G:$s,C:!0},ja={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new w("internal-error");Zs(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);$s(t)}},Va={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Zs,G:$s,C:!0},qa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Vs]^!!t.refreshToken)throw new w("internal-error")},C:!0,La:!0};function Ba(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return we(new w("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return _e(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Rn(e+n);An(a,"key",t.c),s&&An(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new pe(function(e,n){zs(t,a.toString(),function(t){t?t.error?n(Ka(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:Qn(Nr(i)),t.a,t.i.get())})}(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new w("internal-error");return r[e.Y]})}function Wa(t){return Ka({error:{errors:[{message:t}],code:400,message:t}})}function Ka(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new w(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new w(r[i],e);return!e&&t&&(e=Sr(t)),new w("internal-error",e)}function Ha(t){var o;this.b=t,this.a=null,this.nb=(o=this,(Ya=Ya||new pe(function(t,e){function n(){Rr(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Rr(),e(Error("Network Error"))},timeout:za.get()})}if(br("gapi.iframes.Iframe"))t();else if(br("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},_e(Os(r=_t(Ga,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw Ya=null,t})).then(function(){return new pe(function(r,i){br("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Qa.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ga=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),za=new Or(3e4,6e4),Qa=new Or(5e3,15e3),Ya=null;function Xa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=On(this.i,"/__/auth/iframe"),An(this.a,"apiKey",this.g),An(this.a,"appName",this.h),this.b=null,this.c=[]}function Ja(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function $a(t){try{return Fl.app(t).auth().Ea()}catch(t){return[]}}function Za(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function tu(t){var a=tr();return Ba(t,Ia,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{var e=Rn(a),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,s=n;if(o=0==i.indexOf("chrome-extension://")?Rn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new xo(tr())})}function eu(i){return i.l||(i.l=ar().then(function(){if(!i.s){var t=i.c,e=i.h,n=$a(i.b),r=new Xa(i.u,i.f,i.b);r.f=t,r.b=e,r.c=G(n||[]),i.s=r.toString()}i.i=new Ha(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");var t,e;t=r.i,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ro(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",_e(e)}return e.status="ERROR",_e(e)},t.nb.then(function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)})),i.l}function nu(t){return t.m||(t.w=t.c?gr(t.c,$a(t.b)):null,t.m=new Us(t.f,C(t.h),t.w)),t.m}function ru(t,e,n,r,i,o,s,a,u,c,h){return(t=new Ja(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function iu(t){if(this.a=t||Fl.INTERNAL.reactNative&&Fl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ou(t){this.b=t,this.a={},this.f=m(this.c,this)}Xa.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Wn(this.a.a,"v"),this.b?An(this.a,"eid",this.b):Wn(this.a.a,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Wn(this.a.a,"fw"),this.a.toString()},Ja.prototype.ub=function(t){return this.h=t,this},Ja.prototype.toString=function(){var t=On(this.s,"/__/auth/handler");if(An(t,"apiKey",this.m),An(t,"appName",this.c),An(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Fl.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,An(t,"providerId",this.a.providerId),n=Nr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||An(t,"customParameters",Sr(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&An(t,"scopes",e.join(",")),this.l?An(t,"redirectUrl",this.l):Wn(t.a,"redirectUrl"),this.g?An(t,"eventId",this.g):Wn(t.a,"eventId"),this.i?An(t,"v",this.i):Wn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Wn(t.a,"tid"),this.f?An(t,"eid",this.f):Wn(t.a,"eid"),(s=$a(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=Za.prototype).Lb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;r={type:"webStorageSupport"},eu(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Ub=function(){var t=mr();return!Ir(t)&&!kr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return we(new w("popup-blocked"));if(s&&!Ir())return this.ka().o(function(t){rr(e),i(t)}),r(),_e();this.a||(this.a=tu(nu(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){Ao(n),s||er(ru(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=tu(nu(this)));var i=this;return this.a.then(function(){Ao(e),er(ru(i.u,i.f,i.b,t,e,tr(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return eu(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new w("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){K(this.g,function(t){return t==e})},(t=iu.prototype).get=function(t){return _e(this.a.getItem(t)).then(function(t){return t&&Cr(t)})},t.set=function(t,e){return _e(this.a.setItem(t,Sr(e)))},t.T=function(t){return _e(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var su,au=[];function uu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function cu(t){this.a=t}function hu(t){this.c=t,this.b=!1,this.a=[]}function lu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return fu(r,c),t}).o(function(t){throw fu(r,c),t})}function fu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),K(t.a,function(t){return t==e})}}function pu(){if(!vu())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,r=this;hr()&&self?(this.l=function(){var e=hr()?self:null;if(U(au,function(t){t.b==e&&(n=t)}),!n){var n=new ou(e);au.push(n)}return n}(),uu(this.l,"keyChanged",function(t,n){return _u(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),uu(this.l,"ping",function(){return _e(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?_e().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):_e(null)).then(function(t){(r.h=t)&&(r.g=new hu(new cu(t)),lu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function du(t){return t.m||(t.m=function i(o){return new pe(function(e,n){var t=o.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=o,new pe(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return i(o)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}(t)),t.m}function vu(){try{return l.indexedDB}catch(t){return}}function yu(t){return t.objectStore("firebaseLocalStorage")}function gu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function mu(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function bu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?lu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):_e();var n}function _u(r){return du(r).then(function(t){var i=yu(gu(t,!1));return i.getAll?mu(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function wu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Eu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_e().then(function(){if(vu()){var e=Ar(),n="__sak"+e;return su=su||new pu,(i=su).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function Tu(){this.a={},this.type="inMemory"}function Iu(){if(!function(){var t="Node"==lr();if(t=Su()||t&&Fl.INTERNAL.node&&Fl.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==lr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Su()||Fl.INTERNAL.node.localStorage,this.type="localStorage"}function Su(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Nu(){this.type="nullStorage"}function Cu(){if(!function(){var t="Node"==lr();if(t=Au()||t&&Fl.INTERNAL.node&&Fl.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==lr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Au()||Fl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Au(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ku(){var t={};t.Browser=Pu,t.Node=Du,t.ReactNative=xu,t.Worker=Lu,this.a=t[lr()]}ou.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];U(t,function(t){e.push(_e().then(function(){return t(n.origin,n.data.data)}))}),Te(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},hu.prototype.close=function(){for(;0<this.a.length;)fu(this,this.a[0]);this.b=!0},(t=pu.prototype).set=function(n,r){var i,o=!1,s=this;return du(this).then(function(t){return mu((t=yu(gu(i=t,!0))).get(n))}).then(function(t){var e=yu(gu(i,!0));return t?(t.value=r,mu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,mu(e.add(t)))}).then(function(){return s.c[n]=r,bu(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return du(this).then(function(t){return mu(yu(gu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return du(this).then(function(t){return n=!0,r.b++,mu(yu(gu(t,!0)).delete(e))}).then(function(){return delete r.c[e],bu(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(wu(n=this),function e(){n.f=setTimeout(function(){n.i=_u(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){K(this.a,function(t){return t==e}),0==this.a.length&&wu(this)},(t=Eu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){K(this.a,function(t){return t==e})},(t=Tu.prototype).get=function(t){return _e(this.a[t])},t.set=function(t,e){return this.a[t]=e,_e()},t.T=function(t){return delete this.a[t],_e()},t.ba=function(){},t.ha=function(){},(t=Iu.prototype).get=function(t){var e=this;return _e().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&Ze(l.window,"storage",t)},t.ha=function(t){l.window&&nn(l.window,"storage",t)},(t=Nu.prototype).get=function(){return _e(null)},t.set=function(){return _e()},t.T=function(){return _e()},t.ba=function(){},t.ha=function(){},(t=Cu.prototype).get=function(t){var e=this;return _e().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Ru,Ou,Pu={F:Iu,$a:Cu},Du={F:Iu,$a:Cu},xu={F:iu,$a:Nu},Lu={F:Iu,$a:Nu},Mu={od:"local",NONE:"none",qd:"session"};function Fu(){var t=!(kr(mr())||!cr()),e=Ir(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},t=Ru=Ru||new ku;try{this.g=!Zn()&&xr()||!l.indexedDB?new t.a.F:new Eu(hr()?new Tu:new t.a.F)}catch(t){this.g=new Tu,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Tu}this.u=new Tu,this.f=m(this.Vb,this),this.b={}}function Uu(){return Ou=Ou||new Fu}function ju(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Vu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function qu(t,e,n){return n=Vu(e,n),"local"==e.F&&(t.b[n]=null),ju(t,e.F).T(n)}function Bu(t){t.c&&(clearInterval(t.c),t.c=null)}function Wu(t){this.a=t,this.b=Uu()}(t=Fu.prototype).get=function(t,e){return ju(this,t.F).get(Vu(t,e))},t.set=function(e,t,n){var r=Vu(e,n),i=this,o=ju(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Vu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(ju(this,"local").ba(this.f),this.h||(Zn()||!xr())&&l.indexedDB||!this.l||(Bu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Vu(t,e),this.a[t]&&(K(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(ju(this,"local").ha(this.f),Bu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ju(this,"local").ha(this.f):Bu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))},Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Ku,Hu={name:"authEvent",F:"local"};function Gu(){this.a=Uu()}function zu(t,e){this.b=Qu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ku&&(Ku=l.Int32Array?new Int32Array(ec):ec),this.reset()}e(zu,function(){this.b=-1});for(var Qu=64,Yu=Qu-1,Xu=[],Ju=0;Ju<Yu;Ju++)Xu[Ju]=0;var $u=H(128,Xu);function Zu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ku[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Zu(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Zu(t),i=0)}}t.c=i,t.g+=n}zu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):G(this.h)};var ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function nc(){zu.call(this,8,rc)}e(nc,zu);var rc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ic(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Gu,this.g=new Wu(this.h),this.f=null,this.b=[],this.a=this.c=null}function oc(t){return new w("invalid-cordova-configuration",t)}function sc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function ac(c){return c.f||(c.f=c.ka().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),uc(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=zi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=Cr(kn(n=Rn(e),"firebaseError")||null))?E(n):null)?new ko(t.c,t.b,null,null,n,null,t.S()):new ko(t.c,t.b,e,t.f,null,null,t.S())),e=n||o}sc(i,e)})}var i,o,t,s,r,a,u;c.Ca(function t(e){return n(e),c.Qa(t),!1}),i=c,o=new ko("unknown",null,null,null,new w("no-auth-event")),t=!1,s=gn(500).then(function(){return uc(i).then(function(){t||sc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Do=Do||new Oo,a=e,(u=Do).a.push(a),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(a=br("universalLinks.subscribe",l))&&a(null,u.b))})})),c.f}function uc(e){var t,n=null;return(t=e.g).b.get(Hu,t.a).then(function(t){return Ro(t)}).then(function(t){return n=t,qu((t=e.g).b,Hu,t.a)}).then(function(){return n})}function cc(t){this.a=t,this.b=Uu()}(t=ic.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof br("universalLinks.subscribe",l))throw oc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",l))throw oc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",l))throw oc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",l))throw oc("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Lb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),_e()},t.Jb=function(){return we(new w("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return we(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=_e().then(function(){return Ao(e),ac(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new ko(t,r,null,o,new w("no-auth-event"),null,i),a=br("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=br("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return we(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=function(t){var e=new nc;tc(e,t),t=[];var n=8*e.g;e.c<56?tc(e,$u,56-e.c):tc(e,$u,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Zu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),c.sessionId=o;var h=ru(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Hu,s.v(),t)}).then(function(){var t=br("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=br("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=br("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=br("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||gn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){Pr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return uc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),ac(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ko("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Qa=function(e){K(this.b,function(t){return t==e})};var hc={name:"pendingRedirect",F:"session"};function lc(t){return qu(t.b,hc,t.a)}function fc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Nc,this.B=new Oc,this.g=new cc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=pc(this.D,this.u,this.m,T)}function pc(t,e,n,r){var i=Fl.SDK_VERSION||null;return new(ur()?ic:Za)(t,e,n,i,r)}function dc(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function vc(n){n.a.Ub()&&dc(n).o(function(t){var e=new ko("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));wc(t)&&n.s(e)}),n.a.Qb()||Cc(n.b)}function yc(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(hc,e.a).then(function(t){return"pending"==t}).then(function(t){t?lc(n.g).then(function(){dc(n).o(function(t){var e=new ko("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));wc(t)&&n.s(e)})}):vc(n)}).o(function(){vc(n)})}function gc(t,e){K(t.h,function(t){return t==e})}fc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=pc(this.D,this.u,this.m),this.i={}},fc.prototype.s=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return Cc(this.b),e};var mc=new Or(2e3,1e4),bc=new Or(3e4,6e4);function _c(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function wc(t){return t&&"auth/cordova-not-ready"==t.code}function Ec(e,t,n,r,i){var o,s;return(s=e.g).b.set(hc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(wc(t))throw new w("operation-not-supported-in-this-environment");return o=t,lc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new pe(function(){}):lc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Tc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},mc.get())}fc.prototype.pa=function(){return this.b.pa()};var Ic={};function Sc(t,e,n){var r=e+":"+n;return Ic[r]||(Ic[r]=new fc(t,e,n)),Ic[r]}function Nc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Cc(t){t.g||(t.g=!0,Rc(t,!1,null,null))}function Ac(t){t.g&&!t.i&&Rc(t,!1,null,null)}function kc(t,e){if(t.b=function(){return _e(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Rc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):kc(t,n):kc(t,{user:null}),t.f=[],t.c=[]}function Oc(){}function Pc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Dc(t,e){this.a=e,jr(this,"verificationId",t)}function xc(t,e,n,r){return new So(t).cb(e,n).then(function(t){return new Dc(t,r)})}function Lc(t){var e=Di(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Mc(t,e,n){var r=e&&e[Uc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Qi(null,r),this.b=[];var i=this;U(e[Fc]||[],function(t){(t=Kr(t))&&i.b.push(t)}),jr(this,"auth",this.a),jr(this,"session",this.c),jr(this,"hints",this.b)}Nc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Nc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Rc(this,!0,null,t.a),_e()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Rc(e,a,t,null)}).o(function(t){Rc(e,a,null,t)})}(this,t,e):we(new w("invalid-auth-event")):(Rc(this,!1,null,null),_e())}else we(new w("invalid-auth-event"))},Nc.prototype.pa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=gn(bc.get()).then(function(){n.b||(n.g=!0,Rc(n,!0,null,r))}))})},Oc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),_e()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):we(new w("invalid-auth-event"))}else we(new w("invalid-auth-event"));var i,o,s,a},Dc.prototype.confirm=function(t){return t=No(this.verificationId,t),this.a(t)};var Fc="mfaInfo",Uc="mfaPendingCredential";function jc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Mc(t,e,n),jr(this,"resolver",this.b)}function Vc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new jc(e,t.serverResponse,n,t.message)}catch(t){}return null}function qc(){}function Bc(t){jr(this,"factorId",t.ea),this.a=t}function Wc(t){if(Bc.call(this,t),this.a.ea!=So.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Kc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function Hc(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[zr]=t.uid),t.displayName&&(n[Hr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Qr]=t.phoneNumber);try{e=new Yr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Gc(this,r)}function Gc(t,e){t.b=e,jr(t,"enrolledFactors",e)}function zc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Qc(t){this.c=t,this.b=this.a=null}function Yc(t){return t.b&&1e3*t.b.c||0}function Xc(t,e){var n=e.refreshToken;t.b=Pi(e[Vs]||""),t.a=n}function Jc(t,e){this.a=t||null,this.b=e||null,Vr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function $c(t,e,n,r,i,o){Vr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Zc(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Fl.SDK_VERSION?gr(Fl.SDK_VERSION):null,this.a=new Us(this.l,C(T),t),this.b=new Qc(this.a),sh(this,e[Vs]),Xc(this.b,e),jr(this,"refreshToken",this.b.a),ch(this,n||{}),fn.call(this),this.P=!1,this.s&&wr()&&(this.i=Sc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new zc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=Yc(r.b)-_()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){eh(i,t.c)},this.$=null,this.O=new Hc(this,n),jr(this,"multiFactor",this.O)}function th(t,e){t.aa&&nn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&Ze(e,"languageCodeChanged",t.za)}function eh(t,e){t.W=e,Gs(t.a,Fl.SDK_VERSION?gr(Fl.SDK_VERSION,t.W):null)}function nh(t,e){t.$&&nn(t.$,"frameworkChanged",t.ya),(t.$=e)&&Ze(e,"frameworkChanged",t.ya)}function rh(e){try{return Fl.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ih(t){t.D||t.B.b||(t.B.start(),nn(t,"tokenChanged",t.Z),Ze(t,"tokenChanged",t.Z))}function oh(t){nn(t,"tokenChanged",t.Z),t.B.stop()}function sh(t,e){t.xa=e,jr(t,"_lat",e)}function ah(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Te(e).then(function(){return t})}function uh(t){t.i&&!t.P&&(t.P=!0,yc(t.i,t))}function ch(t,e){Vr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Jc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function hh(){}function lh(t){return _e().then(function(){if(t.D)throw new w("app-deleted")})}function fh(t){return V(t.providerData,function(t){return t.providerId})}function ph(t,e){e&&(dh(t,e.providerId),t.providerData.push(e))}function dh(t,e){K(t.providerData,function(t){return t.providerId==e})}function vh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function yh(e,t){var n,r,i;e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?jr(e,"metadata",new Jc((i=t.metadata).a,i.b)):jr(e,"metadata",new Jc),U(t.providerData,function(t){ph(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,jr(e,"refreshToken",e.b.a),Gc(e.O,t.O.b))}function gh(r){return r.I().then(function(t){var e,n=r.isAnonymous;return Ba((e=r).a,ba,{idToken:t}).then(m(e.Ic,e)).then(function(){return n||vh(r,"isAnonymous",!1),t})})}function mh(t,e){e[Vs]&&t.xa!=e[Vs]&&(Xc(t.b,e),t.dispatchEvent(new Kc("tokenChanged")),sh(t,e[Vs]),vh(t,"refreshToken",t.b.a))}function bh(t,e){return gh(t).then(function(){if(B(fh(t),e))return ah(t).then(function(){throw new w("provider-already-linked")})})}function _h(t,e,n){return qr({user:t,credential:Co(e),additionalUserInfo:e=Ui(e),operationType:n})}function wh(t,e){return mh(t,e),t.reload().then(function(){return t})}function Eh(n,r,t,e,i){if(!wr())return we(new w("operation-not-supported-in-this-environment"));if(n.h&&!i)return we(n.h);var o=Fi(t.providerId),s=Ar(n.uid+":::"),a=null;(!Ir()||cr())&&n.s&&t.isOAuthProvider&&(a=ru(n.s,n.l,n.m,r,t,null,s,Fl.SDK_VERSION||null,null,null,n.tenantId));var u=ir(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Ih(n),!i)return n.I().then(function(){})}).then(function(){return _c(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.la(r,null,new w("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Tc(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?qr(t):null}).o(function(t){throw u&&rr(u),t}),Sh(n,e,i)}function Th(e,t,n,r,i){if(!wr())return we(new w("operation-not-supported-in-this-environment"));if(e.h&&!i)return we(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(Ih(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,ah(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Ah,e.v(),t.a)),t}).then(function(){return Ec(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return kh(e.ga);throw o}).then(function(){if(o)throw o}),Sh(e,r,i)}function Ih(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function Sh(n,t,e){var r,i,o=(i=t,(r=n).h&&!e?(i.cancel(),we(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Kc("userInvalidated")),r.h=t),t}));return n.N.push(o),o.ma(function(){W(n.N,o)}),o.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Vc(t.v(),rh(n),m(n.hc,n))),e||t})}function Nh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Vs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new Zc(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&ph(r,qr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Ch(t){this.a=t,this.b=Uu()}Mc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Fc],delete e[Uc],lt(e,t),n.g(e)})},e(jc,w),qc.prototype.ob=function(t,e,n){return e.type==Yi?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:Io(o.a)}),Ba(s,ga,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:Io(r.a)}),Ba(i,ma,t)}));var r,i,o,s,a},e(Bc,qc),e(Wc,Bc),e(Kc,qe),(t=Hc.prototype).wc=function(t){var e,n;Gc(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Kr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Qi(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return mh(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ba(e,qa,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Gc(n,e),mh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},zc.prototype.start=function(){this.a=this.c,function e(n,t){var r,i;n.stop(),n.b=gn((r=n,(i=t)?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then(function(){return e=l.document,n=null,Pr()||!e?_e():new pe(function(t){n=function(){Pr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},zc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Qc.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Yc(this)}},Qc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new w("user-token-expired")):t||!this.b||_()>Yc(this)-3e4?this.a?(n={grant_type:"refresh_token",refresh_token:(e=this).a},r=e.c,i=n,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?zs(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ka(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new w("internal-error"))}).then(function(t){return e.b=Pi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):_e(null):_e({accessToken:this.b.toString(),refreshToken:this.a});var e,n,r,i},Jc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(Zc,fn),Zc.prototype.va=function(t){this.oa=t,Hs(this.a,t)},Zc.prototype.ja=function(){return this.oa},Zc.prototype.Ea=function(){return G(this.W)},Zc.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},jr(Zc.prototype,"providerId","firebase"),(t=Zc.prototype).reload=function(){var t=this;return Sh(this,lh(this).then(function(){return gh(t).then(function(){return ah(t)}).then(hh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Lc(t)})},t.I=function(t){var e=this;return Sh(this,lh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.xa&&(sh(e,t.accessToken),e.dispatchEvent(new Kc("tokenChanged"))),vh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");ch(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=(r=(r=t).providerUserInfo)&&r.length?V(r,function(t){return new $c(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)ph(this,e[n]);var r;vh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Kc("userReloaded",{ed:t}))},t.Jc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Sh(this,t.c(this.a,this.uid).then(function(t){return mh(e,t),n=_h(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Sh(this,bh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=_h(n,t,"link"),wh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Sh(this,bh(this,"phone").then(function(){return xc(rh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Sh(this,_e().then(function(){return xc(rh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Sh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return mh(n,t),n.reload()}))},t.cd=function(e){var n=this;return Sh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return mh(n,t),n.reload()}))},t.yb=function(e){var n=this;return Sh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return mh(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return lh(this);var n=this;return Sh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return mh(n,t),vh(n,"displayName",t.displayName||null),vh(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",n.displayName),jr(t,"photoURL",n.photoURL))}),ah(n)}).then(hh))},t.ad=function(e){var n=this;return Sh(this,gh(this).then(function(t){return B(fh(n),e)?Ba(n.a,da,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(fh(n),function(t){e[t]||dh(n,t)}),e[So.PROVIDER_ID]||jr(n,"phoneNumber",null),ah(n)}):ah(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return Sh(this,this.I().then(function(t){return Ba(e.a,pa,{idToken:t})}).then(function(){e.dispatchEvent(new Kc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");th(e,null),nh(e,null),e.N=[],e.D=!0,oh(e),jr(e,"refreshToken",null),e.i&&gc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Eh(this,"linkViaPopup",t,function(){return bh(e,t.providerId).then(function(){return ah(e)})},!1)},t.Lc=function(t){return Eh(this,"reauthViaPopup",t,function(){return _e()},!0)},t.Dc=function(t){var e=this;return Th(this,"linkViaRedirect",t,function(){return bh(e,t.providerId)},!1)},t.Mc=function(t){return Th(this,"reauthViaRedirect",t,function(){return _e()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return sa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=_h(i,t,"link"),wh(i,t)}).then(function(){return o}),Sh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Sh(this,_e().then(function(){return $i(aa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=_h(i,t,"reauthenticate"),mh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Sh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:ki(new bi(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Sh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:ki(new bi(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Sh(this,t=$i(_e(t),n.uid).then(function(t){return e=_h(n,t,"reauthenticate"),mh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Ah={name:"redirectUser",F:"session"};function kh(t){return qu(t.b,Ah,t.a)}function Rh(t){var e,n,r,i,o,s,a,u,c;this.a=t,this.b=Uu(),this.c=null,this.f=(n=Dh("local"),r=Dh("session"),i=Dh("none"),o=(e=this).b,s=n,a=e.a,u=Vu(s,a),c=ju(o,s.F),o.get(s,a).then(function(t){var e=null;try{e=Cr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(s,e,a);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)}).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Ph,e.a).then(function(t){return t?Dh(t):n})})})}).then(function(t){return e.c=t,Oh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Dh("local"),this.a,m(this.g,this))}function Oh(t,e){var n,a,r=[];for(n in Mu)Mu[n]!==e&&r.push(qu(t.b,Dh(Mu[n]),t.a));return r.push(qu(t.b,Ph,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ee(a[s],b(t,s),o);else n(i)})}Rh.prototype.g=function(){var e=this,n=Dh("local");Fh(this,function(){return _e().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Oh(e,"local").then(function(){e.c=n})})})};var Ph={name:"persistence",F:"session"};function Dh(t){return{name:"authUser",F:t}}function xh(t,e){return Fh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Lh(t){return Fh(t,function(){return qu(t.b,t.c,t.a)})}function Mh(t,e){return Fh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Nh(t||{})})})}function Fh(t,e){return t.f=t.f.then(e,e),t.f}function Uh(t){if(this.l=!1,jr(this,"settings",new Pc),jr(this,"app",t),!Hh(this).options||!Hh(this).options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s,a,u,c,h,l;t=Fl.SDK_VERSION?gr(Fl.SDK_VERSION):null,this.b=new Us(Hh(this).options&&Hh(this).options.apiKey,C(T),t),this.P=[],this.m=[],this.O=[],this.$b=Fl.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Fl.INTERNAL.createSubscribe(m(this.yc,this)),Wh(this,null),this.i=new Rh(Hh(this).options.apiKey+":"+Hh(this).name),this.B=new Ch(Hh(this).options.apiKey+":"+Hh(this).name),this.Z=Yh(this,(e=Hh(n=this).options.authDomain,c=(u=n).B,h=Hh(u).options.authDomain,l=c.b.get(Ah,c.a).then(function(t){return t&&h&&(t.authDomain=h),Nh(t||{})}).then(function(t){return(u.D=t)&&(t.ga=u.B),kh(u.B)}),r=Yh(u,l).then(function(){return Mh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return xh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Lh(n.i)})):null}).then(function(t){Wh(n,t||null)}),Yh(n,r))),this.h=Yh(this,(i=this).Z.then(function(){return Bh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){if(!i.l){i.aa=!0;var t=i.i;t.b.addListener(Dh("local"),t.a,i.oa)}})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=Hh(o=this).options.authDomain,a=Hh(o).options.apiKey,s&&wr()&&(o.Zb=o.Z.then(function(){if(!o.l){if(o.a=Sc(s,a,Hh(o).name),yc(o.a,o),Gh(o)&&uh(Gh(o)),o.D){uh(o.D);var t=o.D;t.va(o.ja()),th(t,o),eh(t=o.D,o.N),nh(t,o),o.D=null}return o.a}})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,fn.call(this),Object.defineProperty(this,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),this.$=null,Object.defineProperty(this,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),this.R=null,this.N=[]}function jh(t){qe.call(this,"languageCodeChanged"),this.g=t}function Vh(t){qe.call(this,"frameworkChanged"),this.c=t}function qh(t){return t.Zb||we(new w("auth-domain-config-required"))}function Bh(t){if(!wr())return we(new w("operation-not-supported-in-this-environment"));var e=qh(t).then(function(){return t.a.pa()}).then(function(t){return t?qr(t):null});return Yh(t,e)}function Wh(t,e){var n,r;Gh(t)&&(n=Gh(t),r=t.Ma,K(n.R,function(t){return t==r}),nn(Gh(t),"tokenChanged",t.xa),nn(Gh(t),"userDeleted",t.ya),nn(Gh(t),"userInvalidated",t.za),oh(Gh(t))),e&&(e.R.push(t.Ma),Ze(e,"tokenChanged",t.xa),Ze(e,"userDeleted",t.ya),Ze(e,"userInvalidated",t.za),0<t.s&&ih(e)),jr(t,"currentUser",e),e&&(e.va(t.ja()),th(e,t),eh(e,t.N),nh(e,t))}function Kh(n,t){var e=null,r=null;return Yh(n,t.then(function(t){return e=Co(t),r=Ui(t),s=t,(a={}).apiKey=Hh(o=n).options.apiKey,a.authDomain=Hh(o).options.authDomain,a.appName=Hh(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new Zc(t,e),n&&(i.ga=n),r&&eh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Gh(o)&&t.uid==Gh(o).uid?yh(Gh(o),t):(Wh(o,t),uh(t)),o.ca(t)}).then(function(){Qh(o)});var o,s,a},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Vc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return qr({user:Gh(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function Hh(t){return t.app}function Gh(t){return t.currentUser}function zh(t){return Gh(t)&&Gh(t)._lat||null}function Qh(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](zh(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](zh(t))}}function Yh(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function Xh(){}function Jh(){this.a={},this.b=1e12}Rh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in Mu)if(Mu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!vu()&&"none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(e),Fh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Oh(r,e)}).then(function(){if(r.c=Dh(e),n)return r.b.set(r.c,n,r.a)}):_e()})},e(Uh,fn),e(jh,qe),e(Vh,qe),(t=Uh.prototype).tb=function(t){return t=this.i.tb(t),Yh(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Hs(this.b,this.$),this.dispatchEvent(new jh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Gs(this.b,Fl.SDK_VERSION?gr(Fl.SDK_VERSION,this.N):null),this.dispatchEvent(new Vh(this.N))},t.Ea=function(){return G(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:Hh(this).options.apiKey,authDomain:Hh(this).options.authDomain,appName:Hh(this).name,currentUser:Gh(this)&&Gh(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return Kh(i,oa(i.b,o))})},t.Vc=function(e){if(!wr())return we(new w("operation-not-supported-in-this-environment"));var n=this,t=Fi(e.providerId),r=Ar(),i=null;(!Ir()||cr())&&Hh(this).options.authDomain&&e.isOAuthProvider&&(i=ru(Hh(this).options.authDomain,Hh(this).options.apiKey,Hh(this).name,"signInViaPopup",e,null,r,Fl.SDK_VERSION||null,null,null,this.S()));var o=ir(i,t&&t.ta,t&&t.sa);return Yh(this,t=qh(this).then(function(t){return _c(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new pe(function(t,e){n.la("signInViaPopup",null,new w("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Tc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?qr(t):null}).o(function(t){throw o&&rr(o),t}))},t.Wc=function(t){if(!wr())return we(new w("operation-not-supported-in-this-environment"));var e=this;return Yh(this,qh(this).then(function(){return Fh(t=e.i,function(){return t.b.set(Ph,t.c.F,t.a)});var t}).then(function(){return Ec(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Bh(this).then(function(t){return e.a&&Ac(e.a.b),t}).o(function(t){throw e.a&&Ac(e.a.b),t})},t.bd=function(t){if(!t)return we(new w("null-user"));if(this.R!=t.tenantId)return we(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=Hh(this).options.apiKey,n.authDomain=Hh(this).options.authDomain,n.appName=Hh(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Vs]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new Zc(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&eh(i,s),yh(i,r),i);return Yh(this,this.h.then(function(){if(Hh(e).options.apiKey!=t.l)return c.reload()}).then(function(){return Gh(e)&&t.uid==Gh(e).uid?(yh(Gh(e),t),e.ca(t)):(Wh(e,c),uh(c),e.ca(c))}).then(function(){Qh(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Ac(t.a.b),Gh(t)?(Wh(t,null),Lh(t.i).then(function(){Qh(t)})):_e()});return Yh(this,e)},t.Xc=function(){var r=this;return Mh(this.i,Hh(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=Gh(r)&&t){e=Gh(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return yh(Gh(r),t),Gh(r).I();(Gh(r)||t)&&(Wh(r,t),t&&(uh(t),t.ga=r.B),r.a&&yc(r.a,r),Qh(r))}})},t.ca=function(t){return xh(this.i,t)},t.jc=function(){Qh(this),this.ca(Gh(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return Kh(e,_e(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Gh(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(Gh(r))},(e=this).O.push(n),Yh(e,e.h.then(function(){!e.l&&B(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(zh(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){d(t)?t(Gh(r)):d(t.next)&&t.next(Gh(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),d(t)?t(Gh(r)):d(t.next)&&t.next(Gh(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return Gh(e)?Gh(e).I(t).then(function(t){return{accessToken:t}}):null});return Yh(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return Kh(n,Ba(n.b,Ma,{token:t}))}).then(function(t){var e=t.user;return vh(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return Kh(n,Ba(n.b,Fa,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return Kh(n,Ba(n.b,la,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return Kh(e,t.ia(e.b))})},t.Qc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=Gh(n);if(t&&t.isAnonymous){var e=qr({providerId:null,isNewUser:!1});return qr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Kh(n,n.b.vb()).then(function(t){var e=t.user;return vh(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return Gh(this)&&Gh(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Gh(this)&&ih(Gh(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&Gh(this)&&oh(Gh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Yh(this,this.h.then(function(){e.l||B(e.m,t)&&t(zh(e))}))},t.removeAuthTokenListener=function(e){K(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Dh("local"),t.a,this.oa),this.a&&(gc(this.a,this),Ac(this.a.b)),Promise.resolve()},t.fc=function(t){return Yh(this,Ba(this.b,fa,{identifier:t,continueUri:Er()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!wo(t)},t.sb=function(e,n){var r=this;return Yh(this,_e().then(function(){var t=new bi(n);if(!t.c)throw new w("argument-error",Ei+" must be true when sending sign in link to email");return ki(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return Yh(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return Yh(this,this.b.Pa(t).then(function(t){return new Xr(t)}))},t.fb=function(t){return Yh(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return Yh(this,_e().then(function(){return void 0===t||ut(t)?{}:ki(new bi(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return Yh(this,xc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return Yh(this,_e().then(function(){var t=r||tr(),e=_o(n,t);if(!(t=wo(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Ya(e)}))},Xh.prototype.render=function(){},Xh.prototype.reset=function(){},Xh.prototype.getResponse=function(){},Xh.prototype.execute=function(){};var $h=null;function Zh(t,e){return(e=tl(e))&&t.a[e]||null}function tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function el(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function nl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function rl(){}function il(){}Jh.prototype.render=function(t,e){return this.a[this.b.toString()]=new el(t,e),this.b++},Jh.prototype.reset=function(t){var e=Zh(this,t);t=tl(t),e&&t&&(e.delete(),delete this.a[t])},Jh.prototype.getResponse=function(t){return(t=Zh(this,t))?t.getResponse():null},Jh.prototype.execute=function(t){(t=Zh(this,t))&&t.execute()},el.prototype.getResponse=function(){return nl(this),this.b},el.prototype.execute=function(){nl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},el.prototype.delete=function(){nl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},jr(rl,"FACTOR_ID","phone"),il.prototype.g=function(){return _e($h=$h||new Jh)},il.prototype.c=function(){};var ol=null;function sl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var al=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ul=new Or(3e4,6e4);sl.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},ul.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){if(l.grecaptcha){o.f=i;var n=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)}else clearTimeout(r),e(new w("internal-error"));delete l[o.a]},_e(Os(_t(al,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},sl.prototype.c=function(){this.b--};var cl=null;function hl(t,e,n,r,i,o,s){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?ol=ol||new il:cl=cl||new sl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[pl])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[dl],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Us(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[ll];this.a[ll]=function(t){if(vl(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=br(u,l);"function"==typeof e&&e(t)}};var c=this.a[fl];this.a[fl]=function(){if(vl(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=br(c,l);"function"==typeof t&&t()}}}var ll="callback",fl="expired-callback",pl="sitekey",dl="size";function vl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function yl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function gl(t){if(t.D)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function ml(t,e,n){var r=!1;try{this.b=n||Fl.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Fl.SDK_VERSION?gr(Fl.SDK_VERSION,o):null,hl.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,C(T),r)}function bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=_l.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=_l[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=hl.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=yl(this,_e().then(function(){if(Er()&&!hr())return ar();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,Ba(e.s,Sa,{})}).then(function(t){e.a[pl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){gl(this);var n=this;return yl(this,this.Ga().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=ee(t);t=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!te&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ft(s.name),'"'),s.type){o.push(' type="',Ft(s.type),'"');var a={};lt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=se(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ne(o,s)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!h(o)||v(o)&&0<o.nodeType?r(o):U(ae(o)?G(o):o,r)}}(i,o,r),o}("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){gl(this);var i=this;return yl(this,this.render().then(function(e){return new pe(function(n){var t=i.g.getResponse(e);if(t)n(t);else{var r=function(t){var e;t&&(e=r,K(i.l,function(t){return t==e}),n(t))};i.l.push(r),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){gl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){gl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ee(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},e(ml,hl);var _l="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function wl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function El(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Tl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Il(t,e){return{name:t||"",J:"a function",optional:!!e,K:d}}function Sl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Nl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Cl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Al(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function kl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&d(t.Fa)}function Rl(t){return v(t)&&"string"==typeof t.uid}function Ol(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!d(t.verify))}}}function Pl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Dl(t,e){for(var n in e){var r=e[n].name;t[r]=Ml(r,t[n],e[n].j)}}function xl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){bl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Ll(t,e,n,r){t[e]=Ml(e,n,r)}function Ml(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return bl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Dl(Uh.prototype,{fb:{name:"applyActionCode",j:[wl("code")]},Pa:{name:"checkActionCode",j:[wl("code")]},jb:{name:"confirmPasswordReset",j:[wl("code"),wl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[wl("email"),wl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[wl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[wl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Pl(Tl(),Il(),"nextOrObserver"),Il("opt_error",!0),Il("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Pl(Tl(),Il(),"nextOrObserver"),Il("opt_error",!0),Il("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[wl("email"),Pl(Tl("opt_actionCodeSettings",!0),Sl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[wl("email"),Tl("actionCodeSettings")]},tb:{name:"setPersistence",j:[wl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Nl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Nl()]},Rc:{name:"signInWithCustomToken",j:[wl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[wl("email"),wl("password")]},Tc:{name:"signInWithEmailLink",j:[wl("email"),wl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[wl("phoneNumber"),Ol()]},Vc:{name:"signInWithPopup",j:[Al()]},Wc:{name:"signInWithRedirect",j:[Al()]},bd:{name:"updateCurrentUser",j:[Pl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof Zc)}},Sl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[wl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[wl("code")]}}),xl(Uh.prototype,{lc:{name:"languageCode",gb:Pl(wl(),Sl(),"languageCode")},ti:{name:"tenantId",gb:Pl(wl(),Sl(),"tenantId")}}),(Uh.Persistence=Mu).LOCAL="local",Uh.Persistence.SESSION="session",Uh.Persistence.NONE="none",Dl(Zc.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[El("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[El("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Nl()]},mb:{name:"linkWithCredential",j:[Nl()]},Bc:{name:"linkWithPhoneNumber",j:[wl("phoneNumber"),Ol()]},Cc:{name:"linkWithPopup",j:[Al()]},Dc:{name:"linkWithRedirect",j:[Al()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Nl()]},pb:{name:"reauthenticateWithCredential",j:[Nl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[wl("phoneNumber"),Ol()]},Lc:{name:"reauthenticateWithPopup",j:[Al()]},Mc:{name:"reauthenticateWithRedirect",j:[Al()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Pl(Tl("opt_actionCodeSettings",!0),Sl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[wl(null,!0)]},ad:{name:"unlink",j:[wl("provider")]},xb:{name:"updateEmail",j:[wl("email")]},yb:{name:"updatePassword",j:[wl("password")]},cd:{name:"updatePhoneNumber",j:[Nl("phone")]},zb:{name:"updateProfile",j:[Tl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[wl("email"),Pl(Tl("opt_actionCodeSettings",!0),Sl(null,!0),"opt_actionCodeSettings",!0)]}}),Dl(Jh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dl(Xh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dl(pe.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),xl(Pc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:El("appVerificationDisabledForTesting")}}),Dl(Dc.prototype,{confirm:{name:"confirm",j:[wl("verificationCode")]}}),Ll(Ji,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[io,mo,To,eo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Pl(wl(),Tl(),"json")]),Ll(bo,"credential",function(t,e){return new go(t,e)},[wl("email"),wl("password")]),Dl(go.prototype,{v:{name:"toJSON",j:[wl(null,!0)]}}),Dl(uo.prototype,{Aa:{name:"addScope",j:[wl("scope")]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(uo,"credential",co,[Pl(wl(),Tl(),"token")]),Ll(bo,"credentialWithLink",_o,[wl("email"),wl("emailLink")]),Dl(ho.prototype,{Aa:{name:"addScope",j:[wl("scope")]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(ho,"credential",lo,[Pl(wl(),Tl(),"token")]),Dl(fo.prototype,{Aa:{name:"addScope",j:[wl("scope")]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(fo,"credential",po,[Pl(wl(),Pl(Tl(),Sl()),"idToken"),Pl(wl(),Sl(),"accessToken",!0)]),Dl(vo.prototype,{Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(vo,"credential",yo,[Pl(wl(),Tl(),"token"),wl("secret",!0)]),Dl(ao.prototype,{Aa:{name:"addScope",j:[wl("scope")]},credential:{name:"credential",j:[Pl(wl(),Pl(Tl(),Sl()),"optionsOrIdToken"),Pl(wl(),Sl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Dl(no.prototype,{v:{name:"toJSON",j:[wl(null,!0)]}}),Dl(Zi.prototype,{v:{name:"toJSON",j:[wl(null,!0)]}}),Ll(So,"credential",No,[wl("verificationId"),wl("verificationCode")]),Dl(So.prototype,{cb:{name:"verifyPhoneNumber",j:[Pl(wl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?kl(t.session,Yi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?kl(t.session,Xi)&&Rl(t.multiFactorHint):t.session&&t.multiFactorUid?kl(t.session,Xi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Ol()]}}),Dl(Eo.prototype,{v:{name:"toJSON",j:[wl(null,!0)]}}),Dl(w.prototype,{toJSON:{name:"toJSON",j:[wl(null,!0)]}}),Dl(Lo.prototype,{toJSON:{name:"toJSON",j:[wl(null,!0)]}}),Dl(xo.prototype,{toJSON:{name:"toJSON",j:[wl(null,!0)]}}),Dl(jc.prototype,{toJSON:{name:"toJSON",j:[wl(null,!0)]}}),Dl(Mc.prototype,{Pc:{name:"resolveSignIn",j:[Cl()]}}),Dl(Hc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Cl(),wl("displayName",!0)]},$c:{name:"unenroll",j:[Pl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Rl},wl(),"multiFactorInfoIdentifier")]}}),Dl(ml.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ll(hi,"parseLink",mi,[wl("link")]),Ll(rl,"assertion",function(t){return new Wc(t)},[Nl("phone")]),function(){if(void 0===Fl||!Fl.INTERNAL||!Fl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:Zr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Uh,AuthCredential:Ji,Error:w};Ll(t,"EmailAuthProvider",bo,[]),Ll(t,"FacebookAuthProvider",uo,[]),Ll(t,"GithubAuthProvider",ho,[]),Ll(t,"GoogleAuthProvider",fo,[]),Ll(t,"TwitterAuthProvider",vo,[]),Ll(t,"OAuthProvider",ao,[wl("providerId")]),Ll(t,"SAMLAuthProvider",so,[wl("providerId")]),Ll(t,"PhoneAuthProvider",So,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Uh)}}]),Ll(t,"RecaptchaVerifier",ml,[Pl(wl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Tl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Fl.app.App)}}]),Ll(t,"ActionCodeURL",hi,[]),Ll(t,"PhoneMultiFactorGenerator",rl,[]),Fl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Uh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Fl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Fl.registerVersion("@firebase/auth","0.14.3-0"),Fl.INTERNAL.extendNamespace({User:Zc})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ja=(Va.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),qs(e))},Va.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Vs(e)},Va.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Va.prototype.prefixedName_=function(t){return this.prefix_+t},Va.prototype.toString=function(){return this.domStorage_.toString()},Va);function Va(t){this.domStorage_=t,this.prefix_="firebase:"}var qa=(Ba.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ba.prototype.get=function(t){return Ws(this.cache_,t)?this.cache_[t]:null},Ba.prototype.remove=function(t){delete this.cache_[t]},Ba);function Ba(){this.cache_={},this.isInMemoryStorage=!0}function Wa(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ja(e)}}catch(t){}return new qa}function Ka(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;Ts(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new zs;n.update(e);var r=n.digest();return Ss.encodeByteArray(r)}function Ha(t,e){Ts(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(iu.logLevel=pa.VERBOSE,au=iu.log.bind(iu),e&&ru.set("logging_enabled",!0)):"function"==typeof t?au=t:(au=null,ru.remove("logging_enabled"))}function Ga(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===uu&&(uu=!1,null===au&&!0===ru.get("logging_enabled")&&Ha(!0)),au){var n=su.apply(null,t);au(n)}}function za(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ga.apply(void 0,ms([n],t))}}function Qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+su.apply(void 0,ms(t));iu.error(n)}function Ya(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+su.apply(void 0,ms(t));throw iu.error(n),new Error(n)}function Xa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+su.apply(void 0,ms(t));iu.warn(n)}function Ja(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function $a(t,e){return t===e?0:t<e?-1:1}function Za(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+qs(e))}function tu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var eu,nu=Wa("localStorage"),ru=Wa("sessionStorage"),iu=new wa("@firebase/database"),ou=(eu=1,function(){return eu++}),su=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=su.apply(null,i):n+="object"==typeof i?qs(i):i,n+=" "}return n},au=null,uu=!0,cu="[MIN_NAME]",hu="[MAX_NAME]",lu=function(t,e){if(t===e)return 0;if(t===cu||e===hu)return-1;if(e===cu||t===hu)return 1;var n=mu(t),r=mu(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},fu=function(t){if("object"!=typeof t||null===t)return qs(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=qs(e[i]),r+=":",r+=fu(t[e[i]]);return r+"}"};function pu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function du(t){var e,n,r,i,o;Ts(!Ja(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;--o)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function vu(t){try{t()}catch(t){setTimeout(function(){throw Xa("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function yu(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var gu=new RegExp("^-?(0*)\\d{1,10}$"),mu=function(t){if(gu.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},bu=(Object.defineProperty(_u,"Empty",{get:function(){return new _u("")},enumerable:!0,configurable:!0}),_u.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},_u.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},_u.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new _u(this.pieces_,t)},_u.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},_u.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},_u.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},_u.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},_u.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new _u(t,0)},_u.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof _u)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new _u(e,0)},_u.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},_u.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return _u.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},_u.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=lu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},_u.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},_u.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},_u);function _u(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var wu=(Object.defineProperty(Eu,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Eu,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Eu.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=ra(t),this.checkValid_()},Eu.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=ra(t),0<this.parts_.length&&--this.byteLength_},Eu.prototype.checkValid_=function(){if(this.byteLength_>Eu.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Eu.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Eu.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Eu.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Eu.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Eu);function Eu(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ra(this.parts_[n]);this.checkValid_()}var Tu="firebaseio.com",Iu="websocket",Su="long_polling",Nu=(Cu.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Cu.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Cu.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Cu.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Cu.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&nu.set("host:"+this.host,this.internalHost))},Cu.prototype.connectionURL=function(t,e){var n;if(Ts("string"==typeof t,"typeof type must == string"),Ts("object"==typeof e,"typeof params must == object"),t===Iu)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Su)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return pu(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Cu.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Cu.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Cu);function Cu(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=nu.get("host:"+t)||this.host}function Au(t){var e=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=ys(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Xa("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}}(t),n=e.namespace;"firebase"===e.domain&&Ya(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Ya("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new Nu(e.host,e.secure,n,r,"",n!==e.subdomain),path:new bu(e.pathString)}}function ku(t){return"string"==typeof t&&0!==t.length&&!Vu.test(t)}function Ru(t){return"string"==typeof t&&0!==t.length&&!qu.test(t)}function Ou(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ja(t)||t&&"object"==typeof t&&Ws(t,".sv")}function Pu(t,e,n,r,i){i&&void 0===n||Wu(ta(t,e,i),n,r)}function Du(t,e,n,r,i){if(!i||void 0!==n){var o=ta(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];pu(n,function(t,e){var n=new bu(t);if(Wu(o,e,r.child(n)),".priority"===n.getBack()&&!Ou(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ku(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(bu.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function xu(t,e,n,r){if(!r||void 0!==n){if(Ja(n))throw new Error(ta(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ou(n))throw new Error(ta(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Lu(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ta(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Mu(t,e,n,r){if(!(r&&void 0===n||ku(n)))throw new Error(ta(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Fu(t,e,n,r){if(!(r&&void 0===n||Ru(n)))throw new Error(ta(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Uu(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function ju(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ku(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!Ru(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(ta(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Vu=/[\[\].#$\/\u0000-\u001F\u007F]/,qu=/[\[\].#$\u0000-\u001F\u007F]/,Bu=10485760,Wu=function(n,t,e){var r=e instanceof bu?new wu(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Ja(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Bu/3&&ra(t)>Bu)throw new Error(n+"contains a string greater than "+Bu+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(pu(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ku(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Wu(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Ku=(Hu.prototype.cancel=function(t){Zs("OnDisconnect.cancel",0,1,arguments.length),ea("OnDisconnect.cancel",1,t,!0);var e=new As;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Hu.prototype.remove=function(t){Zs("OnDisconnect.remove",0,1,arguments.length),Uu("OnDisconnect.remove",this.path_),ea("OnDisconnect.remove",1,t,!0);var e=new As;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Hu.prototype.set=function(t,e){Zs("OnDisconnect.set",1,2,arguments.length),Uu("OnDisconnect.set",this.path_),Pu("OnDisconnect.set",1,t,this.path_,!1),ea("OnDisconnect.set",2,e,!0);var n=new As;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Hu.prototype.setWithPriority=function(t,e,n){Zs("OnDisconnect.setWithPriority",2,3,arguments.length),Uu("OnDisconnect.setWithPriority",this.path_),Pu("OnDisconnect.setWithPriority",1,t,this.path_,!1),xu("OnDisconnect.setWithPriority",2,e,!1),ea("OnDisconnect.setWithPriority",3,n,!0);var r=new As;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Hu.prototype.update=function(t,e){if(Zs("OnDisconnect.update",1,2,arguments.length),Uu("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Xa("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Du("OnDisconnect.update",1,t,this.path_,!1),ea("OnDisconnect.update",2,e,!0);var i=new As;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Hu);function Hu(t,e){this.repo_=t,this.path_=e}var Gu=(zu.prototype.toJSON=function(){return Zs("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},zu);function zu(t,e){this.committed=t,this.snapshot=e}var Qu,Yu,Xu,Ju=(Qu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yu=0,Xu=[],function(t){var e,n=t===Yu;Yu=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=Qu.charAt(t%64),t=Math.floor(t/64);Ts(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===Xu[e];e--)Xu[e]=0;Xu[e]++}else for(e=0;e<12;e++)Xu[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Qu.charAt(Xu[e]);return Ts(20===i.length,"nextPushId: Length should be 20."),i}),$u=(Zu.Wrap=function(t,e){return new Zu(t,e)},Zu);function Zu(t,e){this.name=t,this.node=e}var tc,ec=(nc.prototype.getCompare=function(){return this.compare.bind(this)},nc.prototype.indexedValueChanged=function(t,e){var n=new $u(cu,t),r=new $u(cu,e);return 0!==this.compare(n,r)},nc.prototype.minPost=function(){return $u.MIN},nc);function nc(){}var rc,ic=(fs(oc,rc=ec),Object.defineProperty(oc,"__EMPTY_NODE",{get:function(){return tc},set:function(t){tc=t},enumerable:!0,configurable:!0}),oc.prototype.compare=function(t,e){return lu(t.name,e.name)},oc.prototype.isDefinedOn=function(t){throw Is("KeyIndex.isDefinedOn not expected to be called.")},oc.prototype.indexedValueChanged=function(t,e){return!1},oc.prototype.minPost=function(){return $u.MIN},oc.prototype.maxPost=function(){return new $u(hu,tc)},oc.prototype.makePost=function(t,e){return Ts("string"==typeof t,"KeyIndex indexValue must always be a string."),new $u(t,tc)},oc.prototype.toString=function(){return".key"},oc);function oc(){return null!==rc&&rc.apply(this,arguments)||this}var sc,ac=new ic;function uc(t){return"number"==typeof t?"number:"+du(t):"string:"+t}function cc(t){if(t.isLeafNode()){var e=t.val();Ts("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ws(e,".sv"),"Priority must be a string or number.")}else Ts(t===sc||t.isEmpty(),"priority of unexpected type.");Ts(t===sc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var hc,lc,fc,pc,dc=(Object.defineProperty(vc,"__childrenNodeConstructor",{get:function(){return hc},set:function(t){hc=t},enumerable:!0,configurable:!0}),vc.prototype.isLeafNode=function(){return!0},vc.prototype.getPriority=function(){return this.priorityNode_},vc.prototype.updatePriority=function(t){return new vc(this.value_,t)},vc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:vc.__childrenNodeConstructor.EMPTY_NODE},vc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:vc.__childrenNodeConstructor.EMPTY_NODE},vc.prototype.hasChild=function(){return!1},vc.prototype.getPredecessorChildName=function(t,e){return null},vc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:vc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},vc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ts(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,vc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},vc.prototype.isEmpty=function(){return!1},vc.prototype.numChildren=function(){return 0},vc.prototype.forEachChild=function(t,e){return!1},vc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},vc.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+uc(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?du(this.value_):this.value_,this.lazyHash_=Ka(t)}return this.lazyHash_},vc.prototype.getValue=function(){return this.value_},vc.prototype.compareTo=function(t){return t===vc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof vc.__childrenNodeConstructor?-1:(Ts(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},vc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=vc.VALUE_TYPE_ORDER.indexOf(e),i=vc.VALUE_TYPE_ORDER.indexOf(n);return Ts(0<=r,"Unknown leaf type: "+e),Ts(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},vc.prototype.withIndex=function(){return this},vc.prototype.isIndexed=function(){return!0},vc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},vc.VALUE_TYPE_ORDER=["object","boolean","number","string"],vc);function vc(t,e){void 0===e&&(e=vc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ts(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),cc(this.priorityNode_)}function yc(){return null!==pc&&pc.apply(this,arguments)||this}var gc=(fs(yc,pc=ec),yc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?lu(t.name,e.name):i},yc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},yc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},yc.prototype.minPost=function(){return $u.MIN},yc.prototype.maxPost=function(){return new $u(hu,new dc("[PRIORITY-POST]",fc))},yc.prototype.makePost=function(t,e){var n=lc(t);return new $u(e,new dc("[PRIORITY-POST]",n))},yc.prototype.toString=function(){return".priority"},new yc),mc=(bc.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},bc.prototype.hasNext=function(){return 0<this.nodeStack_.length},bc.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},bc);function bc(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var _c=(wc.prototype.copy=function(t,e,n,r,i){return new wc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},wc.prototype.count=function(){return this.left.count()+1+this.right.count()},wc.prototype.isEmpty=function(){return!1},wc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},wc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},wc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},wc.prototype.minKey=function(){return this.min_().key},wc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},wc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},wc.prototype.removeMin_=function(){if(this.left.isEmpty())return Ic.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},wc.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ic.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},wc.prototype.isRed_=function(){return this.color},wc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},wc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},wc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},wc.prototype.rotateLeft_=function(){var t=this.copy(null,null,wc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},wc.prototype.rotateRight_=function(){var t=this.copy(null,null,wc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},wc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},wc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},wc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},wc.RED=!0,wc.BLACK=!1,wc);function wc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:wc.RED,this.left=null!=r?r:Ic.EMPTY_NODE,this.right=null!=i?i:Ic.EMPTY_NODE}var Ec=(Tc.prototype.copy=function(t,e,n,r,i){return this},Tc.prototype.insert=function(t,e,n){return new _c(t,e,null)},Tc.prototype.remove=function(t,e){return this},Tc.prototype.count=function(){return 0},Tc.prototype.isEmpty=function(){return!0},Tc.prototype.inorderTraversal=function(t){return!1},Tc.prototype.reverseTraversal=function(t){return!1},Tc.prototype.minKey=function(){return null},Tc.prototype.maxKey=function(){return null},Tc.prototype.check_=function(){return 0},Tc.prototype.isRed_=function(){return!1},Tc);function Tc(){}var Ic=(Sc.prototype.insert=function(t,e){return new Sc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,_c.BLACK,null,null))},Sc.prototype.remove=function(t){return new Sc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,_c.BLACK,null,null))},Sc.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Sc.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Sc.prototype.isEmpty=function(){return this.root_.isEmpty()},Sc.prototype.count=function(){return this.root_.count()},Sc.prototype.minKey=function(){return this.root_.minKey()},Sc.prototype.maxKey=function(){return this.root_.maxKey()},Sc.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Sc.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Sc.prototype.getIterator=function(t){return new mc(this.root_,null,this.comparator_,!1,t)},Sc.prototype.getIteratorFrom=function(t,e){return new mc(this.root_,t,this.comparator_,!1,e)},Sc.prototype.getReverseIteratorFrom=function(t,e){return new mc(this.root_,t,this.comparator_,!0,e)},Sc.prototype.getReverseIterator=function(t){return new mc(this.root_,null,this.comparator_,!0,t)},Sc.EMPTY_NODE=new Ec,Sc);function Sc(t,e){void 0===e&&(e=Sc.EMPTY_NODE),this.comparator_=t,this.root_=e}var Nc=Math.log(2),Cc=(Ac.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Ac);function Ac(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Nc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var kc,Rc,Oc=function(c,t,h,e){c.sort(t);var l=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=h?h(n):n,new _c(r,n.node,_c.BLACK,null,null);var o=parseInt(i/2,10)+t,s=l(t,o),a=l(o+1,e);return n=c[o],r=h?h(n):n,new _c(r,n.node,_c.BLACK,s,a)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new _c(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,_c.BLACK):(r(s,_c.BLACK),r(s,_c.RED))}return n}(new Cc(c.length));return new Ic(e||t,n)},Pc={},Dc=(Object.defineProperty(xc,"Default",{get:function(){return Ts(gc,"ChildrenNode.ts has not been loaded"),kc=kc||new xc({".priority":Pc},{".priority":gc})},enumerable:!0,configurable:!0}),xc.prototype.get=function(t){var e=Ks(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ic?e:null},xc.prototype.hasIndex=function(t){return Ws(this.indexSet_,t.toString())},xc.prototype.addIndex=function(t,e){Ts(t!==ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator($u.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Oc(r,t.getCompare()):Pc;var a=t.toString(),u=ps({},this.indexSet_);u[a]=t;var c=ps({},this.indexes_);return c[a]=n,new xc(c,u)},xc.prototype.addToIndexes=function(u,c){var h=this;return new xc(Gs(this.indexes_,function(t,e){var n=Ks(h.indexSet_,e);if(Ts(n,"Missing index implementation for "+e),t===Pc){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator($u.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Oc(r,n.getCompare())}return Pc}var s=c.get(u.name),a=t;return s&&(a=a.remove(new $u(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},xc.prototype.removeFromIndexes=function(n,r){return new xc(Gs(this.indexes_,function(t){if(t===Pc)return t;var e=r.get(n.name);return e?t.remove(new $u(n.name,e)):t}),this.indexSet_)},xc);function xc(t,e){this.indexes_=t,this.indexSet_=e}function Lc(t,e){return lu(t.name,e.name)}function Mc(t,e){return lu(t,e)}var Fc,Uc=(Object.defineProperty(jc,"EMPTY_NODE",{get:function(){return Rc=Rc||new jc(new Ic(Mc),null,Dc.Default)},enumerable:!0,configurable:!0}),jc.prototype.isLeafNode=function(){return!1},jc.prototype.getPriority=function(){return this.priorityNode_||Rc},jc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new jc(this.children_,t,this.indexMap_)},jc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Rc:e},jc.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},jc.prototype.hasChild=function(t){return null!==this.children_.get(t)},jc.prototype.updateImmediateChild=function(t,e){if(Ts(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n,r=new $u(t,e),i=void 0;n=e.isEmpty()?(i=this.children_.remove(t),this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,e),this.indexMap_.addToIndexes(r,this.children_));var o=i.isEmpty()?Rc:this.priorityNode_;return new jc(i,o,n)},jc.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ts(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},jc.prototype.isEmpty=function(){return this.children_.isEmpty()},jc.prototype.numChildren=function(){return this.children_.count()},jc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(gc,function(t,e){r[t]=e.val(n),i++,s&&jc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},jc.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+uc(this.getPriority().val())+":"),this.forEachChild(gc,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":Ka(r)}return this.lazyHash_},jc.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new $u(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},jc.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},jc.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new $u(e,this.children_.get(e)):null},jc.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},jc.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new $u(e,this.children_.get(e)):null},jc.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},jc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},jc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,$u.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},jc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},jc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,$u.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},jc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qc?-1:0},jc.prototype.withIndex=function(t){if(t===ac||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new jc(this.children_,this.priorityNode_,e)},jc.prototype.isIndexed=function(t){return t===ac||this.indexMap_.hasIndex(t)},jc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(gc),r=e.getIterator(gc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},jc.prototype.resolveIndex_=function(t){return t===ac?null:this.indexMap_.get(t.toString())},jc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,jc);function jc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&cc(this.priorityNode_),this.children_.isEmpty()&&Ts(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Vc(){return Fc.call(this,new Ic(Mc),Uc.EMPTY_NODE,Dc.Default)||this}var qc=(fs(Vc,Fc=Uc),Vc.prototype.compareTo=function(t){return t===this?0:1},Vc.prototype.equals=function(t){return t===this},Vc.prototype.getPriority=function(){return this},Vc.prototype.getImmediateChild=function(t){return Uc.EMPTY_NODE},Vc.prototype.isEmpty=function(){return!1},new Vc);Object.defineProperties($u,{MIN:{value:new $u(cu,Uc.EMPTY_NODE)},MAX:{value:new $u(hu,qc)}}),ic.__EMPTY_NODE=Uc.EMPTY_NODE,dc.__childrenNodeConstructor=Uc,fc=sc=qc;var Bc,Wc=!0;function Kc(r,t){if(void 0===t&&(t=null),null===r)return Uc.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),Ts(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new dc(r,Kc(t));if(r instanceof Array||!Wc){var i=Uc.EMPTY_NODE;return pu(r,function(t,e){if(Ws(r,t)&&"."!==t.substring(0,1)){var n=Kc(e);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n))}}),i.updatePriority(Kc(t))}var o=[],s=!1;if(pu(r,function(t,e){if("."!==t.substring(0,1)){var n=Kc(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new $u(t,n)))}}),0===o.length)return Uc.EMPTY_NODE;var e=Oc(o,Lc,function(t){return t.name},Mc);if(s){var n=Oc(o,gc.getCompare());return new Uc(e,Kc(t),new Dc({".priority":n},{".priority":gc}))}return new Uc(e,Kc(t),Dc.Default)}function Hc(){return null!==Bc&&Bc.apply(this,arguments)||this}lc=Kc;var Gc,zc=(fs(Hc,Bc=ec),Hc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?lu(t.name,e.name):n},Hc.prototype.isDefinedOn=function(t){return!0},Hc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Hc.prototype.minPost=function(){return $u.MIN},Hc.prototype.maxPost=function(){return $u.MAX},Hc.prototype.makePost=function(t,e){var n=Kc(t);return new $u(e,n)},Hc.prototype.toString=function(){return".value"},new Hc),Qc=(fs(Yc,Gc=ec),Yc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Yc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Yc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?lu(t.name,e.name):i},Yc.prototype.makePost=function(t,e){var n=Kc(t),r=Uc.EMPTY_NODE.updateChild(this.indexPath_,n);return new $u(e,r)},Yc.prototype.maxPost=function(){var t=Uc.EMPTY_NODE.updateChild(this.indexPath_,qc);return new $u(hu,t)},Yc.prototype.toString=function(){return this.indexPath_.slice().join("/")},Yc);function Yc(t){var e=Gc.call(this)||this;return e.indexPath_=t,Ts(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Xc=(Jc.prototype.val=function(){return Zs("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Jc.prototype.exportVal=function(){return Zs("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Jc.prototype.toJSON=function(){return Zs("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Jc.prototype.exists=function(){return Zs("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Jc.prototype.child=function(t){Zs("DataSnapshot.child",0,1,arguments.length),Fu("DataSnapshot.child",1,t=String(t),!1);var e=new bu(t),n=this.ref_.child(e);return new Jc(this.node_.getChild(e),n,gc)},Jc.prototype.hasChild=function(t){Zs("DataSnapshot.hasChild",1,1,arguments.length),Fu("DataSnapshot.hasChild",1,t,!1);var e=new bu(t);return!this.node_.getChild(e).isEmpty()},Jc.prototype.getPriority=function(){return Zs("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Jc.prototype.forEach=function(n){var r=this;return Zs("DataSnapshot.forEach",1,1,arguments.length),ea("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Jc(e,r.ref_.child(t),gc))})},Jc.prototype.hasChildren=function(){return Zs("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Jc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),Jc.prototype.numChildren=function(){return Zs("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Jc.prototype.getRef=function(){return Zs("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Jc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Jc);function Jc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var $c=(Zc.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Zc.prototype.getEventType=function(){return this.eventType},Zc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Zc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+qs(this.snapshot.exportVal())},Zc);function Zc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var th=(eh.prototype.getPath=function(){return this.path},eh.prototype.getEventType=function(){return"cancel"},eh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},eh.prototype.toString=function(){return this.path.toString()+":cancel"},eh);function eh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var nh=(rh.prototype.respondsTo=function(t){return"value"===t},rh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new $c("value",this,new Xc(t.snapshotNode,e.getRef(),n))},rh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ts(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},rh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new th(this,t,e):null},rh.prototype.matches=function(t){return t instanceof rh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},rh.prototype.hasAnyCallback=function(){return null!==this.callback_},rh);function rh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var ih,oh=(sh.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Ws(this.callbacks_,e)},sh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new th(this,t,e):null},sh.prototype.createEvent=function(t,e){Ts(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new $c(t.type,this,new Xc(t.snapshotNode,n,r),t.prevName)},sh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ts(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},sh.prototype.matches=function(e){var n=this;if(e instanceof sh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},sh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},sh);function sh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var ah=(Object.defineProperty(uh,"__referenceConstructor",{get:function(){return Ts(ih,"Reference.ts has not been loaded"),ih},set:function(t){ih=t},enumerable:!0,configurable:!0}),uh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ac){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==cu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==hu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===gc){if(null!=e&&!Ou(e)||null!=n&&!Ou(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ts(t.getIndex()instanceof Qc||t.getIndex()===zc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},uh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},uh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},uh.prototype.getQueryParams=function(){return this.queryParams_},uh.prototype.getRef=function(){return Zs("Query.ref",0,0,arguments.length),new uh.__referenceConstructor(this.repo,this.path)},uh.prototype.on=function(t,e,n,r){Zs("Query.on",2,4,arguments.length),Lu("Query.on",1,t,!1),ea("Query.on",2,e,!1);var i=uh.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},uh.prototype.onValueEvent=function(t,e,n){var r=new nh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},uh.prototype.onChildEvent=function(t,e,n){var r=new oh(t,e,n);this.repo.addEventCallbackForQuery(this,r)},uh.prototype.off=function(t,e,n){Zs("Query.off",0,3,arguments.length),Lu("Query.off",1,t,!0),ea("Query.off",2,e,!0),na("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new nh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new oh(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},uh.prototype.once=function(e,n,t,r){var i=this;Zs("Query.once",1,4,arguments.length),Lu("Query.once",1,e,!1),ea("Query.once",2,n,!0);var o=uh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new As;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},uh.prototype.limitToFirst=function(t){if(Zs("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new uh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},uh.prototype.limitToLast=function(t){if(Zs("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new uh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},uh.prototype.orderByChild=function(t){if(Zs("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Fu("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new bu(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new Qc(e),r=this.queryParams_.orderBy(n);return uh.validateQueryEndpoints_(r),new uh(this.repo,this.path,r,!0)},uh.prototype.orderByKey=function(){Zs("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(ac);return uh.validateQueryEndpoints_(t),new uh(this.repo,this.path,t,!0)},uh.prototype.orderByPriority=function(){Zs("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(gc);return uh.validateQueryEndpoints_(t),new uh(this.repo,this.path,t,!0)},uh.prototype.orderByValue=function(){Zs("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(zc);return uh.validateQueryEndpoints_(t),new uh(this.repo,this.path,t,!0)},uh.prototype.startAt=function(t,e){void 0===t&&(t=null),Zs("Query.startAt",0,2,arguments.length),Pu("Query.startAt",1,t,this.path,!0),Mu("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(uh.validateLimit_(n),uh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new uh(this.repo,this.path,n,this.orderByCalled_)},uh.prototype.endAt=function(t,e){void 0===t&&(t=null),Zs("Query.endAt",0,2,arguments.length),Pu("Query.endAt",1,t,this.path,!0),Mu("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(uh.validateLimit_(n),uh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new uh(this.repo,this.path,n,this.orderByCalled_)},uh.prototype.equalTo=function(t,e){if(Zs("Query.equalTo",1,2,arguments.length),Pu("Query.equalTo",1,t,this.path,!1),Mu("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},uh.prototype.toString=function(){return Zs("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},uh.prototype.toJSON=function(){return Zs("Query.toJSON",0,1,arguments.length),this.toString()},uh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},uh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=fu(t);return"{}"===e?"default":e},uh.prototype.isEqual=function(t){if(Zs("Query.isEqual",1,1,arguments.length),!(t instanceof uh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},uh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ea(t,3,r.cancel,!0),r.context=n,na(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ta(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(uh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),uh);function uh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var ch=(hh.prototype.getImmediateChild=function(t){return new hh(this.node_.getImmediateChild(t))},hh.prototype.node=function(){return this.node_},hh);function hh(t){this.node_=t}var lh=(fh.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new fh(this.syncTree_,e)},fh.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},fh);function fh(t,e){this.syncTree_=t,this.path_=e}function ph(t,e,n,r){return mh(e,new lh(n,t),r)}function dh(t,e,n){return mh(t,new ch(e),n)}var vh=function(t,e,n){return t&&"object"==typeof t?(Ts(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?yh(t[".sv"],e,n):"object"==typeof t[".sv"]?gh(t[".sv"],e):void Ts(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},yh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ts(!1,"Unexpected server value: "+t)}},gh=function(t,e,n){t.hasOwnProperty("increment")||Ts(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Ts(!1,"Unexpected increment value: "+r);var i=e.node();if(Ts(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function mh(t,r,i){var o,e=t.getPriority().val(),n=vh(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var s=t,a=vh(s.getValue(),r,i);return a!==s.getValue()||n!==s.getPriority().val()?new dc(a,Kc(n)):t}var u=t;return n!==(o=u).getPriority().val()&&(o=o.updatePriority(new dc(n))),u.forEachChild(gc,function(t,e){var n=mh(e,r.getImmediateChild(t),i);n!==e&&(o=o.updateImmediateChild(t,n))}),o}var bh,_h,wh=(Eh.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Eh.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new Eh);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},Eh.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(gc,function(t,e){n.remember(new bu(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Eh.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new bu(r.toString()+"/"+t);e.forEachTree(n,i)})},Eh.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Eh);function Eh(){this.value=null,this.children=new Map}(_h=bh=bh||{})[_h.OVERWRITE=0]="OVERWRITE",_h[_h.MERGE=1]="MERGE",_h[_h.ACK_USER_WRITE=2]="ACK_USER_WRITE",_h[_h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Th=(Ih.User=new Ih(!0,!1,null,!1),Ih.Server=new Ih(!1,!0,null,!1),Ih.forServerTaggedQuery=function(t){return new Ih(!1,!0,t,!0)},Ih);function Ih(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ts(!r||e,"Tagged queries must be from server.")}var Sh,Nh=(Ch.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ts(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new bu(t));return new Ch(bu.Empty,e,this.revert)}return Ts(this.path.getFront()===t,"operationForChild called for unrelated child."),new Ch(this.path.popFront(),this.affectedTree,this.revert)},Ch);function Ch(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=bh.ACK_USER_WRITE,this.source=Th.User}var Ah=(kh.fromObject=function(t){var n=kh.Empty;return pu(t,function(t,e){n=n.set(new bu(t),e)}),n},kh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},kh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:bu.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new bu(n).child(i.path),value:i.value}},kh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},kh.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):kh.Empty},kh.prototype.set=function(t,e){if(t.isEmpty())return new kh(e,this.children);var n=t.getFront(),r=(this.children.get(n)||kh.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new kh(this.value,i)},kh.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?kh.Empty:new kh(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?kh.Empty:new kh(this.value,i)}return this},kh.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},kh.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n,r=t.getFront(),i=(this.children.get(r)||kh.Empty).setTree(t.popFront(),e);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new kh(this.value,n)},kh.prototype.fold=function(t){return this.fold_(bu.Empty,t)},kh.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},kh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,bu.Empty,e)},kh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},kh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,bu.Empty,e)},kh.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):kh.Empty},kh.prototype.foreach=function(t){this.foreach_(bu.Empty,t)},kh.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},kh.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},kh.Empty=new kh(null),kh);function kh(t,e){void 0===e&&(e=Sh=Sh||new Ic($a)),this.value=t,this.children=e}var Rh=(Oh.prototype.operationForChild=function(t){return this.path.isEmpty()?new Oh(this.source,bu.Empty):new Oh(this.source,this.path.popFront())},Oh);function Oh(t,e){this.source=t,this.path=e,this.type=bh.LISTEN_COMPLETE}var Ph=(Dh.prototype.operationForChild=function(t){return this.path.isEmpty()?new Dh(this.source,bu.Empty,this.snap.getImmediateChild(t)):new Dh(this.source,this.path.popFront(),this.snap)},Dh);function Dh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=bh.OVERWRITE}var xh=(Lh.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new bu(t));return e.isEmpty()?null:e.value?new Ph(this.source,bu.Empty,e.value):new Lh(this.source,bu.Empty,e)}return Ts(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Lh(this.source,this.path.popFront(),this.children)},Lh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Lh);function Lh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=bh.MERGE}var Mh=(Fh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Fh.prototype.isFiltered=function(){return this.filtered_},Fh.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Fh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Fh.prototype.getNode=function(){return this.node_},Fh);function Fh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Uh=(jh.prototype.updateEventSnap=function(t,e,n){return new jh(new Mh(t,e,n),this.serverCache_)},jh.prototype.updateServerSnap=function(t,e,n){return new jh(this.eventCache_,new Mh(t,e,n))},jh.prototype.getEventCache=function(){return this.eventCache_},jh.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},jh.prototype.getServerCache=function(){return this.serverCache_},jh.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},jh.Empty=new jh(new Mh(Uc.EMPTY_NODE,!1,!1),new Mh(Uc.EMPTY_NODE,!1,!1)),jh);function jh(t,e){this.eventCache_=t,this.serverCache_=e}var Vh=(qh.valueChange=function(t){return new qh(qh.VALUE,t)},qh.childAddedChange=function(t,e){return new qh(qh.CHILD_ADDED,e,t)},qh.childRemovedChange=function(t,e){return new qh(qh.CHILD_REMOVED,e,t)},qh.childChangedChange=function(t,e,n){return new qh(qh.CHILD_CHANGED,e,t,n)},qh.childMovedChange=function(t,e){return new qh(qh.CHILD_MOVED,e,t)},qh.CHILD_ADDED="child_added",qh.CHILD_REMOVED="child_removed",qh.CHILD_CHANGED="child_changed",qh.CHILD_MOVED="child_moved",qh.VALUE="value",qh);function qh(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Bh=(Wh.prototype.updateChild=function(t,e,n,r,i,o){Ts(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Vh.childRemovedChange(e,s)):Ts(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Vh.childAddedChange(e,n)):o.trackChildChange(Vh.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Wh.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(gc,function(t,e){n.hasChild(t)||i.trackChildChange(Vh.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(gc,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(Vh.childChangedChange(t,e,n))}else i.trackChildChange(Vh.childAddedChange(t,e))})),n.withIndex(this.index_)},Wh.prototype.updatePriority=function(t,e){return t.isEmpty()?Uc.EMPTY_NODE:t.updatePriority(e)},Wh.prototype.filtersNodes=function(){return!1},Wh.prototype.getIndexedFilter=function(){return this},Wh.prototype.getIndex=function(){return this.index_},Wh);function Wh(t){this.index_=t}var Kh=(Hh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ts(e===Vh.CHILD_ADDED||e===Vh.CHILD_CHANGED||e===Vh.CHILD_REMOVED,"Only child changes supported for tracking"),Ts(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Vh.CHILD_ADDED&&i===Vh.CHILD_REMOVED)this.changeMap.set(n,Vh.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Vh.CHILD_REMOVED&&i===Vh.CHILD_ADDED)this.changeMap.delete(n);else if(e===Vh.CHILD_REMOVED&&i===Vh.CHILD_CHANGED)this.changeMap.set(n,Vh.childRemovedChange(n,r.oldSnap));else if(e===Vh.CHILD_CHANGED&&i===Vh.CHILD_ADDED)this.changeMap.set(n,Vh.childAddedChange(n,t.snapshotNode));else{if(e!==Vh.CHILD_CHANGED||i!==Vh.CHILD_CHANGED)throw Is("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Vh.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Hh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Hh);function Hh(){this.changeMap=new Map}function Gh(){}var zh=(Gh.prototype.getCompleteChild=function(t){return null},Gh.prototype.getChildAfterChild=function(t,e,n){return null},new Gh),Qh=(Yh.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Mh(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Yh.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Yh);function Yh(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Xh(t,e){this.viewCache=t,this.changes=e}var Jh=($h.prototype.assertIndexed=function(t){Ts(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ts(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},$h.prototype.applyOperation=function(t,e,n,r){var i,o,s=new Kh;if(e.type===bh.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(Ts(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===bh.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(Ts(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===bh.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==bh.LISTEN_COMPLETE)throw Is("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var h=s.getChanges();return $h.maybeAddValueEvent_(t,i,h),new Xh(i,h)},$h.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Vh.valueChange(e.getCompleteEventSnap()))}},$h.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(Ts(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Uc?u:Uc.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){Ts(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},$h.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,zh,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Qh(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},$h.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Qh(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):Uc.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},$h.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},$h.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);$h.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);$h.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},$h.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},$h.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:Ah.Empty.setTree(t,e);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(f.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e);l=h.applyServerOverwrite_(l,new bu(t),r,s,a,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!f.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=h.applyMerge_(r,e);l=h.applyServerOverwrite_(l,new bu(t),i,s,a,u,c)}}),l},$h.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Ah.Empty;return a.getNode().forEachChild(ac,function(t,e){u=u.set(new bu(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Ah.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},$h.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,zh,r)},$h.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Qh(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Ts(h instanceof Uc,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,Uc.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(bu.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},$h);function $h(t){this.filter_=t}var Zh=(tl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Vh.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Vh.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Vh.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Vh.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Vh.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Vh.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Vh.VALUE,t,n,e),i},tl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},tl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},tl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Is("Should only compare child_ events.");var n=new $u(t.childName,t.snapshotNode),r=new $u(e.childName,e.snapshotNode);return this.index_.compare(n,r)},tl);function tl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var el,nl=(rl.prototype.getQuery=function(){return this.query_},rl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},rl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},rl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},rl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},rl.prototype.removeEventRegistration=function(t,n){var r=[];if(n){Ts(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},rl.prototype.applyOperation=function(t,e,n){t.type===bh.MERGE&&null!==t.source.queryId&&(Ts(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ts(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Ts(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},rl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(gc,function(t,e){n.push(Vh.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Vh.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},rl.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},rl);function rl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Bh(n.getIndex()),i=n.getNodeFilter();this.processor_=new Jh(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Uc.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Uc.EMPTY_NODE,s.getNode(),null),c=new Mh(a,o.isFullyInitialized(),r.filtersNodes()),h=new Mh(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Uh(h,c),this.eventGenerator_=new Zh(this.query_)}var il=(Object.defineProperty(ol,"__referenceConstructor",{get:function(){return Ts(el,"Reference.ts has not been loaded"),el},set:function(t){Ts(!el,"__referenceConstructor has already been defined"),el=t},enumerable:!0,configurable:!0}),ol.prototype.isEmpty=function(){return 0===this.views.size},ol.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ts(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=ys(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},ol.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a,u=n.calcCompleteEventCache(i?r:null);a=!!u||(u=r instanceof Uc?n.calcCompleteEventChildren(r):Uc.EMPTY_NODE,!1);var c=new Uh(new Mh(u,a,!1),new Mh(r,i,!1));s=new nl(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},ol.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=ys(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=gs(h.value,2),f=l[0],p=l[1];a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new ol.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},ol.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=ys(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},ol.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=ys(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},ol.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},ol.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},ol.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},ol.prototype.getCompleteView=function(){var t,e;try{for(var n=ys(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},ol);function ol(){this.views=new Map}var sl=(al.prototype.addWrite=function(t,e){if(t.isEmpty())return new al(new Ah(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=bu.relativePath(r,t);return i=i.updateChild(o,e),new al(this.writeTree_.set(r,i))}var s=new Ah(e);return new al(this.writeTree_.setTree(t,s))},al.prototype.addWrites=function(n,t){var r=this;return pu(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},al.prototype.removeWrite=function(t){return t.isEmpty()?al.Empty:new al(this.writeTree_.setTree(t,Ah.Empty))},al.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},al.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(bu.relativePath(e.path,t)):null},al.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(gc,function(t,e){n.push(new $u(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new $u(t,e.value))}),n},al.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new al(null!=e?new Ah(e):this.writeTree_.subtree(t))},al.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},al.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ts(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(bu.Empty,this.writeTree_,t)},al.Empty=new al(new Ah(null)),al);function al(t){this.writeTree_=t}var ul=(cl.prototype.childWrites=function(t){return new hl(t,this)},cl.prototype.addOverwrite=function(t,e,n,r){Ts(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},cl.prototype.addMerge=function(t,e,n){Ts(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},cl.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},cl.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ts(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):pu(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},cl.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},cl.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(bu.Empty)){var o=cl.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||Uc.EMPTY_NODE,o.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return t;if(null!=t||a.hasCompleteWrite(bu.Empty)){var u=t||Uc.EMPTY_NODE;return a.apply(u)}return null},cl.prototype.calcCompleteEventChildren=function(t,e){var r=Uc.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(gc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(gc,function(t,e){var n=i.childCompoundWrite(new bu(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},cl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ts(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},cl.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},cl.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},cl.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(bu.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},cl.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},cl.prototype.resetTree_=function(){this.visibleWrites_=cl.layerTree_(this.allWrites_,cl.DefaultFilter_,bu.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},cl.DefaultFilter_=function(t){return t.visible},cl.layerTree_=function(t,e,n){for(var r=sl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=bu.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=bu.relativePath(s,n),r=r.addWrite(bu.Empty,o.snap.getChild(a)));else{if(!o.children)throw Is("WriteRecord should have .snap or .children");if(n.contains(s))a=bu.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=bu.relativePath(s,n)).isEmpty())r=r.addWrites(bu.Empty,o.children);else{var u=Ks(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(bu.Empty,c)}}}}}return r},cl);function cl(){this.visibleWrites_=sl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var hl=(ll.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},ll.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},ll.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},ll.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},ll.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},ll.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},ll.prototype.child=function(t){return new ll(this.treePath_.child(t),this.writeTree_)},ll);function ll(t,e){this.treePath_=t,this.writeTree_=e}var fl=(pl.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ph(Th.User,t,e)):[]},pl.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Ah.fromObject(e);return this.applyOperationToSyncPoints_(new xh(Th.User,t,r))},pl.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Ah.Empty;return null!=n.snap?r=r.set(bu.Empty,!0):pu(n.children,function(t,e){r=r.set(new bu(t),e)}),this.applyOperationToSyncPoints_(new Nh(n.path,r,e))}return[]},pl.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ph(Th.Server,t,e))},pl.prototype.applyServerMerge=function(t,e){var n=Ah.fromObject(e);return this.applyOperationToSyncPoints_(new xh(Th.Server,t,n))},pl.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Rh(Th.Server,t))},pl.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=pl.parseQueryKey_(r),o=i.path,s=i.queryId,a=bu.relativePath(o,t),u=new Ph(Th.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},pl.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=pl.parseQueryKey_(r),o=i.path,s=i.queryId,a=bu.relativePath(o,t),u=Ah.fromObject(e),c=new xh(Th.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},pl.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=pl.parseQueryKey_(n),i=r.path,o=r.queryId,s=bu.relativePath(i,t),a=new Rh(Th.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},pl.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=bu.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(bu.Empty)):(s=new il,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=Uc.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(bu.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=pl.makeQueryKey_(t);Ts(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=pl.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(r),l=s.addEventRegistration(t,e,h,i,n);if(!a&&!o){var f=s.viewForQuery(t);l=l.concat(this.setupListener_(t,f))}return l},pl.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(pl.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(pl.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(pl.makeQueryKey_(t));r.listenProvider_.stopListening(pl.queryForListening_(t),e)})),this.removeTags_(u)}return s},pl.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=bu.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},pl.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),pu(n,function(t,e){r=r.concat(e)}),r})},pl.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=pl.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},pl.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},pl.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(pl.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Ts(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),pu(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(pl.queryForListening_(c),this.tagForQuery_(c))}return o},pl.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||Uc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t){var e="Unknown Error";"too_big"===t?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?e="Client doesn't have permission to access the desired data.":"unavailable"===t&&(e="The service is unavailable");var n=new Error(t+" at "+r.path.toString()+": "+e);return n.code=t.toUpperCase(),n}(t);return n.removeEventRegistration(r,null,e)}}},pl.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},pl.parseQueryKey_=function(t){var e=t.indexOf("$");return Ts(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new bu(t.substr(0,e))}},pl.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},pl.prototype.tagForQuery_=function(t){var e=pl.makeQueryKey_(t);return this.queryToTagMap.get(e)},pl.getNextQueryTag_=function(){return pl.nextQueryTag_++},pl.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ts(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},pl.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(bu.Empty))},pl.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(bu.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(bu.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},pl.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(bu.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(bu.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},pl.nextQueryTag_=1,pl);function pl(t){this.listenProvider_=t,this.syncPointTree_=Ah.Empty,this.pendingWriteTree_=new ul,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var dl=(vl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},vl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},vl);function vl(){this.rootNode_=Uc.EMPTY_NODE}var yl=(gl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Ga("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},gl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},gl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},gl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xa(t)},gl);function gl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var ml=(bl.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Ws(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},bl.prototype.get=function(){return Ns(this.counters_)},bl);function bl(){this.counters_={}}var _l=(wl.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new ml),this.collections_[e]},wl.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},wl.collections_={},wl.reporters_={},wl);function wl(){}var El=(Tl.prototype.get=function(){var t=this.collection_.get(),n=ps({},t);return this.last_&&pu(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Tl);function Tl(t){this.collection_=t,this.last_=null}var Il=(Sl.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Sl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;pu(t,function(t,e){0<e&&Ws(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),yu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Sl);function Sl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new El(t);var n=1e4+2e4*Math.random();yu(this.reportStats_.bind(this),Math.floor(n))}var Nl=(Cl.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Al(i)),e.add(r)}e&&this.eventLists_.push(e)},Cl.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Cl.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Cl.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Cl);function Cl(){this.eventLists_=[],this.recursionDepth_=0}var Al=(kl.prototype.add=function(t){this.events_.push(t)},kl.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();au&&Ga("event: "+e.toString()),vu(n)}}},kl.prototype.getPath=function(){return this.path_},kl);function kl(t){this.path_=t,this.events_=[]}var Rl=(Ol.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=ms(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Ol.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},Ol.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Ol.prototype.validateEventType_=function(e){Ts(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Ol);function Ol(t){this.allowedEvents_=t,this.listeners_={},Ts(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Pl,Dl=(fs(xl,Pl=Rl),xl.getInstance=function(){return new xl},xl.prototype.getInitialEvent=function(t){return Ts("visible"===t,"Unknown event type: "+t),[this.visible_]},xl);function xl(){var e,t,n=Pl.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Ll,Ml=(fs(Ul,Ll=Rl),Ul.getInstance=function(){return new Ul},Ul.prototype.getInitialEvent=function(t){return Ts("online"===t,"Unknown event type: "+t),[this.online_]},Ul.prototype.currentlyOnline=function(){return this.online_},Ul);function Ul(){var t=Ll.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Os()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var jl=(Vl.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Vl.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&vu(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},Vl);function Vl(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ql=(Bl.prototype.open=function(t,e){var s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!s.isClosed_){s.scriptTagHolder=new Wl(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=gs(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=gs(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Tu)&&(t.r="f");var e=s.urlFn(t);s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){})}})},Bl.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Bl.forceAllow=function(){Bl.forceAllow_=!0},Bl.forceDisallow=function(){Bl.forceDisallow_=!0},Bl.isAvailable=function(){return!!Bl.forceAllow_||!(Bl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Bl.prototype.markConnectionHealthy=function(){},Bl.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Bl.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Bl.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Bl.prototype.send=function(t){var e=qs(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=tu((n=_s(e),Ss.encodeByteArray(n,!0)),1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},Bl.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Bl.prototype.incrementIncomingBytes_=function(t){var e=qs(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},Bl);function Bl(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=za(t),this.stats_=_l.getCollection(e),this.urlFn=function(t){return e.connectionURL(Su,t)}}var Wl=(Kl.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ga("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Kl.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Kl.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Kl.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},Kl.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Kl.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Kl.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Ga("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Kl);function Kl(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ou(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Kl.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){Ga("frame writing exception"),t.stack&&Ga(t.stack),Ga(t)}}var Hl="",Gl=null;"undefined"!=typeof MozWebSocket?Gl=MozWebSocket:"undefined"!=typeof WebSocket&&(Gl=WebSocket);var zl=(Ql.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Tu)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Iu,r)},Ql.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nu.set("previous_websocket_failure",!0);try{if(Ds()){var r=Es.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Hl+"/"+process.platform+"/"+r}},o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new Gl(this.connURL,[],i)}else this.mySock=new Gl(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},Ql.prototype.start=function(){},Ql.forceDisallow=function(){Ql.forceDisallow_=!0},Ql.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Gl&&!Ql.forceDisallow_},Ql.previouslyFailed=function(){return nu.isInMemoryStorage||!0===nu.get("previous_websocket_failure")},Ql.prototype.markConnectionHealthy=function(){nu.remove("previous_websocket_failure")},Ql.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Vs(e);this.onMessage(n)}},Ql.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Ql.prototype.extractFrameCount_=function(t){if(Ts(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Ql.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},Ql.prototype.send=function(t){this.resetKeepAlive();var e=qs(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=tu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Ql.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Ql.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Ql.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Ql.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Ql.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Ql.responsesRequiredToBeHealthy=2,Ql.healthyTimeout=3e4,Ql);function Ql(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=za(this.connId),this.stats_=_l.getCollection(e),this.connURL=Ql.connectionURL_(e,n,r)}var Yl=(Object.defineProperty(Xl,"ALL_TRANSPORTS",{get:function(){return[ql,zl]},enumerable:!0,configurable:!0}),Xl.prototype.initTransports_=function(t){var e,n,r=zl&&zl.isAvailable(),i=r&&!zl.previouslyFailed();if(t.webSocketOnly&&(r||Xa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zl];else{var o=this.transports_=[];try{for(var s=ys(Xl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Xl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Xl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Xl);function Xl(t){this.initTransports_(t)}var Jl=($l.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=yu(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},$l.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},$l.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},$l.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},$l.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},$l.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},$l.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},$l.prototype.onSecondaryMessageReceived_=function(t){var e=Za("t",t),n=Za("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},$l.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},$l.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},$l.prototype.onPrimaryMessageReceived_=function(t){var e=Za("t",t),n=Za("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},$l.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},$l.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},$l.prototype.onControl_=function(t){var e=Za("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Qa("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qa("Unknown control packet command: "+e)}},$l.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Xa("Protocol version mismatch detected"),this.tryStartUpgrade_())},$l.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},$l.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yu(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},$l.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},$l.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yu(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},$l.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},$l.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},$l.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},$l.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},$l.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},$l.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},$l.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},$l);function $l(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=za("c:"+this.id+":"),this.transportManager_=new Yl(e),this.log_("Connection created"),this.start_()}var Zl=(tf.prototype.put=function(t,e,n,r){},tf.prototype.merge=function(t,e,n,r){},tf.prototype.refreshAuthToken=function(t){},tf.prototype.onDisconnectPut=function(t,e,n){},tf.prototype.onDisconnectMerge=function(t,e,n){},tf.prototype.onDisconnectCancel=function(t,e){},tf.prototype.reportStats=function(t){},tf);function tf(){}var ef,nf=(fs(rf,ef=Zl),rf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(qs(i)),Ts(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},rf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ts(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ts(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},rf.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;rf.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},rf.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Ws(t,"w")){var n=Ks(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index"))Xa("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+('".indexOn": "'+e.getQueryParams().getIndex().toString()+'"')+" at "+e.path.toString()+" to your security rules for better performance.")}},rf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},rf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=Bs(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},rf.prototype.tryAuth=function(){var t,r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,e=(t=Bs(i).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",n={cred:i};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},rf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ts(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},rf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},rf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},rf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},rf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},rf.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},rf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},rf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},rf.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},rf.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},rf.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},rf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+qs(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},rf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Qa("Unrecognized action received from server: "+qs(t)+"\nAre you using the latest client?")},rf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},rf.prototype.scheduleConnect_=function(t){var e=this;Ts(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},rf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},rf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},rf.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},rf.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+rf.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){Ts(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?Ga("getToken() completed but was canceled"):(Ga("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Jl(i,o.repoInfo_,e,n,r,function(t){Xa(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()})}},rf.prototype.interrupt=function(t){Ga("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},rf.prototype.resume=function(t){Ga("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Hs(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},rf.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},rf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},rf.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return fu(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},rf.prototype.removeListen_=function(t,e){var n,r=new bu(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},rf.prototype.onAuthRevoked_=function(t,e){Ga("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},rf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},rf.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=ys(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ys(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},rf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Hl.replace(/\./g,"-")]=1,Os()?t["framework.cordova"]=1:Ps()&&(t["framework.reactnative"]=1),this.reportStats(t)},rf.prototype.shouldReconnect_=function(){var t=Ml.getInstance().currentlyOnline();return Hs(this.interruptReasons_)&&t},rf.nextPersistentConnectionId_=0,rf.nextConnectionId_=0,rf);function rf(t,e,n,r,i,o){var s=ef.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=rf.nextPersistentConnectionId_++,s.log_=za("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o&&!Ds())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),Dl.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&Ml.getInstance().on("online",s.onOnline_,s),s}var of,sf=(fs(af,of=Zl),af.prototype.reportStats=function(t){throw new Error("Method not implemented.")},af.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ts(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},af.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=af.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),Ks(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},af.prototype.unlisten=function(t,e){var n=af.getListenId_(t,e);delete this.listens_[n]},af.prototype.refreshAuthToken=function(t){},af.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];e(o[0],o[1])}return n.length?"&"+n.join("&"):""}(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Vs(r.responseText)}catch(t){Xa("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&Xa("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},af);function af(t,e,n){var r=of.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=za("p:rest:"),r.listens_={},r}var uf="repo_interrupt",cf=(hf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},hf.prototype.name=function(){return this.repoInfo_.namespace},hf.prototype.serverTime=function(){var t=this.infoData_.getNode(new bu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},hf.prototype.generateServerValues=function(){return(t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},hf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new bu(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Gs(e,function(t){return Kc(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Kc(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Gs(e,function(t){return Kc(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Kc(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},hf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},hf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},hf.prototype.onServerInfoUpdate_=function(t){var n=this;pu(t,function(t,e){n.updateInfo_(t,e)})},hf.prototype.updateInfo_=function(t,e){var n=new bu("/.info/"+t),r=Kc(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},hf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},hf.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Kc(t,e),a=dh(r,this.serverSyncTree_.calcCompleteEventCache(i),n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||Xa("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(u,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},hf.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var n=!0,r=this.generateServerValues(),i={};if(pu(t,function(t,e){n=!1,i[t]=ph(o.child(t),Kc(e),a.serverSyncTree_,r)}),n)Ga("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||Xa("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),pu(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},hf.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new wh;this.onDisconnect_.forEachTree(bu.Empty,function(t,e){var n=ph(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(bu.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new wh,this.eventQueue_.raiseEventsForChangedPath(bu.Empty,s)},hf.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},hf.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Kc(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},hf.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Kc(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},hf.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(Hs(n))return Ga("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&pu(n,function(t,e){var n=Kc(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},hf.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},hf.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},hf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(uf)},hf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(uf)},hf.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new El(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);pu(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)})}},hf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},hf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Ga.apply(void 0,ms([n],t))},hf.prototype.callOnCompleteCallback=function(r,i,o){r&&vu(function(){if("ok"===i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(hf.prototype,"database",{get:function(){return this.__database||(this.__database=new kf(this))},enumerable:!0,configurable:!0}),hf);function hf(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new wh,this.persistentConnection_=null;var i=new yl(n,r);if(this.stats_=_l.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new sf(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qs(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new nf(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=_l.getOrCreateReporter(t,function(){return new Il(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new dl,this.infoSyncTree_=new fl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new fl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var lf=(ff.prototype.getStartPost=function(){return this.startPost_},ff.prototype.getEndPost=function(){return this.endPost_},ff.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},ff.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new $u(e,n))||(n=Uc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},ff.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Uc.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Uc.EMPTY_NODE);var i=this;return e.forEachChild(gc,function(t,e){i.matches(new $u(t,e))||(r=r.updateImmediateChild(t,Uc.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},ff.prototype.updatePriority=function(t,e){return t},ff.prototype.filtersNodes=function(){return!0},ff.prototype.getIndexedFilter=function(){return this.indexedFilter_},ff.prototype.getIndex=function(){return this.index_},ff.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},ff.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},ff);function ff(t){this.indexedFilter_=new Bh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ff.getStartPost_(t),this.endPost_=ff.getEndPost_(t)}var pf=(df.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new $u(e,n))||(n=Uc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},df.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Uc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Uc.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Uc.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Uc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},df.prototype.updatePriority=function(t,e){return t},df.prototype.filtersNodes=function(){return!0},df.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},df.prototype.getIndex=function(){return this.index_},df.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;Ts(a.numChildren()===this.limit_,"");var u=new $u(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Vh.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Vh.childRemovedChange(e,l));var d=a.updateImmediateChild(e,Uc.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Vh.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(Vh.childRemovedChange(c.name,c.node)),i.trackChildChange(Vh.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Uc.EMPTY_NODE)):t},df);function df(t){this.rangedFilter_=new lf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var vf=(yf.prototype.hasStart=function(){return this.startSet_},yf.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===yf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},yf.prototype.getIndexStartValue=function(){return Ts(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},yf.prototype.getIndexStartName=function(){return Ts(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cu},yf.prototype.hasEnd=function(){return this.endSet_},yf.prototype.getIndexEndValue=function(){return Ts(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},yf.prototype.getIndexEndName=function(){return Ts(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hu},yf.prototype.hasLimit=function(){return this.limitSet_},yf.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},yf.prototype.getLimit=function(){return Ts(this.limitSet_,"Only valid if limit has been set"),this.limit_},yf.prototype.getIndex=function(){return this.index_},yf.prototype.copy_=function(){var t=new yf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},yf.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},yf.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=yf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},yf.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=yf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},yf.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},yf.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},yf.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},yf.prototype.getQueryObject=function(){var t=yf.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==gc&&(e[t.INDEX]=this.index_.toString()),e},yf.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},yf.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===gc},yf.prototype.getNodeFilter=function(){return this.loadsAllData()?new Bh(this.getIndex()):new(this.hasLimit()?pf:lf)(this)},yf.prototype.toRestQueryStringParameters=function(){var t,e=yf.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===gc?e.PRIORITY_INDEX:this.index_===zc?e.VALUE_INDEX:this.index_===ac?e.KEY_INDEX:(Ts(this.index_ instanceof Qc,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=qs(t),this.startSet_&&(n[e.START_AT]=qs(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+qs(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=qs(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+qs(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},yf.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},yf.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},yf.DEFAULT=new yf,yf);function yf(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gc}var gf,mf=(fs(bf,gf=ah),bf.prototype.getKey=function(){return Zs("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},bf.prototype.child=function(t){var e,n;return Zs("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof bu||(null===this.path.getFront()?(n=!1,Fu("Reference.child",1,e=(e=t)&&e.replace(/^\/*\.info(\/|$)/,"/"),n)):Fu("Reference.child",1,t,!1)),new bf(this.repo,this.path.child(t))},bf.prototype.getParent=function(){Zs("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new bf(this.repo,t)},bf.prototype.getRoot=function(){Zs("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},bf.prototype.databaseProp=function(){return this.repo.database},bf.prototype.set=function(t,e){Zs("Reference.set",1,2,arguments.length),Uu("Reference.set",this.path),Pu("Reference.set",1,t,this.path,!1),ea("Reference.set",2,e,!0);var n=new As;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},bf.prototype.update=function(t,e){if(Zs("Reference.update",1,2,arguments.length),Uu("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Xa("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Du("Reference.update",1,t,this.path,!1),ea("Reference.update",2,e,!0);var i=new As;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},bf.prototype.setWithPriority=function(t,e,n){if(Zs("Reference.setWithPriority",2,3,arguments.length),Uu("Reference.setWithPriority",this.path),Pu("Reference.setWithPriority",1,t,this.path,!1),xu("Reference.setWithPriority",2,e,!1),ea("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new As;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},bf.prototype.remove=function(t){return Zs("Reference.remove",0,1,arguments.length),Uu("Reference.remove",this.path),ea("Reference.remove",1,t,!0),this.set(null,t)},bf.prototype.transaction=function(t,r,e){if(Zs("Reference.transaction",1,3,arguments.length),Uu("Reference.transaction",this.path),ea("Reference.transaction",1,t,!1),ea("Reference.transaction",2,r,!0),function(){if(void 0!==e&&"boolean"!=typeof e)throw new Error(ta("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new As;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new Gu(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},bf.prototype.setPriority=function(t,e){Zs("Reference.setPriority",1,2,arguments.length),Uu("Reference.setPriority",this.path),xu("Reference.setPriority",1,t,!1),ea("Reference.setPriority",2,e,!0);var n=new As;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},bf.prototype.push=function(t,e){Zs("Reference.push",0,2,arguments.length),Uu("Reference.push",this.path),Pu("Reference.push",1,t,this.path,!0),ea("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ju(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},bf.prototype.onDisconnect=function(){return Uu("Reference.onDisconnect",this.path),new Ku(this.repo,this.path)},Object.defineProperty(bf.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(bf.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(bf.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(bf.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),bf);function bf(t,e){if(!(t instanceof cf))throw new Error("new Reference() no longer supported - use app.database().");return gf.call(this,t,e,vf.DEFAULT,!1)||this}ah.__referenceConstructor=mf,il.__referenceConstructor=mf;function _f(){this.children={},this.childCount=0,this.value=null}var wf,Ef,Tf=(If.prototype.subTree=function(t){for(var e=t instanceof bu?t:new bu(t),n=this,r=e.getFront();null!==r;)n=new If(r,n,Ks(n.node_.children,r)||new _f),r=(e=e.popFront()).getFront();return n},If.prototype.getValue=function(){return this.node_.value},If.prototype.setValue=function(t){Ts(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},If.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},If.prototype.hasChildren=function(){return 0<this.node_.childCount},If.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},If.prototype.forEachChild=function(n){var r=this;pu(this.node_.children,function(t,e){n(new If(t,r,e))})},If.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},If.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},If.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},If.prototype.path=function(){return new bu(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},If.prototype.name=function(){return this.name_},If.prototype.parent=function(){return this.parent_},If.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},If.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Ws(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},If);function If(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new _f),this.name_=t,this.parent_=e,this.node_=n}(Ef=wf=wf||{})[Ef.RUN=0]="RUN",Ef[Ef.SENT=1]="SENT",Ef[Ef.COMPLETED=2]="COMPLETED",Ef[Ef.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Ef[Ef.NEEDS_ABORT=4]="NEEDS_ABORT",cf.MAX_TRANSACTION_RETRIES_=25,cf.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Tf},cf.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new mf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:ou(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Xc(s.currentInputSnapshot,new mf(this,s.path),gc);s.onComplete(null,!1,c)}}else{Wu("transaction failed: Data returned ",u,s.path),s.status=wf.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;"object"==typeof u&&null!==u&&Ws(u,".priority")?(f=Ks(u,".priority"),Ts(Ou(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||Uc.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),d=Kc(u,f),v=dh(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},cf.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Uc.EMPTY_NODE},cf.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Ts(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===wf.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},cf.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];Ts(o.status===wf.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=wf.SENT,o.retryCount++;var s=bu.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=wf.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new mf(c,u[r].path),s=new Xc(i,o,gc);n.push(u[r].onComplete.bind(null,null,!0,s))}u[r].unwatcher()}for(c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e),r=0;r<n.length;r++)vu(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===wf.SENT_NEEDS_ABORT?u[r].status=wf.NEEDS_ABORT:u[r].status=wf.RUN;else for(Xa("transaction at "+l.toString()+" failed: "+t),r=0;r<u.length;r++)u[r].status=wf.NEEDS_ABORT,u[r].abortReason=t;c.rerunTransactions_(a)}},r)},cf.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},cf.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===wf.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=bu.relativePath(e,a.path),c=!1,h=void 0;if(Ts(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===wf.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===wf.RUN)if(a.retryCount>=cf.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){Wu("transaction failed: Data returned ",f,a.path);var p=Kc(f);"object"==typeof f&&null!=f&&Ws(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=dh(p,l,this.generateServerValues());a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=wf.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var y=new mf(this,t[s].path),g=t[s].currentInputSnapshot,m=new Xc(g,y,gc);r.push(t[s].onComplete.bind(null,null,!1,m))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)vu(r[s]);this.sendReadyTransactions_()}},cf.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},cf.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},cf.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},cf.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==wf.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},cf.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},cf.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status!==wf.SENT_NEEDS_ABORT&&(e[o].status===wf.SENT?(Ts(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=wf.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Ts(e[o].status===wf.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)vu(n[o])}};var Sf,Nf="databaseURL",Cf=(Af.getInstance=function(){return Sf=Sf||new Af},Af.prototype.interrupt=function(){var t,e,n,r;try{for(var i=ys(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ys(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Af.prototype.resume=function(){var t,e,n,r;try{for(var i=ys(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ys(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Af.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Nf];void 0===r&&Ya("Can't determine Firebase Database URL.  Be sure to include "+Nf+" option when calling firebase.initializeApp().");var i=Au(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(o=(i=Au(r="http://"+s+"?ns="+o.namespace)).repoInfo),ju("Invalid Firebase Database URL",1,i),i.path.isEmpty()||Ya("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Af.prototype.deleteRepo=function(t){var e=Ks(this.repos_,t.app.name);e&&Ks(e,t.repoInfo_.toURLString())===t||Ya("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Af.prototype.createRepo=function(t,e,n){var r=Ks(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Ks(r,t.toURLString());return i&&Ya("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new cf(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Af.prototype.forceRestClient=function(t){this.useRestClient_=t},Af);function Af(){this.repos_={},this.useRestClient_=!1}var kf=(Object.defineProperty(Rf.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Rf.prototype.ref=function(t){return this.checkDeleted_("ref"),Zs("database.ref",0,1,arguments.length),t instanceof mf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Rf.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Zs(e,1,1,arguments.length);var n=Au(t);ju(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Ya(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Rf.prototype.checkDeleted_=function(t){null===this.repo_&&Ya("Cannot call "+t+" on a deleted database.")},Rf.prototype.goOffline=function(){Zs("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Rf.prototype.goOnline=function(){Zs("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Rf.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Rf);function Rf(t){(this.repo_=t)instanceof cf||Ya("Don't call new Database() directly - please use firebase.database()."),this.root_=new mf(t,bu.Empty),this.INTERNAL=new Of(this)}var Of=(Pf.prototype.delete=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){return this.database.checkDeleted_("delete"),Cf.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Pf);function Pf(t){this.database=t}var Df=Object.freeze({__proto__:null,forceLongPolling:function(){zl.forceDisallow(),ql.forceAllow()},forceWebSockets:function(){ql.forceDisallow()},isWebSocketsAvailable:function(){return zl.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),xf=nf;nf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},nf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Lf,Mf,Ff=Jl,Uf=Nu,jf=Object.freeze({__proto__:null,DataConnection:xf,RealTimeConnection:Ff,hijackHash:function(i){var o=nf.prototype.put;return nf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){nf.prototype.put=o}},ConnectionTarget:Uf,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Cf.getInstance().forceRestClient(t)}}),Vf=kf.ServerValue;Mf=(Lf=Fl).SDK_VERSION,Hl=Mf,Lf.INTERNAL.registerComponent(new ia("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Cf.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:mf,Query:ah,Database:kf,DataSnapshot:Xc,enableLogging:Ha,INTERNAL:Df,ServerValue:Vf,TEST_ACCESS:jf}).setMultipleInstances(!0)),Lf.registerVersion("@firebase/database","0.6.1-0");var qf,Bf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wf=Wf||{},Kf=Bf;function Hf(t){return"string"==typeof t}function Gf(t){return"number"==typeof t}function zf(t,e){t=t.split("."),e=e||Kf;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function Qf(){}function Yf(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Xf(t){return"array"==Yf(t)}function Jf(t){var e=Yf(t);return"array"==e||"object"==e&&"number"==typeof t.length}function $f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Zf="closure_uid_"+(1e9*Math.random()>>>0),tp=0;function ep(t,e,n){return t.call.apply(t.bind,arguments)}function np(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function rp(t,e,n){return(rp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ep:np).apply(null,arguments)}function ip(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var op=Date.now||function(){return+new Date};function sp(t,o){function e(){}e.prototype=o.prototype,t.N=o.prototype,t.prototype=new e,(t.prototype.constructor=t).yb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function ap(){this.j=this.j,this.i=this.i}ap.prototype.j=!1,ap.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[Zf]||(this[Zf]=++tp))},ap.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var up=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(Hf(t))return Hf(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},cp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Hf(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function hp(){return Array.prototype.concat.apply([],arguments)}function lp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function fp(t){return/^[\s\xa0]*$/.test(t)}var pp,dp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function vp(t,e){return-1!=t.indexOf(e)}function yp(t,e){return t<e?-1:e<t?1:0}t:{var gp=Kf.navigator;if(gp){var mp=gp.userAgent;if(mp){pp=mp;break t}}pp=""}function bp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function _p(t){var e,n={};for(e in t)n[e]=t[e];return n}var wp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ep(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<wp.length;i++)e=wp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Tp(t){return Tp[" "](t),t}Tp[" "]=Qf;var Ip,Sp,Np=vp(pp,"Opera"),Cp=vp(pp,"Trident")||vp(pp,"MSIE"),Ap=vp(pp,"Edge"),kp=Ap||Cp,Rp=vp(pp,"Gecko")&&!(vp(pp.toLowerCase(),"webkit")&&!vp(pp,"Edge"))&&!(vp(pp,"Trident")||vp(pp,"MSIE"))&&!vp(pp,"Edge"),Op=vp(pp.toLowerCase(),"webkit")&&!vp(pp,"Edge");function Pp(){var t=Kf.document;return t?t.documentMode:void 0}t:{var Dp="",xp=(Sp=pp,Rp?/rv:([^\);]+)(\)|;)/.exec(Sp):Ap?/Edge\/([\d\.]+)/.exec(Sp):Cp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Sp):Op?/WebKit\/(\S+)/.exec(Sp):Np?/(?:Version)[ \/]?(\S+)/.exec(Sp):void 0);if(xp&&(Dp=xp?xp[1]:""),Cp){var Lp=Pp();if(null!=Lp&&Lp>parseFloat(Dp)){Ip=String(Lp);break t}}Ip=Dp}var Mp,Fp={};function Up(a){return t=a,e=function(){for(var t=0,e=dp(String(Ip)).split("."),n=dp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=yp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||yp(0==o[2].length,0==s[2].length)||yp(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Fp,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var jp=Kf.document;Mp=jp&&Cp?Pp()||("CSS1Compat"==jp.compatMode?parseInt(Ip,10):5):void 0;var Vp=!Cp||9<=Number(Mp),qp=Cp&&!Up("9"),Bp=function(){if(!Kf.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Kf.addEventListener("test",Qf,e),Kf.removeEventListener("test",Qf,e)}catch(t){}return t}();function Wp(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function Kp(t,e){if(Wp.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Rp){t:{try{Tp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=Hf(t.pointerType)?t.pointerType:Hp[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Wp.prototype.b=function(){this.Ia=!1},sp(Kp,Wp);var Hp={2:"touch",3:"pen",4:"mouse"};Kp.prototype.b=function(){Kp.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,qp)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Gp="closure_listenable_"+(1e6*Math.random()|0),zp=0;function Qp(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++zp,this.X=this.Z=!1}function Yp(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Xp(t){this.src=t,this.a={},this.b=0}function Jp(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=up(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Yp(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function $p(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Xp.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$p(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Qp(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Zp="closure_lm_"+(1e6*Math.random()|0),td={};function ed(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Xf(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=cd(r),e&&e[Gp]?e.Aa(n,r,$f(i)?!!i.capture:!!i,o):nd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Xf(e)){for(var o=0;o<e.length;o++)ed(t,e[o],n,r,i);return null}return n=cd(n),t&&t[Gp]?t.za(e,n,$f(r)?!!r.capture:!!r,i):nd(t,e,n,!1,r,i)}function nd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$f(i)?!!i.capture:!!i;if(s&&!Vp)return null;var a,u,c=ad(t);if(c||(t[Zp]=c=new Xp(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=sd,r=u=Vp?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Bp||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(id(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function rd(t){if(!Gf(t)&&t&&!t.X){var e=t.src;if(e&&e[Gp])Jp(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(id(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ad(e))?(Jp(n,t),0==n.b&&(n.src=null,e[Zp]=null)):Yp(t)}}}function id(t){return t in td?td[t]:td[t]="on"+t}function od(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&rd(t),n.call(r,e)}function sd(t,e){return!!t.X||od(t,Vp?new Kp(e,this):e=new Kp(e||zf("window.event"),this))}function ad(t){return(t=t[Zp])instanceof Xp?t:null}var ud="__closure_events_fn_"+(1e9*Math.random()>>>0);function cd(e){return"function"==Yf(e)?e:(e[ud]||(e[ud]=function(t){return e.handleEvent(t)}),e[ud])}function hd(){ap.call(this),this.c=new Xp(this),(this.J=this).B=null}function ld(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Jp(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}sp(hd,ap),hd.prototype[Gp]=!0,(qf=hd.prototype).addEventListener=function(t,e,n,r){ed(this,t,e,n,r)},qf.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Xf(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=$f(i)?!!i.capture:!!i,r=cd(r),e&&e[Gp]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=$p(s=e.a[n],r,i,o))&&(Yp(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&ad(e))&&(n=e.a[n.toString()],e=-1,n&&(e=$p(n,r,i,o)),(r=-1<e?n[e]:null)&&rd(r))}(this,t,e,n,r)},qf.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(Hf(t))t=new Wp(t,n);else if(t instanceof Wp)t.target=t.target||n;else{var i=t;Ep(t=new Wp(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=ld(s,r,!0,t)&&i}if(i=ld(s=t.a=n,r,!0,t)&&i,i=ld(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ld(s=t.a=e[o],r,!1,t)&&i;return i},qf.G=function(){if(hd.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Yp(n[r]);delete e.a[t],e.b--}}this.B=null},qf.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},qf.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var fd=Kf.JSON.stringify;function pd(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function dd(){this.b=this.a=null}pd.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var vd,yd=new pd(function(){return new gd},function(t){t.reset()});function gd(){this.next=this.b=this.a=null}function md(t){Kf.setTimeout(function(){throw t},0)}function bd(t,e){var n;vd||(n=Kf.Promise.resolve(void 0),vd=function(){n.then(Ed)}),_d||(vd(),_d=!0),wd.add(t,e)}dd.prototype.add=function(t,e){var n=yd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},gd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var _d=!(gd.prototype.reset=function(){this.next=this.b=this.a=null}),wd=new dd;function Ed(){for(var t;r=n=void 0,r=null,(n=wd).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){md(t)}var e=yd;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;_d=!1}function Td(t,e){hd.call(this),this.b=t||1,this.a=e||Kf,this.f=rp(this.gb,this),this.g=op()}function Id(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Sd(t,e,n){if("function"==Yf(t))n&&(t=rp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=rp(t.handleEvent,t)}return 2147483647<Number(e)?-1:Kf.setTimeout(t,e||0)}function Nd(t,e,n){ap.call(this),this.f=null!=n?rp(t,n):t,this.c=e,this.b=rp(this.$a,this),this.a=[]}function Cd(t){t.U=Sd(t.b,t.c),t.f.apply(null,t.a)}function Ad(t){ap.call(this),this.b=t,this.a={}}sp(Td,hd),(qf=Td.prototype).ba=!1,qf.L=null,qf.gb=function(){if(this.ba){var t=op()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Id(this),this.start()))}},qf.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=op())},qf.G=function(){Td.N.G.call(this),Id(this),delete this.a},sp(Nd,ap),(qf=Nd.prototype).ea=!1,qf.U=null,qf.Ta=function(t){this.a=arguments,this.U?this.ea=!0:Cd(this)},qf.G=function(){Nd.N.G.call(this),this.U&&(Kf.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},qf.$a=function(){this.U=null,this.ea&&(this.ea=!1,Cd(this))},sp(Ad,ap);var kd=[];function Rd(t,e,n,r){Xf(n)||(n&&(kd[0]=n.toString()),n=kd);for(var i=0;i<n.length;i++){var o=ed(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Od(t){bp(t.a,function(t,e){this.a.hasOwnProperty(e)&&rd(t)},t),t.a={}}function Pd(){}Ad.prototype.G=function(){Ad.N.G.call(this),Od(this)},Ad.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dd=new hd;function xd(t){Wp.call(this,"serverreachability",t)}function Ld(){Dd.dispatchEvent(new xd(Dd))}function Md(t){Wp.call(this,"statevent",t)}function Fd(){Dd.dispatchEvent(new Md(Dd))}function Ud(t){Wp.call(this,"timingevent",t)}function jd(t,e){if("function"!=Yf(t))throw Error("Fn must not be null and must be a function");return Kf.setTimeout(function(){t()},e)}sp(xd,Wp),sp(Md,Wp),sp(Ud,Wp);var Vd={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},qd={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function Bd(){}function Wd(t){var e;return(e=t.a)||(e=t.a={}),e}function Kd(){}Bd.prototype.a=null;var Hd,Gd={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function zd(){Wp.call(this,"d")}function Qd(){Wp.call(this,"c")}function Yd(){}function Xd(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Ad(this),this.O=Jd,t=kp?125:void 0,this.P=new Td(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}sp(zd,Wp),sp(Qd,Wp),sp(Yd,Bd),Hd=new Yd;var Jd=45e3,$d={},Zd={};function tv(t,e,n){t.F=1,t.f=Iv(gv(e)),t.l=n,t.H=!0,nv(t,null)}function ev(t,e,n,r){t.F=1,t.f=Iv(gv(e)),t.l=null,t.H=n,nv(t,r)}function nv(t,e){t.v=op(),iv(t),t.D=gv(t.f),Tv(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Nd(rp(t.Ja,t,t.a),t.J)),Rd(t.I,t.a,"readystatechange",t.cb),e=t.h?_p(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Ld()}function rv(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=(s=n,u=a=void 0,a=(o=t).A,-1==(u=s.indexOf("\n",a))?Zd:(a=Number(s.substring(a,u)),isNaN(a)?$d:(u+=1)+a>s.length?Zd:(s=s.substr(u,a),o.A=u+a,s)));if(i==Zd){4==e&&(t.c=4,Fd(),r=!1);break}if(i==$d){t.c=4,Fd(),r=!1;break}cv(t,i)}var o,s,a,u;4==e&&0==n.length&&(t.c=1,Fd(),r=!1),t.b=t.b&&r,r||(uv(t),av(t))}function iv(t){t.R=op()+t.O,ov(t,t.O)}function ov(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=jd(rp(t.ab,t),e)}function sv(t){t.i&&(Kf.clearTimeout(t.i),t.i=null)}function av(t){t.g.Ca()||t.m||t.g.na(t)}function uv(t){sv(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Id(t.P),Od(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function cv(t,e){try{t.g.Fa(t,e),Ld()}catch(t){}}function hv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Jf(t)||Hf(t))cp(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(Jf(t)||Hf(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(Hf(t))return t.split("");if(Jf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function lv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof lv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function fv(t,e){dv(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&pv(t))}function pv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];dv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)dv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function dv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(qf=Xd.prototype).setTimeout=function(t){this.O=t},qf.cb=function(t){t=t.target;var e=this.B;e&&3==yy(t)?e.Ta():this.Ja(t)},qf.Ja=function(t){try{if(t==this.a)t:{var e=yy(this.a),n=this.a.ya();this.a.T();if(!(e<3||3==e&&!kp&&!this.a.aa())){this.m||4!=e||7==n||Ld(),sv(this);var r=this.a.T();this.o=r;var i=this.a.aa();if(this.b=200==r){if(this.S&&!this.s){e:{if(this.a){var o=gy(this.a,"X-HTTP-Initial-Response");if(o&&!fp(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.c=3,Fd(),uv(this),av(this);break t}this.s=!0,cv(this,s)}this.H?(rv(this,e,i),kp&&this.b&&3==e&&(Rd(this.I,this.P,"tick",this.bb),this.P.start())):cv(this,i),4==e&&uv(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,iv(this)))}else 400==r&&0<i.indexOf("Unknown SID")?this.c=3:this.c=0,Fd(),uv(this),av(this)}}}catch(t){}},qf.bb=function(){if(this.a){var t=yy(this.a),e=this.a.aa();this.A<e.length&&(sv(this),rv(this,t,e),this.b&&4!=t&&iv(this))}},qf.cancel=function(){this.m=!0,uv(this)},qf.ab=function(){this.i=null;var t=op();0<=t-this.R?(2!=this.F&&(Ld(),Fd()),uv(this),this.c=2,av(this)):ov(this,this.R-t)},(qf=lv.prototype).C=function(){pv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},qf.K=function(){return pv(this),this.a.concat()},qf.get=function(t,e){return dv(this.b,t)?this.b[t]:e},qf.set=function(t,e){dv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},qf.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var vv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yv(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof yv?(this.h=void 0!==e?e:t.h,mv(this,t.f),this.j=t.j,bv(this,t.b),_v(this,t.i),this.a=t.a,wv(this,Uv(t.c)),this.g=t.g):t&&(n=String(t).match(vv))?(this.h=!!e,mv(this,n[1]||"",!0),this.j=Sv(n[2]||""),bv(this,n[3]||"",!0),_v(this,n[4]),this.a=Sv(n[5]||"",!0),wv(this,n[6]||"",!0),this.g=Sv(n[7]||"")):(this.h=!!e,this.c=new Dv(null,this.h))}function gv(t){return new yv(t)}function mv(t,e,n){t.f=n?Sv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function bv(t,e,n){t.b=n?Sv(e,!0):e}function _v(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function wv(t,e,n){var r,i;e instanceof Dv?(t.c=e,r=t.c,(i=t.h)&&!r.f&&(xv(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Lv(this,e),Fv(this,n,t))},r)),r.f=i):(n||(e=Nv(e,Ov)),t.c=new Dv(e,t.h))}function Ev(t,e,n){t.c.set(e,n)}function Tv(t,e,n){Xf(n)||(n=[String(n)]),Fv(t.c,e,n)}function Iv(t){return Ev(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^op()).toString(36)),t}function Sv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Nv(t,e,n){return Hf(t)?(t=encodeURI(t).replace(e,Cv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Cv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}yv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Nv(e,Av,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Nv(e,Av,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Nv(n,"/"==n.charAt(0)?Rv:kv,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Nv(n,Pv)),t.join("")},yv.prototype.resolve=function(t){var e=gv(this),n=!!t.f;n?mv(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?bv(e,t.b):n=null!=t.i;var r=t.a;if(n)_v(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(vp(i,"./")||vp(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?wv(e,Uv(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Av=/[#\/\?@]/g,kv=/[#\?:]/g,Rv=/[#\?]/g,Ov=/[#\?@]/g,Pv=/#/g;function Dv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function xv(a){a.a||(a.a=new lv,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n=t[e].indexOf("="),r=null;if(0<=n){var i=t[e].substring(0,n);r=t[e].substring(n+1)}else i=t[e];o=i,s=r?decodeURIComponent(r.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function Lv(t,e){xv(t),e=jv(t,e),dv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,fv(t.a,e))}function Mv(t,e){return xv(t),e=jv(t,e),dv(t.a.b,e)}function Fv(t,e,n){Lv(t,e),0<n.length&&(t.c=null,t.a.set(jv(t,e),lp(n)),t.b+=n.length)}function Uv(t){var e=new Dv;return e.c=t.c,t.a&&(e.a=new lv(t.a),e.b=t.b),e}function jv(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Vv(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function qv(t){var e=t.a.F.a;if(null!=e)Fd(),e?(Fd(),ky(t.a,t,!1)):(Fd(),ky(t.a,t,!0));else{t.b=new Xd(t,void 0,void 0),t.b.h=t.h,e=xy(e=t.a,e.Y()?t.f:null,t.i),Fd(),Tv(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ev(e,n,r),ev(t.b,e,!1,t.f)}}function Bv(){this.a=this.b=null}function Wv(){this.a=new lv}function Kv(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[Zf]||(t[Zf]=++tp)):e.charAt(0)+t}function Hv(t,e){this.b=t,this.a=e}function Gv(t){this.g=t||zv,t=Kf.PerformanceNavigationTiming?0<(t=Kf.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Kf.ka&&Kf.ka.Da&&Kf.ka.Da()&&Kf.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Wv),this.b=null,this.c=[]}(qf=Dv.prototype).add=function(t,e){xv(this),this.c=null,t=jv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},qf.forEach=function(n,r){xv(this),this.a.forEach(function(t,e){cp(t,function(t){n.call(r,t,e,this)},this)},this)},qf.K=function(){xv(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},qf.C=function(t){xv(this);var e=[];if(Hf(t))Mv(this,t)&&(e=hp(e,this.a.get(jv(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=hp(e,t[n])}return e},qf.set=function(t,e){return xv(this),this.c=null,Mv(this,t=jv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},qf.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},qf.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},sp(function(){},function(){}),(qf=Vv.prototype).M=null,qf.$=function(t){return this.a.$(t)},qf.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},qf.Ca=function(){return!1},qf.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=gy(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=gy(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void Py(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Py(e,2)}else 1==this.M&&(this.g?Fd():"11111"==e?(Fd(),this.g=!0,(!Cp||10<=Number(Mp))&&(this.c=200,this.b.cancel(),Fd(),ky(this.a,this,!0))):(Fd(),this.g=!1))},qf.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,qv(this)):1==this.M&&(this.g?(Fd(),ky(this.a,this,!0)):(Fd(),ky(this.a,this,!1)));else{0!=this.M&&1!=this.M||Fd();var t=this.a;t.m=this.c,Py(t,2)}},qf.Y=function(){return this.a.Y()},qf.ma=function(){return this.a.ma()},Wv.prototype.add=function(t){this.a.set(Kv(t),t)},Wv.prototype.C=function(){return this.a.C()};var zv=10;function Qv(t,e){!t.a&&(vp(e,"spdy")||vp(e,"quic")||vp(e,"h2"))&&(t.f=t.g,t.a=new Wv,t.b&&($v(t,t.b),t.b=null))}function Yv(t){return t.b||t.a&&t.a.a.c>=t.f}function Xv(t){return t.b?1:t.a?t.a.a.c:0}function Jv(t,e){return t.b?t.b==e:!!t.a&&(e=Kv(e),dv(t.a.a.b,e))}function $v(t,e){t.a?t.a.add(e):t.b=e}function Zv(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Kv(e),n=dv(t.a.a.b,n)),n&&fv(t.a.a,Kv(e)))}function ty(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return lp(t.c);var e=t.c;return cp(t.a.C(),function(t){e=e.concat(t.j)}),e}function ey(){}function ny(){this.a=new ey}function ry(t,r,e){var i=e||"";try{hv(t,function(t,e){var n=t;$f(t)&&(n=fd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function iy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Gv.prototype.cancel=function(){var t;this.c=ty(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(cp(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},ey.prototype.stringify=function(t){return Kf.JSON.stringify(t,void 0)},ey.prototype.parse=function(t){return Kf.JSON.parse(t,void 0)};var oy=Kf.JSON.parse;function sy(t){hd.call(this),this.headers=new lv,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=ay,this.D=this.F=!1}sp(sy,hd);var ay="",uy=/^https?$/i,cy=["POST","PUT"];function hy(t){return"content-type"==t.toLowerCase()}function ly(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,fy(t),dy(t)}function fy(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function py(t){if(t.b&&void 0!==Wf&&(!t.s[1]||4!=yy(t)||2!=t.T()))if(t.l&&4==yy(t))Sd(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==yy(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(vv)[1]||null;if(!o&&Kf.self&&Kf.self.location){var s=Kf.self.location.protocol;o=s.substr(0,s.length-1)}i=!uy.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<yy(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",fy(t)}}finally{dy(t)}}}function dy(t,e){if(t.a){vy(t);var n=t.a,r=t.s[0]?Qf:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function vy(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Kf.clearTimeout(t.m),t.m=null)}function yy(t){return t.a?t.a.readyState:0}function gy(t,e){return t.a?t.a.getResponseHeader(e):null}function my(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;var i;if(i="",bp(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,Hf(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ev(t,e,n),t}function by(t){this.f=[],this.F=new Bv,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!zf("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=zf("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=zf("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=zf("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=zf("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Gv(t&&t.concurrentRequestLimit),this.ja=new ny,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function _y(t){if(wy(t),3==t.u){var e=t.P++,n=gv(t.B);Ev(n,"SID",t.H),Ev(n,"RID",e),Ev(n,"TYPE","terminate"),Sy(t,n),(e=new Xd(t,e,void 0)).F=2,e.f=Iv(gv(n)),n=!1,Kf.navigator&&Kf.navigator.sendBeacon&&(n=Kf.navigator.sendBeacon(e.f.toString(),"")),!n&&Kf.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=op(),iv(e)}Dy(t)}function wy(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(Kf.clearTimeout(t.l),t.l=null),Ry(t),t.b.cancel(),t.h&&(Gf(t.h)&&Kf.clearTimeout(t.h),t.h=null)}function Ey(t,e){t.f.push(new Hv(t.Qa++,e)),3==t.u&&Ty(t)}function Ty(t){Yv(t.b)||t.h||(t.h=!0,bd(t.Ha,t),t.A=0)}function Iy(t,e){var n;n=e?e.W:t.P++;var r=gv(t.B);Ev(r,"SID",t.H),Ev(r,"RID",n),Ev(r,"AID",t.O),Sy(t,r),t.g&&t.i&&my(r,t.g,t.i),n=new Xd(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Ny(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),$v(t.b,n),tv(n,r,e)}function Sy(t,n){t.c&&hv({},function(t,e){Ev(n,e,t)})}function Ny(t,e,n){n=Math.min(t.f.length,n);var r=t.c?rp(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{ry(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Cy(t){t.a||t.l||(t.S=1,bd(t.Ga,t),t.v=0)}function Ay(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=jd(rp(t.Ga,t),Oy(t,t.v)),t.v++,1)}function ky(t,e,n){var r=e.l;r&&Qv(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=xy(t,null,t.ha),Ty(t)}function Ry(t){null!=t.s&&(Kf.clearTimeout(t.s),t.s=null)}function Oy(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Py(t,e){if(2==e){var n=null;t.c&&(n=null);var r=rp(t.eb,t);n||(n=new yv("//www.google.com/images/cleardot.gif"),Kf.location&&"http"==Kf.location.protocol||mv(n,"https"),Iv(n)),function(t,e){var n=new Pd;if(Kf.Image){var r=new Image;r.onload=ip(iy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ip(iy,n,r,"TestLoadImage: error",!1,e),r.onabort=ip(iy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ip(iy,n,r,"TestLoadImage: timeout",!1,e),Kf.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Fd();t.u=0,t.c&&t.c.ta(e),Dy(t),wy(t)}function Dy(t){t.u=0,t.m=-1,t.c&&(0==ty(t.b).length&&0==t.f.length||(t.b.c.length=0,lp(t.f),t.f.length=0),t.c.sa())}function xy(t,e,n){var r,i,o,s,a,u,c=(r=n)instanceof yv?gv(r):new yv(r,void 0);if(""!=c.b)e&&bv(c,e+"."+c.b),_v(c,c.i);else{var h,l=Kf.location;h=e?e+"."+l.hostname:l.hostname,i=l.protocol,o=h,s=+l.port,a=n,u=new yv(null,void 0),i&&mv(u,i),o&&bv(u,o),s&&_v(u,s),a&&(u.a=a),c=u}return t.V&&bp(t.V,function(t,e){Ev(c,e,t)}),e=t.j,n=t.I,e&&n&&Ev(c,e,n),Ev(c,"VER",t.wa),Sy(t,c),c}function Ly(){}function My(){if(Cp&&!(10<=Number(Mp)))throw Error("Environmental error: no available transport.")}function Fy(t,e){hd.call(this),this.a=new by(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!fp(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fp(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Vy(this)}function Uy(t){zd.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function jy(){Qd.call(this),this.status=1}function Vy(t){this.a=t}(qf=sy.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Wd(this.H):Wd(Hd),this.a.onreadystatechange=rp(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void ly(this,t)}t=n||"";var i,o=new lv(this.headers);r&&hv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=hy,n=t.length,r=Hf(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:Hf(t)?t.charAt(e):t[e]}(o.K()),n=Kf.FormData&&t instanceof Kf.FormData,0<=up(cy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{vy(this),0<this.o&&((this.D=(i=this.a,Cp&&Up(9)&&Gf(i.timeout)&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=rp(this.Ba,this)):this.m=Sd(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ly(this,t)}},qf.Ba=function(){void 0!==Wf&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},qf.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),dy(this))},qf.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),dy(this,!0)),sy.N.G.call(this)},qf.Ea=function(){this.j||(this.w||this.l||this.g?py(this):this.Za())},qf.Za=function(){py(this)},qf.T=function(){try{return 2<yy(this)?this.a.status:-1}catch(t){return-1}},qf.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},qf.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oy(e)}},qf.ya=function(){return this.h},qf.Xa=function(){return Hf(this.f)?this.f:String(this.f)},(qf=by.prototype).wa=8,qf.u=1,qf.Ca=function(){return 0==this.u},qf.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new Xd(this,t,void 0),r=this.i;if(this.J&&(r?Ep(r=_p(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&Hf(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ny(this,n,e),Ev(i=gv(this.B),"RID",t),Ev(i,"CVER",22),this.o&&this.j&&Ev(i,"X-HTTP-Session-Id",this.j),Sy(this,i),this.g&&r&&my(i,this.g,r),$v(this.b,n),this.W?(Ev(i,"$req",e),Ev(i,"SID","null"),n.S=!0,tv(n,i,null)):tv(n,i,e),this.u=2}}else 3==this.u&&(t?Iy(this,t):0==this.f.length||Yv(this.b)||Iy(this))},qf.Ga=function(){this.l=null,this.a=new Xd(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=gv(this.pa);Ev(t,"RID","rpc"),Ev(t,"SID",this.H),Ev(t,"CI",this.ia?"0":"1"),Ev(t,"AID",this.O),Sy(this,t),Ev(t,"TYPE","xmlhttp"),this.g&&this.i&&my(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ev(this.a,t,!0,this.ga)},qf.Fa=function(t,e){if(0!=this.u&&(this.a==t||Jv(this.b,t)))if(this.m=t.o,!t.s&&Jv(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(Xf(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Ry(this),this.a.cancel(),this.a=null}Ay(this),Fd()}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=jd(rp(this.Ya,this),6e3));if(Xv(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else Py(this,11)}else if(!t.s&&this.a!=t||Ry(this),!fp(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&Gf(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=gy(r,"X-Client-Wire-Protocol"))&&Qv(this.b,i),this.j&&(r=gy(r,"X-HTTP-Session-Id")))&&(this.I=r,Ev(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=xy(this,this.Y()?this.ga:null,this.ha),r.s?(Zv(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(sv(r),iv(r)),this.a=r):Cy(this),0<this.f.length&&Ty(this)}else"stop"!=r[0]&&"close"!=r[0]||Py(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Py(this,7):_y(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},qf.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Ay(this),Fd())},qf.na=function(t){var e=null;if(this.a==t){Ry(this),this.a=null;var n=2}else{if(!Jv(this.b,t))return;e=t.j,Zv(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=op()-t.v,Dd.dispatchEvent(new Ud(Dd,t.l&&t.l.length,this.A)),Ty(this)):Cy(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){if(!(Xv(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.f=e.j.concat(t.f),1;if(!(1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)))return t.h=jd(rp(t.Ha,t,e),Oy(t,t.A)),t.A++,1}}(this,t)||2==n&&Ay(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Py(this,5);break;case 4:Py(this,10);break;case 3:Py(this,6);break;default:Py(this,2)}}},qf.eb=function(t){Fd()},qf.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new sy(this.Ka)).F=this.R,t},qf.ma=function(){return!!this.c&&!0},qf.Y=function(){return this.R},(qf=Ly.prototype).va=function(){},qf.ua=function(){},qf.ta=function(){},qf.sa=function(){},qf.Sa=function(){},My.prototype.a=function(t,e){return new Fy(t,e)},sp(Fy,hd),(qf=Fy.prototype).addEventListener=function(t,e,n,r){Fy.N.addEventListener.call(this,t,e,n,r)},qf.removeEventListener=function(t,e,n,r){Fy.N.removeEventListener.call(this,t,e,n,r)},qf.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Fd(),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new Vv(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=my(e,t.g,t.i)),(t=t.w).i=n,e=xy(t.a,null,t.i),Fd(),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,qv(t)):(Tv(e,"MODE","init"),!t.a.o&&t.a.j&&Tv(e,"X-HTTP-Session-Id",t.a.j),t.b=new Xd(t,void 0,void 0),t.b.h=t.h,ev(t.b,e,!1,null),t.M=0)},qf.close=function(){_y(this.a)},qf.Wa=function(t){if(Hf(t)){var e={};e.__data__=t,Ey(this.a,e)}else this.h?((e={}).__data__=fd(t),Ey(this.a,e)):Ey(this.a,t)},qf.G=function(){this.a.c=null,delete this.f,_y(this.a),delete this.a,Fy.N.G.call(this)},sp(Uy,zd),sp(jy,Qd),sp(Vy,Ly),Vy.prototype.va=function(){this.a.dispatchEvent("a")},Vy.prototype.ua=function(t){this.a.dispatchEvent(new Uy(t))},Vy.prototype.ta=function(t){this.a.dispatchEvent(new jy)},Vy.prototype.sa=function(){this.a.dispatchEvent("b")};var qy=ip(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},My);My.prototype.createWebChannel=My.prototype.a,Fy.prototype.send=Fy.prototype.Wa,Fy.prototype.open=Fy.prototype.Va,Fy.prototype.close=Fy.prototype.close,Vd.NO_ERROR=0,Vd.TIMEOUT=8,Vd.HTTP_ERROR=6,qd.COMPLETE="complete",(Kd.EventType=Gd).OPEN="a",Gd.CLOSE="b",Gd.ERROR="c",Gd.MESSAGE="d",hd.prototype.listen=hd.prototype.za,sy.prototype.listenOnce=sy.prototype.Aa,sy.prototype.getLastError=sy.prototype.Xa,sy.prototype.getLastErrorCode=sy.prototype.ya,sy.prototype.getStatus=sy.prototype.T,sy.prototype.getResponseJson=sy.prototype.Ua,sy.prototype.getResponseText=sy.prototype.aa,sy.prototype.send=sy.prototype.ca;var By={createWebChannelTransport:qy,ErrorCode:Vd,EventType:qd,WebChannel:Kd,XhrIo:sy},Wy=By.createWebChannelTransport,Ky=By.ErrorCode,Hy=By.EventType,Gy=By.WebChannel,zy=By.XhrIo,Qy=Fl.SDK_VERSION,Yy=(Xy.prototype.t=function(){return null!=this.uid},Xy.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},Xy.prototype.isEqual=function(t){return t.uid===this.uid},Xy);function Xy(t){this.uid=t}function Jy(t,e){this.user=e,this.type="OAuth",this.h={},this.h.Authorization="Bearer "+t}Yy.UNAUTHENTICATED=new Yy(null),Yy.i=new Yy("google-credentials-uid"),Yy.o=new Yy("first-party-uid");var $y,Zy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},tg=(fs(pg,$y=Error),pg),eg=(fg.prototype.getToken=function(){return Promise.resolve(null)},fg.prototype._=function(){},fg.prototype.l=function(t){(this.u=t)(Yy.UNAUTHENTICATED)},fg.prototype.T=function(){this.u=null},fg),ng=(lg.prototype.getToken=function(){var e=this,n=this.R,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){if(e.R!==n)throw new tg(Zy.ABORTED,"getToken aborted due to token change.");return t?(D_("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new Jy(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},lg.prototype._=function(){this.forceRefresh=!0},lg.prototype.l=function(t){this.u=t,this.I&&t(this.currentUser)},lg.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.m),this.m=null,this.u=null},lg.prototype.A=function(){var t=this.auth&&this.auth.getUid();return D_(null===t||"string"==typeof t,"Received invalid UID: "+t),new Yy(t)},lg),rg=(Object.defineProperty(hg.prototype,"h",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),hg),ig=(cg.prototype.getToken=function(){return Promise.resolve(new rg(this.P,this.V))},cg.prototype.l=function(t){t(Yy.o)},cg.prototype.T=function(){},cg.prototype._=function(){},cg),og=(ug.now=function(){return ug.fromMillis(Date.now())},ug.fromDate=function(t){return ug.fromMillis(t.getTime())},ug.fromMillis=function(t){var e=Math.floor(t/1e3);return new ug(e,1e6*(t-1e3*e))},ug.prototype.toDate=function(){return new Date(this.toMillis())},ug.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ug.prototype.p=function(t){return this.seconds===t.seconds?M_(this.nanoseconds,t.nanoseconds):M_(this.seconds,t.seconds)},ug.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},ug.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ug.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},ug),sg=(ag.v=function(t){return new ag(t)},ag.S=function(){return ag.MIN},ag.prototype.D=function(t){return this.timestamp.p(t.timestamp)},ag.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},ag.prototype.C=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},ag.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},ag.prototype.k=function(){return this.timestamp},ag);function ag(t){this.timestamp=t}function ug(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new tg(Zy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new tg(Zy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new tg(Zy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new tg(Zy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function cg(t,e){this.P=t,this.V=e}function hg(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=Yy.o}function lg(t){var e=this;this.m=null,this.currentUser=Yy.UNAUTHENTICATED,this.I=!1,this.R=0,this.u=null,this.forceRefresh=!1,this.m=function(){e.R++,e.currentUser=e.A(),e.I=!0,e.u&&e.u(e.currentUser)},this.R=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.m):(this.m(null),t.get().then(function(t){e.auth=t,e.m&&e.auth.addAuthTokenListener(e.m)},function(){}))}function fg(){this.u=null}function pg(t,e){var n=this;return(n=$y.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}sg.MIN=new sg(new og(0,0));var dg,vg=(Object.defineProperty(mg.prototype,"length",{get:function(){return this.N},enumerable:!0,configurable:!0}),mg.prototype.isEqual=function(t){return 0===mg.F(this,t)},mg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof mg?t.forEach(function(t){e.push(t)}):e.push(t),this.$(e)},mg.prototype.limit=function(){return this.offset+this.length},mg.prototype.M=function(t){return t=void 0===t?1:t,this.$(this.segments,this.offset+t,this.length-t)},mg.prototype.L=function(){return this.$(this.segments,this.offset,this.length-1)},mg.prototype.O=function(){return this.segments[this.offset]},mg.prototype.B=function(){return this.get(this.length-1)},mg.prototype.get=function(t){return this.segments[this.offset+t]},mg.prototype.U=function(){return 0===this.length},mg.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},mg.prototype.W=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},mg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},mg.prototype.j=function(){return this.segments.slice(this.offset,this.limit())},mg.F=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},mg),yg=(fs(gg,dg=vg),gg.prototype.$=function(t,e,n){return new gg(t,e,n)},gg.prototype.K=function(){return this.j().join("/")},gg.prototype.toString=function(){return this.K()},gg.G=function(t){if(0<=t.indexOf("//"))throw new tg(Zy.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new gg(t.split("/").filter(function(t){return 0<t.length}))},gg);function gg(){return null!==dg&&dg.apply(this,arguments)||this}function mg(t,e,n){void 0===e?e=0:e>t.length&&P_("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&P_("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.N=n}yg.H=new yg([]);var bg,_g=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wg=(fs(Eg,bg=vg),Eg.prototype.$=function(t,e,n){return new Eg(t,e,n)},Eg.J=function(t){return _g.test(t)},Eg.prototype.K=function(){return this.j().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Eg.J(t)||(t="`"+t+"`"),t}).join(".")},Eg.prototype.toString=function(){return this.K()},Eg.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},Eg.X=function(){return new Eg(["__name__"])},Eg.Z=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new tg(Zy.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new tg(Zy.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new tg(Zy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new tg(Zy.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Eg(e)},Eg);function Eg(){return null!==bg&&bg.apply(this,arguments)||this}wg.H=new wg([]);var Tg=(Ig.tt=function(t){return new Ig(yg.G(t).M(5))},Ig.prototype.et=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ig.prototype.isEqual=function(t){return null!==t&&0===yg.F(this.path,t.path)},Ig.prototype.toString=function(){return this.path.toString()},Ig.F=function(t,e){return yg.F(t.path,e.path)},Ig.st=function(t){return t.length%2==0},Ig.nt=function(t){return new Ig(new yg(t.slice()))},Ig);function Ig(t){this.path=t}Tg.EMPTY=new Tg(new yg([]));var Sg=(Rg.prototype.it=function(t,e){return new Rg(this.F,this.root.it(t,e,this.F).rt(null,null,Cg.ot,null,null))},Rg.prototype.remove=function(t){return new Rg(this.F,this.root.remove(t,this.F).rt(null,null,Cg.ot,null,null))},Rg.prototype.get=function(t){for(var e=this.root;!e.U();){var n=this.F(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Rg.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.U();){var r=this.F(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Rg.prototype.U=function(){return this.root.U()},Object.defineProperty(Rg.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Rg.prototype.ht=function(){return this.root.ht()},Rg.prototype.at=function(){return this.root.at()},Rg.prototype.ut=function(t){return this.root.ut(t)},Rg.prototype.forEach=function(n){this.ut(function(t,e){return n(t,e),!1})},Rg.prototype.toString=function(){var n=[];return this.ut(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Rg.prototype.ct=function(t){return this.root.ct(t)},Rg.prototype._t=function(){return new Ng(this.root,null,this.F,!1)},Rg.prototype.lt=function(t){return new Ng(this.root,t,this.F,!1)},Rg.prototype.dt=function(){return new Ng(this.root,null,this.F,!0)},Rg.prototype.ft=function(t){return new Ng(this.root,t,this.F,!0)},Rg),Ng=(kg.prototype.wt=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.U();)this.Et.push(t),t=t.right;else for(t=t.right;!t.U();)this.Et.push(t),t=t.left;return e},kg.prototype.It=function(){return 0<this.Et.length},kg.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},kg),Cg=(Ag.prototype.rt=function(t,e,n,r,i){return new Ag(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ag.prototype.U=function(){return!1},Ag.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},Ag.prototype.ct=function(t){return this.right.ct(t)||t(this.key,this.value)||this.left.ct(t)},Ag.prototype.min=function(){return this.left.U()?this:this.left.min()},Ag.prototype.ht=function(){return this.min().key},Ag.prototype.at=function(){return this.right.U()?this.key:this.right.at()},Ag.prototype.it=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.rt(null,null,null,r.left.it(t,e,n),null):0===i?r.rt(null,e,null,null,null):r.rt(null,null,null,null,r.right.it(t,e,n))).At()},Ag.prototype.Pt=function(){if(this.left.U())return Ag.EMPTY;var t=this;return t.left.Vt()||t.left.left.Vt()||(t=t.gt()),(t=t.rt(null,null,null,t.left.Pt(),null)).At()},Ag.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.U()||r.left.Vt()||r.left.left.Vt()||(r=r.gt()),r=r.rt(null,null,null,r.left.remove(t,e),null);else{if(r.left.Vt()&&(r=r.pt()),r.right.U()||r.right.Vt()||r.right.left.Vt()||(r=r.yt()),0===e(t,r.key)){if(r.right.U())return Ag.EMPTY;n=r.right.min(),r=r.rt(n.key,n.value,null,null,r.right.Pt())}r=r.rt(null,null,null,null,r.right.remove(t,e))}return r.At()},Ag.prototype.Vt=function(){return this.color},Ag.prototype.At=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.left.left.Vt()&&(t=t.pt()),t.left.Vt()&&t.right.Vt()&&(t=t.vt()),t},Ag.prototype.gt=function(){var t=this.vt();return t.right.left.Vt()&&(t=(t=(t=t.rt(null,null,null,null,t.right.pt())).bt()).vt()),t},Ag.prototype.yt=function(){var t=this.vt();return t.left.left.Vt()&&(t=(t=t.pt()).vt()),t},Ag.prototype.bt=function(){var t=this.rt(null,null,Ag.RED,null,this.right.left);return this.right.rt(null,null,this.color,t,null)},Ag.prototype.pt=function(){var t=this.rt(null,null,Ag.RED,this.left.right,null);return this.left.rt(null,null,this.color,null,t)},Ag.prototype.vt=function(){var t=this.left.rt(null,null,!this.left.color,null,null),e=this.right.rt(null,null,!this.right.color,null,null);return this.rt(null,null,!this.color,t,e)},Ag.prototype.St=function(){var t=this.Dt();return Math.pow(2,t)<=this.size+1},Ag.prototype.Dt=function(){if(this.Vt()&&this.left.Vt())throw P_("Red node has red child("+this.key+","+this.value+")");if(this.right.Vt())throw P_("Right child of ("+this.key+","+this.value+") is red");var t=this.left.Dt();if(t!==this.right.Dt())throw P_("Black depths differ");return t+(this.Vt()?0:1)},Ag);function Ag(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ag.RED,this.left=null!=r?r:Ag.EMPTY,this.right=null!=i?i:Ag.EMPTY,this.size=this.left.size+1+this.right.size}function kg(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.U();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}function Rg(t,e){this.F=t,this.root=e||Cg.EMPTY}function Og(){this.size=0}Cg.EMPTY=null,Cg.RED=!0,Cg.ot=!1,Cg.EMPTY=(Object.defineProperty(Og.prototype,"key",{get:function(){throw P_("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Og.prototype,"value",{get:function(){throw P_("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Og.prototype,"color",{get:function(){throw P_("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Og.prototype,"left",{get:function(){throw P_("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Og.prototype,"right",{get:function(){throw P_("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Og.prototype.rt=function(t,e,n,r,i){return this},Og.prototype.it=function(t,e,n){return new Cg(t,e)},Og.prototype.remove=function(t,e){return this},Og.prototype.U=function(){return!0},Og.prototype.ut=function(t){return!1},Og.prototype.ct=function(t){return!1},Og.prototype.ht=function(){return null},Og.prototype.at=function(){return null},Og.prototype.Vt=function(){return!1},Og.prototype.St=function(){return!0},Og.prototype.Dt=function(){return 0},new Og);var Pg=(Lg.prototype.has=function(t){return null!==this.data.get(t)},Lg.prototype.first=function(){return this.data.ht()},Lg.prototype.last=function(){return this.data.at()},Object.defineProperty(Lg.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Lg.prototype.indexOf=function(t){return this.data.indexOf(t)},Lg.prototype.forEach=function(n){this.data.ut(function(t,e){return n(t),!1})},Lg.prototype.Ct=function(t,e){for(var n=this.data.lt(t[0]);n.It();){var r=n.wt();if(0<=this.F(r.key,t[1]))return;e(r.key)}},Lg.prototype.kt=function(t,e){var n;for(n=void 0!==e?this.data.lt(e):this.data._t();n.It();)if(!t(n.wt().key))return},Lg.prototype.Nt=function(t){var e=this.data.lt(t);return e.It()?e.wt().key:null},Lg.prototype._t=function(){return new Dg(this.data._t())},Lg.prototype.lt=function(t){return new Dg(this.data.lt(t))},Lg.prototype.add=function(t){return this.rt(this.data.remove(t).it(t,!0))},Lg.prototype.delete=function(t){return this.has(t)?this.rt(this.data.remove(t)):this},Lg.prototype.U=function(){return this.data.U()},Lg.prototype.Ft=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Lg.prototype.isEqual=function(t){if(!(t instanceof Lg))return!1;if(this.size!==t.size)return!1;for(var e=this.data._t(),n=t.data._t();e.It();){var r=e.wt().key,i=n.wt().key;if(0!==this.F(r,i))return!1}return!0},Lg.prototype.j=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Lg.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Lg.prototype.rt=function(t){var e=new Lg(this.F);return e.data=t,e},Lg),Dg=(xg.prototype.wt=function(){return this.$t.wt().key},xg.prototype.It=function(){return this.$t.It()},xg);function xg(t){this.$t=t}function Lg(t){this.F=t,this.data=new Sg(this.F)}function Mg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ug(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var jg=(Vg.fromBase64String=function(t){return new Vg(I_.Lt().atob(t))},Vg.fromUint8Array=function(t){return new Vg(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Vg.prototype.toBase64=function(){return I_.Lt().btoa(this.Mt)},Vg.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Mt)},Vg.prototype.Ot=function(){return 2*this.Mt.length},Vg.prototype.D=function(t){return M_(this.Mt,t.Mt)},Vg.prototype.isEqual=function(t){return this.Mt===t.Mt},Vg);function Vg(t){this.Mt=t}function qg(t){return null==t}function Bg(t){return-0===t&&1/t==-1/0}function Wg(t){return"number"==typeof t&&Number.isInteger(t)&&!Bg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Kg(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hg(t){var e=Zg(t.mapValue.fields.__local_write_time__.timestampValue);return new og(e.seconds,e.nanos)}jg.xt=new jg("");var Gg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kg(t)?4:10:P_("Invalid value type: "+JSON.stringify(t))}function Qg(i,t){var e,n,r,o=zg(i);if(o!==zg(t))return!1;switch(o){case 0:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Hg(i).isEqual(Hg(t));case 3:return function(t){if("string"==typeof i.timestampValue&&"string"==typeof t.timestampValue&&i.timestampValue.length===t.timestampValue.length)return i.timestampValue===t.timestampValue;var e=Zg(i.timestampValue),n=Zg(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(t);case 5:return i.stringValue===t.stringValue;case 6:return r=t,em(i.bytesValue).isEqual(em(r.bytesValue));case 7:return i.referenceValue===t.referenceValue;case 8:return n=t,tm((e=i).geoPointValue.latitude)===tm(n.geoPointValue.latitude)&&tm(e.geoPointValue.longitude)===tm(n.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return tm(t.integerValue)===tm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=tm(t.doubleValue),r=tm(e.doubleValue);return n===r?Bg(n)===Bg(r):isNaN(n)&&isNaN(r)}return!1}(i,t);case 9:return F_(i.arrayValue.values||[],t.arrayValue.values||[],Qg);case 10:return function(t){var e=i.mapValue.fields||{},n=t.mapValue.fields||{};if(Mg(e)!==Mg(n))return!1;for(var r in e)if(e.hasOwnProperty(r)&&(void 0===n[r]||!Qg(e[r],n[r])))return!1;return!0}(t);default:return P_("Unexpected value type: "+JSON.stringify(i))}}function Yg(t,e){return void 0!==(t.values||[]).find(function(t){return Qg(t,e)})}function Xg(t,e){var n,r,i,o,s,a,u,c,h,l,f=zg(t),p=zg(e);if(f!==p)return M_(f,p);switch(f){case 0:return 0;case 1:return M_(t.booleanValue,e.booleanValue);case 2:return c=e,(h=tm(t.integerValue||t.doubleValue))<(l=tm(c.integerValue||c.doubleValue))?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return Jg(t.timestampValue,e.timestampValue);case 4:return Jg(Hg(t),Hg(e));case 5:return M_(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=em(o),u=em(s),a.D(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=M_(n[i],r[i]);if(0!==o)return o}return M_(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=M_(tm(n.latitude),tm(r.latitude)))?i:M_(tm(n.longitude),tm(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xg(n[i],r[i]);if(o)return o}return M_(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=M_(r[s],o[s]);if(0!==a)return a;var u=Xg(n[r[s]],i[o[s]]);if(0!==u)return u}return M_(r.length,o.length)}(t.mapValue,e.mapValue);default:throw P_("Invalid value type: "+f)}}function Jg(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return M_(t,e);var n=Zg(t),r=Zg(e),i=M_(n.seconds,r.seconds);return 0!==i?i:M_(n.nanos,r.nanos)}function $g(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=Zg(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?em(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,Tg.tt(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):P_("Invalid value type: "+JSON.stringify(i));var t,e,n}(t)}function Zg(t){if(D_(!!t,"Cannot normalize null or undefined timestamp."),"string"!=typeof t)return{seconds:tm(t.seconds),nanos:tm(t.nanos)};var e=0,n=Gg.exec(t);if(D_(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}function tm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function em(t){return"string"==typeof t?jg.fromBase64String(t):jg.fromUint8Array(t)}function nm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.K()}}function rm(t){return t&&"integerValue"in t}function im(t){return!!t&&"arrayValue"in t}function om(t){return t&&"nullValue"in t}function sm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function am(t){return t&&"mapValue"in t}var um=(cm.prototype.Bt=function(t,e){return n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},t&&(n.fields.__previous_value__=t),{mapValue:n};var n},cm.prototype.Ut=function(t,e){return e},cm.prototype.qt=function(t){return null},cm.prototype.isEqual=function(t){return t instanceof cm},cm);function cm(){}um.instance=new um;var hm=(vm.prototype.Bt=function(t,e){return this.apply(t)},vm.prototype.Ut=function(t,e){return this.apply(t)},vm.prototype.apply=function(t){for(var n=ym(t),e=function(e){n.some(function(t){return Qg(t,e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++)e(i[r]);return{arrayValue:{values:n}}},vm.prototype.qt=function(t){return null},vm.prototype.isEqual=function(t){return t instanceof vm&&F_(this.elements,t.elements,Qg)},vm),lm=(dm.prototype.Bt=function(t,e){return this.apply(t)},dm.prototype.Ut=function(t,e){return this.apply(t)},dm.prototype.apply=function(t){for(var n=ym(t),e=function(e){n=n.filter(function(t){return!Qg(t,e)})},r=0,i=this.elements;r<i.length;r++)e(i[r]);return{arrayValue:{values:n}}},dm.prototype.qt=function(t){return null},dm.prototype.isEqual=function(t){return t instanceof dm&&F_(this.elements,t.elements,Qg)},dm),fm=(pm.prototype.Bt=function(t,e){var n=this.qt(t),r=this.asNumber(n)+this.asNumber(this.Qt);return rm(n)&&rm(this.Qt)?this.serializer.Wt(r):this.serializer.jt(r)},pm.prototype.Ut=function(t,e){return e},pm.prototype.qt=function(t){return rm(e=t)||e&&"doubleValue"in e?t:{integerValue:0};var e},pm.prototype.isEqual=function(t){return t instanceof pm&&Qg(this.Qt,t.Qt)},pm.prototype.asNumber=function(t){return tm(t.integerValue||t.doubleValue)},pm);function pm(t,e){this.serializer=t,this.Qt=e}function dm(t){this.elements=t}function vm(t){this.elements=t}function ym(t){return im(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gm(t,e){this.version=t,this.transformResults=e}var mm=(Tm.Kt=function(t){return new Tm(t)},Tm.Gt=function(t){var e=new Pg(wg.F);return t.forEach(function(t){return e=e.add(t)}),new Tm(e)},Tm.prototype.zt=function(e){var n=!1;return this.fields.forEach(function(t){t.q(e)&&(n=!0)}),n},Tm.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},Tm),bm=(Em.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},Em),_m=(wm.exists=function(t){return new wm(void 0,t)},wm.updateTime=function(t){return new wm(t)},Object.defineProperty(wm.prototype,"Ht",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),wm.prototype.Jt=function(t){return void 0!==this.updateTime?t instanceof Qm&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof Qm},wm.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},wm);function wm(t,e){this.updateTime=t,this.exists=e}function Em(t,e){this.field=t,this.transform=e}function Tm(t){this.fields=t}_m.NONE=new _m;var Im,Sm,Nm,Cm,Am,km=(Bm.prototype.Yt=function(t){},Bm.Xt=function(t){return t instanceof Qm?t.version:sg.MIN},Bm),Rm=(fs(qm,Am=km),qm.prototype.Ut=function(t,e){this.Yt(t);var n=e.version;return new Qm(this.key,n,this.value,{hasCommittedMutations:!0})},qm.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=km.Xt(t);return new Qm(this.key,r,this.value,{te:!0})},qm.prototype.ee=function(t){return null},qm.prototype.isEqual=function(t){return t instanceof qm&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Zt.isEqual(t.Zt)},qm),Om=(fs(Vm,Cm=km),Vm.prototype.Ut=function(t,e){if(this.Yt(t),!this.Zt.Jt(t))return new Xm(this.key,e.version);var n=this.ne(t);return new Qm(this.key,e.version,n,{hasCommittedMutations:!0})},Vm.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=km.Xt(t),i=this.ne(t);return new Qm(this.key,r,i,{te:!0})},Vm.prototype.ee=function(t){return null},Vm.prototype.isEqual=function(t){return t instanceof Vm&&this.key.isEqual(t.key)&&this.se.isEqual(t.se)&&this.Zt.isEqual(t.Zt)},Vm.prototype.ne=function(t){var e;return e=t instanceof Qm?t.data():Lm.EMPTY,this.ie(e)},Vm.prototype.ie=function(t){var n=this,r=t.re();return this.se.fields.forEach(function(t){if(!t.U()){var e=n.data.field(t);null!==e?r.set(t,e):r.delete(t)}}),r.oe()},Vm),Pm=(fs(jm,Nm=km),jm.prototype.Ut=function(t,e){if(this.Yt(t),D_(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.Zt.Jt(t))return new Xm(this.key,e.version);var n=this.he(t),r=this.ae(t,e.transformResults),i=e.version,o=this.ue(n.data(),r);return new Qm(this.key,i,o,{hasCommittedMutations:!0})},jm.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=this.he(t),i=this.ce(n,t,e),o=this.ue(r.data(),i);return new Qm(this.key,r.version,o,{te:!0})},jm.prototype.ee=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Qm?t.field(i.field):void 0,s=i.transform.qt(o||null);null!=s&&(e=null==e?Lm._e().set(i.field,s):e.set(i.field,s))}return e?e.oe():null},jm.prototype.isEqual=function(t){return t instanceof jm&&this.key.isEqual(t.key)&&F_(this.fieldTransforms,t.fieldTransforms,function(t,e){return t.isEqual(e)})&&this.Zt.isEqual(t.Zt)},jm.prototype.he=function(t){return t},jm.prototype.ae=function(t,e){var n=[];D_(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof Qm&&(s=t.field(i.field)),n.push(o.Ut(s,e[r]))}return n},jm.prototype.ce=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof Qm&&(u=e.field(s.field)),null===u&&n instanceof Qm&&(u=n.field(s.field)),r.push(a.Bt(u,t))}return r},jm.prototype.ue=function(t,e){for(var n=t.re(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.oe()},jm),Dm=(fs(Um,Sm=km),Um.prototype.Ut=function(t,e){return this.Yt(t),new Ym(this.key,e.version,{hasCommittedMutations:!0})},Um.prototype.Bt=function(t,e,n){return this.Yt(t),this.Zt.Jt(t)?new Ym(this.key,sg.S()):t},Um.prototype.ee=function(t){return null},Um.prototype.isEqual=function(t){return t instanceof Um&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},Um),xm=(fs(Fm,Im=km),Fm.prototype.Ut=function(t,e){P_("VerifyMutation should only be used in Transactions.")},Fm.prototype.Bt=function(t,e,n){P_("VerifyMutation should only be used in Transactions.")},Fm.prototype.ee=function(t){P_("VerifyMutation should only be used in Transactions.")},Fm.prototype.isEqual=function(t){return t instanceof Fm&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},Fm),Lm=(Mm._e=function(){return Mm.EMPTY.re()},Mm.prototype.field=function(t){if(t.U())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!am(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.B()])||null},Mm.prototype.se=function(){return this.le(this.proto.mapValue)},Mm.prototype.le=function(t){var i=this,o=new Pg(wg.F);return Fg(t.fields||{},function(t,e){var n=new wg([t]);if(10===zg(e)){var r=i.le(e.mapValue).fields;r.U()?o=o.add(n):r.forEach(function(t){o=o.add(n.child(t))})}else o=o.add(n)}),mm.Kt(o)},Mm.prototype.isEqual=function(t){return Qg(this.proto,t.proto)},Mm.prototype.re=function(){return new Gm(this)},Mm);function Mm(t){this.proto=t}function Fm(t,e){var n=this;return(n=Im.call(this)||this).key=t,n.Zt=e,n.type=4,n}function Um(t,e){var n=this;return(n=Sm.call(this)||this).key=t,n.Zt=e,n.type=3,n}function jm(t,e){var n=this;return(n=Nm.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Zt=_m.exists(!0),n}function Vm(t,e,n,r){var i=this;return(i=Cm.call(this)||this).key=t,i.data=e,i.se=n,i.Zt=r,i.type=1,i}function qm(t,e,n){var r=this;return(r=Am.call(this)||this).key=t,r.value=e,r.Zt=n,r.type=0,r}function Bm(){}Lm.EMPTY=new Lm({mapValue:{}});var Wm,Km,Hm,Gm=(ab.prototype.set=function(t,e){return this.Te(t,e),this},ab.prototype.delete=function(t){return this.Te(t,null),this},ab.prototype.Te=function(t,e){for(var n=this.fe,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===zg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.B(),e)},ab.prototype.oe=function(){var t=this.me(wg.H,this.fe);return null!=t?new Lm(t):this.de},ab.prototype.me=function(r,t){var i=this,o=!1,e=this.de.field(r),s=am(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){if(t instanceof Map){var n=i.me(r.child(e),t);null!=n&&(s[e]=n,o=!0)}else null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},ab),zm=(sb.Ee=function(t,e){return Tg.F(t.key,e.key)},sb),Qm=(fs(ob,Hm=zm),ob.prototype.field=function(t){return this.we.field(t)},ob.prototype.data=function(){return this.we},ob.prototype.Ie=function(){return this.we.proto},ob.prototype.isEqual=function(t){return t instanceof ob&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.te===t.te&&this.hasCommittedMutations===t.hasCommittedMutations&&this.we.isEqual(t.we)},ob.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.we.toString()+", {hasLocalMutations: "+this.te+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(ob.prototype,"hasPendingWrites",{get:function(){return this.te||this.hasCommittedMutations},enumerable:!0,configurable:!0}),ob.Re=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Xg(r,i):P_("Trying to compare documents on fields that don't exist")},ob),Ym=(fs(ib,Km=zm),ib.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(ib.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),ib.prototype.isEqual=function(t){return t instanceof ib&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},ib),Xm=(fs(rb,Wm=zm),rb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(rb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),rb.prototype.isEqual=function(t){return t instanceof rb&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},rb),Jm=(nb.prototype.canonicalId=function(){if(null===this.Ae){var t=this.path.K();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map(function(t){return t.canonicalId()}).join(","),t+="|ob:",t+=this.orderBy.map(function(t){return t.canonicalId()}).join(","),qg(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.Ae=t}return this.Ae},nb.prototype.toString=function(){var t=this.path.K();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),qg(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},nb.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},nb.prototype.Pe=function(){return Tg.st(this.path)&&null===this.collectionGroup&&0===this.filters.length},nb),$m=(eb.ve=function(t){return new eb(t)},Object.defineProperty(eb.prototype,"orderBy",{get:function(){if(null===this.pe){var t=this.Se(),e=this.De();if(null!==t&&null===e)t.Y()?this.pe=[Db]:this.pe=[new Pb(t),Db];else{for(var n=!(this.pe=[]),r=0,i=this.Ve;r<i.length;r++){var o=i[r];this.pe.push(o),o.field.Y()&&(n=!0)}if(!n){var s=0<this.Ve.length?this.Ve[this.Ve.length-1].dir:_b.ASCENDING;this.pe.push(s===_b.ASCENDING?Db:xb)}}}return this.pe},enumerable:!0,configurable:!0}),eb.prototype.Ce=function(t){var e=this.filters.concat([t]);return new eb(this.path,this.collectionGroup,this.Ve.slice(),e,this.limit,this.ge,this.startAt,this.endAt)},eb.prototype.ke=function(t){var e=this.Ve.concat([t]);return new eb(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},eb.prototype.Ne=function(t){return new eb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},eb.prototype.Fe=function(t){return new eb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},eb.prototype.$e=function(t){return new eb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,t,this.endAt)},eb.prototype.Me=function(t){return new eb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,t)},eb.prototype.Le=function(t){return new eb(t,null,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},eb.prototype.Oe=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Ve.length||1===this.Ve.length&&this.Ve[0].field.Y())},eb.prototype.canonicalId=function(){return this.xe().canonicalId()+"|lt:"+this.ge},eb.prototype.toString=function(){return"Query(target="+this.xe().toString()+"; limitType="+this.ge+")"},eb.prototype.isEqual=function(t){return this.xe().isEqual(t.xe())&&this.ge===t.ge},eb.prototype.Be=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},eb.prototype.matches=function(t){return this.Ue(t)&&this.qe(t)&&this.Qe(t)&&this.We(t)},eb.prototype.je=function(){return!qg(this.limit)&&"F"===this.ge},eb.prototype.Ke=function(){return!qg(this.limit)&&"L"===this.ge},eb.prototype.De=function(){return 0<this.Ve.length?this.Ve[0].field:null},eb.prototype.Se=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof db&&n.Ge())return n.field}return null},eb.prototype.ze=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof db&&0<=t.indexOf(r.op))return r.op}return null},eb.prototype.Pe=function(){return this.xe().Pe()},eb.prototype.He=function(){return null!==this.collectionGroup},eb.prototype.xe=function(){if(!this.ye)if("F"===this.ge)this.ye=new Jm(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===_b.DESCENDING?_b.ASCENDING:_b.DESCENDING;t.push(new Pb(r.field,i))}var o=this.endAt?new Ob(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Ob(this.startAt.position,!this.startAt.before):null;this.ye=new Jm(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.ye},eb.prototype.Ue=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.et(this.collectionGroup)&&this.path.q(e):Tg.st(this.path)?this.path.isEqual(e):this.path.W(e)},eb.prototype.qe=function(t){for(var e=0,n=this.Ve;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},eb.prototype.Qe=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},eb.prototype.We=function(t){return!(this.startAt&&!this.startAt.Je(this.orderBy,t)||this.endAt&&this.endAt.Je(this.orderBy,t))},eb.prototype.be=function(t){},eb),Zm=(tb.G=function(t){switch(t){case"<":return tb.LESS_THAN;case"<=":return tb.LESS_THAN_OR_EQUAL;case"==":return tb.EQUAL;case">=":return tb.GREATER_THAN_OR_EQUAL;case">":return tb.GREATER_THAN;case"array-contains":return tb.ARRAY_CONTAINS;case"in":return tb.IN;case"array-contains-any":return tb.ARRAY_CONTAINS_ANY;default:return P_("Unknown FieldFilter operator: "+t)}},tb.prototype.toString=function(){return this.name},tb.prototype.isEqual=function(t){return this.name===t.name},tb);function tb(t){this.name=t}function eb(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Ve=n,this.filters=r,this.limit=i,this.ge=o,this.startAt=s,this.endAt=a,this.pe=null,this.ye=null,this.startAt&&this.be(this.startAt),this.endAt&&this.be(this.endAt)}function nb(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Ae=null}function rb(){return null!==Wm&&Wm.apply(this,arguments)||this}function ib(t,e,n){var r=this;return(r=Km.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function ob(t,e,n,r){var i=this;return(i=Hm.call(this,t,e)||this).we=n,i.te=!!r.te,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function sb(t,e){this.key=t,this.version=e}function ab(t){this.de=t,this.fe=new Map}Zm.LESS_THAN=new Zm("<"),Zm.LESS_THAN_OR_EQUAL=new Zm("<="),Zm.EQUAL=new Zm("=="),Zm.GREATER_THAN=new Zm(">"),Zm.GREATER_THAN_OR_EQUAL=new Zm(">="),Zm.ARRAY_CONTAINS=new Zm("array-contains"),Zm.IN=new Zm("in"),Zm.ARRAY_CONTAINS_ANY=new Zm("array-contains-any");var ub,cb,hb,lb,fb,pb,db=(fs(Cb,pb=function(){}),Cb.create=function(t,e,n){if(t.Y())return e===Zm.IN?new yb(t,n):new vb(t,e,n);if(om(n)){if(e!==Zm.EQUAL)throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Cb(t,e,n)}if(sm(n)){if(e!==Zm.EQUAL)throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Cb(t,e,n)}return e===Zm.ARRAY_CONTAINS?new gb(t,n):e===Zm.IN?new mb(t,n):e===Zm.ARRAY_CONTAINS_ANY?new bb(t,n):new Cb(t,e,n)},Cb.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&zg(this.value)===zg(e)&&this.Ye(Xg(e,this.value))},Cb.prototype.Ye=function(t){switch(this.op){case Zm.LESS_THAN:return t<0;case Zm.LESS_THAN_OR_EQUAL:return t<=0;case Zm.EQUAL:return 0===t;case Zm.GREATER_THAN:return 0<t;case Zm.GREATER_THAN_OR_EQUAL:return 0<=t;default:return P_("Unknown FieldFilter operator: "+this.op)}},Cb.prototype.Ge=function(){return 0<=[Zm.LESS_THAN,Zm.LESS_THAN_OR_EQUAL,Zm.GREATER_THAN,Zm.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Cb.prototype.canonicalId=function(){return this.field.K()+this.op.toString()+$g(this.value)},Cb.prototype.isEqual=function(t){return t instanceof Cb&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&Qg(this.value,t.value)},Cb.prototype.toString=function(){return this.field.K()+" "+this.op+" "+$g(this.value)},Cb),vb=(fs(Nb,fb=db),Nb.prototype.matches=function(t){var e=Tg.F(t.key,this.key);return this.Ye(e)},Nb),yb=(fs(Sb,lb=db),Sb.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Sb),gb=(fs(Ib,hb=db),Ib.prototype.matches=function(t){var e=t.field(this.field);return im(e)&&Yg(e.arrayValue,this.value)},Ib),mb=(fs(Tb,cb=db),Tb.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Yg(this.value.arrayValue,e)},Tb),bb=(fs(Eb,ub=db),Eb.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!im(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Yg(e.value.arrayValue,t)})},Eb),_b=(wb.prototype.toString=function(){return this.name},wb);function wb(t){this.name=t}function Eb(t,e){return ub.call(this,t,Zm.ARRAY_CONTAINS_ANY,e)||this}function Tb(t,e){return cb.call(this,t,Zm.IN,e)||this}function Ib(t,e){return hb.call(this,t,Zm.ARRAY_CONTAINS,e)||this}function Sb(t,e){var n=this;return(n=lb.call(this,t,Zm.IN,e)||this).keys=(e.arrayValue.values||[]).map(function(t){return Tg.tt(t.referenceValue)}),n}function Nb(t,e,n){var r=this;return(r=fb.call(this,t,e,n)||this).key=Tg.tt(n.referenceValue),r}function Cb(t,e,n){var r=this;return(r=pb.call(this)||this).field=t,r.op=e,r.value=n,r}function Ab(t){this.count=t}_b.ASCENDING=new _b("asc"),_b.DESCENDING=new _b("desc");var kb,Rb,Ob=(Ub.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map(function(t){return $g(t)}).join(",")},Ub.prototype.Je=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.Y()?Tg.F(Tg.tt(o.referenceValue),e.key):Xg(o,e.field(i.field)),i.dir===_b.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Ub.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!Qg(this.position[e],t.position[e]))return!1;return!0},Ub),Pb=(Fb.prototype.compare=function(t,e){var n=this.Xe?Qm.Ee(t,e):Qm.Re(this.field,t,e);switch(this.dir){case _b.ASCENDING:return n;case _b.DESCENDING:return-1*n;default:return P_("Unknown direction: "+this.dir)}},Fb.prototype.canonicalId=function(){return this.field.K()+this.dir.toString()},Fb.prototype.toString=function(){return this.field.K()+" ("+this.dir+")"},Fb.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Fb),Db=new Pb(wg.X(),_b.ASCENDING),xb=new Pb(wg.X(),_b.DESCENDING),Lb=(Mb.prototype.es=function(t){return new Mb(this.target,this.targetId,this.Ze,t,this.ts,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Mb.prototype.ss=function(t,e){return new Mb(this.target,this.targetId,this.Ze,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Mb.prototype.ns=function(t){return new Mb(this.target,this.targetId,this.Ze,this.sequenceNumber,this.ts,t,this.resumeToken)},Mb);function Mb(t,e,n,r,i,o,s){void 0===i&&(i=sg.MIN),void 0===o&&(o=sg.MIN),void 0===s&&(s=jg.xt),this.target=t,this.targetId=e,this.Ze=n,this.sequenceNumber=r,this.ts=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Fb(t,e){this.field=t,void 0===e&&(e=_b.ASCENDING),this.dir=e,this.Xe=t.Y()}function Ub(t,e){this.position=t,this.before=e}function jb(t){switch(t){case Zy.OK:return P_("Treated status OK as error");case Zy.CANCELLED:case Zy.UNKNOWN:case Zy.DEADLINE_EXCEEDED:case Zy.RESOURCE_EXHAUSTED:case Zy.INTERNAL:case Zy.UNAVAILABLE:case Zy.UNAUTHENTICATED:return;case Zy.INVALID_ARGUMENT:case Zy.NOT_FOUND:case Zy.ALREADY_EXISTS:case Zy.PERMISSION_DENIED:case Zy.FAILED_PRECONDITION:case Zy.ABORTED:case Zy.OUT_OF_RANGE:case Zy.UNIMPLEMENTED:case Zy.DATA_LOSS:return 1;default:return P_("Unknown status code: "+t)}}function Vb(t){if(void 0===t)return R_("GRPC error has no .code"),Zy.UNKNOWN;switch(t){case kb.OK:return Zy.OK;case kb.CANCELLED:return Zy.CANCELLED;case kb.UNKNOWN:return Zy.UNKNOWN;case kb.DEADLINE_EXCEEDED:return Zy.DEADLINE_EXCEEDED;case kb.RESOURCE_EXHAUSTED:return Zy.RESOURCE_EXHAUSTED;case kb.INTERNAL:return Zy.INTERNAL;case kb.UNAVAILABLE:return Zy.UNAVAILABLE;case kb.UNAUTHENTICATED:return Zy.UNAUTHENTICATED;case kb.INVALID_ARGUMENT:return Zy.INVALID_ARGUMENT;case kb.NOT_FOUND:return Zy.NOT_FOUND;case kb.ALREADY_EXISTS:return Zy.ALREADY_EXISTS;case kb.PERMISSION_DENIED:return Zy.PERMISSION_DENIED;case kb.FAILED_PRECONDITION:return Zy.FAILED_PRECONDITION;case kb.ABORTED:return Zy.ABORTED;case kb.OUT_OF_RANGE:return Zy.OUT_OF_RANGE;case kb.UNIMPLEMENTED:return Zy.UNIMPLEMENTED;case kb.DATA_LOSS:return Zy.DATA_LOSS;default:return P_("Unknown status code: "+t)}}(Rb=kb=kb||{})[Rb.OK=0]="OK",Rb[Rb.CANCELLED=1]="CANCELLED",Rb[Rb.UNKNOWN=2]="UNKNOWN",Rb[Rb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rb[Rb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rb[Rb.NOT_FOUND=5]="NOT_FOUND",Rb[Rb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rb[Rb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rb[Rb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rb[Rb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rb[Rb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rb[Rb.ABORTED=10]="ABORTED",Rb[Rb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rb[Rb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rb[Rb.INTERNAL=13]="INTERNAL",Rb[Rb.UNAVAILABLE=14]="UNAVAILABLE",Rb[Rb.DATA_LOSS=15]="DATA_LOSS";var qb=new Sg(Tg.F);function Bb(){return qb}function Wb(){return Bb()}var Kb=new Sg(Tg.F);function Hb(){return Kb}var Gb=new Sg(Tg.F);function zb(){return Gb}var Qb=new Pg(Tg.F);function Yb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Qb,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Xb=new Pg(M_);function Jb(){return Xb}function $b(t,e,n,r){this.ps=t,this.removedTargetIds=e,this.key=n,this.ys=r}function Zb(t,e){this.targetId=t,this.bs=e}function t_(t,e,n,r){void 0===n&&(n=jg.xt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var e_=(d_.hs=function(t){return new d_(t.F)},d_.prototype.has=function(t){return null!=this.rs.get(t)},d_.prototype.get=function(t){return this.rs.get(t)},d_.prototype.first=function(){return this.os.ht()},d_.prototype.last=function(){return this.os.at()},d_.prototype.U=function(){return this.os.U()},d_.prototype.indexOf=function(t){var e=this.rs.get(t);return e?this.os.indexOf(e):-1},Object.defineProperty(d_.prototype,"size",{get:function(){return this.os.size},enumerable:!0,configurable:!0}),d_.prototype.forEach=function(n){this.os.ut(function(t,e){return n(t),!1})},d_.prototype.add=function(t){var e=this.delete(t.key);return e.rt(e.rs.it(t.key,t),e.os.it(t,null))},d_.prototype.delete=function(t){var e=this.get(t);return e?this.rt(this.rs.remove(t),this.os.remove(e)):this},d_.prototype.isEqual=function(t){if(!(t instanceof d_))return!1;if(this.size!==t.size)return!1;for(var e=this.os._t(),n=t.os._t();e.It();){var r=e.wt().key,i=n.wt().key;if(!r.isEqual(i))return!1}return!0},d_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},d_.prototype.rt=function(t,e){var n=new d_;return n.F=this.F,n.rs=t,n.os=e,n},d_),n_=(p_.prototype.track=function(t){var e=t.doc.key,n=this.as.get(e);!n||0!==t.type&&3===n.type?this.as=this.as.it(e,t):3===t.type&&1!==n.type?this.as=this.as.it(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.as=this.as.it(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.as=this.as.it(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.as=this.as.remove(e):1===t.type&&2===n.type?this.as=this.as.it(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.as=this.as.it(e,{type:2,doc:t.doc}):P_("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))},p_.prototype.us=function(){var n=[];return this.as.ut(function(t,e){n.push(e)}),n},p_),r_=(f_.fs=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new f_(t,e,e_.hs(e),i,n,r,!0,!1)},Object.defineProperty(f_.prototype,"hasPendingWrites",{get:function(){return!this._s.U()},enumerable:!0,configurable:!0}),f_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ls===t.ls&&this._s.isEqual(t._s)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.cs.isEqual(t.cs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},f_),i_=(l_.Is=function(t,e){var n=new Map;return n.set(t,o_.Rs(t,e)),new l_(sg.MIN,n,Jb(),Bb(),Yb())},l_),o_=(h_.Rs=function(t,e){return new h_(jg.xt,e,Yb(),Yb(),Yb())},h_),s_=(Object.defineProperty(c_.prototype,"As",{get:function(){return this.Cs},enumerable:!0,configurable:!0}),Object.defineProperty(c_.prototype,"resumeToken",{get:function(){return this.Ds},enumerable:!0,configurable:!0}),Object.defineProperty(c_.prototype,"Ns",{get:function(){return 0!==this.vs},enumerable:!0,configurable:!0}),Object.defineProperty(c_.prototype,"Fs",{get:function(){return this.ks},enumerable:!0,configurable:!0}),c_.prototype.$s=function(t){0<t.Ot()&&(this.ks=!0,this.Ds=t)},c_.prototype.Ms=function(){var n=Yb(),r=Yb(),i=Yb();return this.Ss.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:P_("Encountered invalid change type: "+e)}}),new o_(this.Ds,this.Cs,n,r,i)},c_.prototype.Ls=function(){this.ks=!1,this.Ss=y_()},c_.prototype.Os=function(t,e){this.ks=!0,this.Ss=this.Ss.it(t,e)},c_.prototype.xs=function(t){this.ks=!0,this.Ss=this.Ss.remove(t)},c_.prototype.Bs=function(){this.vs+=1},c_.prototype.Us=function(){--this.vs},c_.prototype.qs=function(){this.ks=!0,this.Cs=!0},c_),a_=(u_.prototype.zs=function(t){for(var e=0,n=t.ps;e<n.length;e++){var r=n[e];t.ys instanceof Qm?this.Hs(r,t.ys):t.ys instanceof Ym&&this.Js(r,t.key,t.ys)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Js(s,t.key,t.ys)}},u_.prototype.Ys=function(n){var r=this;this.Xs(n,function(t){var e=r.Zs(t);switch(n.state){case 0:r.tn(t)&&e.$s(n.resumeToken);break;case 1:e.Us(),e.Ns||e.Ls(),e.$s(n.resumeToken);break;case 2:e.Us(),e.Ns||r.removeTarget(t);break;case 3:r.tn(t)&&(e.qs(),e.$s(n.resumeToken));break;case 4:r.tn(t)&&(r.en(t),e.$s(n.resumeToken));break;default:P_("Unknown target watch change state: "+n.state)}})},u_.prototype.Xs=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ws.forEach(function(t,e){r.tn(e)&&n(e)})},u_.prototype.sn=function(t){var e=t.targetId,n=t.bs.count,r=this.nn(e);if(r){var i=r.target;if(i.Pe())if(0===n){var o=new Tg(i.path);this.Js(e,o,new Ym(o,sg.S()))}else D_(1===n,"Single document existence filter with count: "+n);else this.in(e)!==n&&(this.en(e),this.Gs=this.Gs.add(e))}},u_.prototype.rn=function(i){var o=this,s=new Map;this.Ws.forEach(function(t,e){var n=o.nn(e);if(n){if(t.As&&n.target.Pe()){var r=new Tg(n.target.path);null!==o.js.get(r)||o.on(e,r)||o.Js(e,r,new Ym(r,i))}t.Fs&&(s.set(e,t.Ms()),t.Ls())}});var r=Yb();this.Ks.forEach(function(t,e){var n=!0;e.kt(function(t){var e=o.nn(t);return!e||2===e.Ze||(n=!1)}),n&&(r=r.add(t))});var t=new i_(i,s,this.Gs,this.js,r);return this.js=Bb(),this.Ks=v_(),this.Gs=new Pg(M_),t},u_.prototype.Hs=function(t,e){if(this.tn(t)){var n=this.on(t,e.key)?2:0;this.Zs(t).Os(e.key,n),this.js=this.js.it(e.key,e),this.Ks=this.Ks.it(e.key,this.hn(e.key).add(t))}},u_.prototype.Js=function(t,e,n){if(this.tn(t)){var r=this.Zs(t);this.on(t,e)?r.Os(e,1):r.xs(e),this.Ks=this.Ks.it(e,this.hn(e).delete(t)),n&&(this.js=this.js.it(e,n))}},u_.prototype.removeTarget=function(t){this.Ws.delete(t)},u_.prototype.in=function(t){var e=this.Zs(t).Ms();return this.Qs.an(t).size+e.Ps.size-e.gs.size},u_.prototype.Bs=function(t){this.Zs(t).Bs()},u_.prototype.Zs=function(t){var e=this.Ws.get(t);return e||(e=new s_,this.Ws.set(t,e)),e},u_.prototype.hn=function(t){var e=this.Ks.get(t);return e||(e=new Pg(M_),this.Ks=this.Ks.it(t,e)),e},u_.prototype.tn=function(t){var e=null!==this.nn(t);return e||k_("WatchChangeAggregator","Detected inactive target",t),e},u_.prototype.nn=function(t){var e=this.Ws.get(t);return e&&e.Ns?null:this.Qs.un(t)},u_.prototype.en=function(e){var n=this;this.Ws.set(e,new s_),this.Qs.an(e).forEach(function(t){n.Js(e,t,null)})},u_.prototype.on=function(t,e){return this.Qs.an(t).has(e)},u_);function u_(t){this.Qs=t,this.Ws=new Map,this.js=Bb(),this.Ks=v_(),this.Gs=new Pg(M_)}function c_(){this.vs=0,this.Ss=y_(),this.Ds=jg.xt,this.Cs=!1,this.ks=!0}function h_(t,e,n,r,i){this.resumeToken=t,this.As=e,this.Ps=n,this.Vs=r,this.gs=i}function l_(t,e,n,r,i){this.ts=t,this.Ts=e,this.ms=n,this.Es=r,this.ws=i}function f_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.cs=n,this.docChanges=r,this._s=i,this.fromCache=o,this.ls=s,this.ds=a}function p_(){this.as=new Sg(Tg.F)}function d_(n){this.F=n?function(t,e){return n(t,e)||Tg.F(t.key,e.key)}:function(t,e){return Tg.F(t.key,e.key)},this.rs=Hb(),this.os=new Sg(this.F)}function v_(){return new Sg(Tg.F)}function y_(){return new Sg(Tg.F)}var g_,m_,b_=((m_={})[_b.ASCENDING.name]="ASCENDING",m_[_b.DESCENDING.name]="DESCENDING",m_),__=((g_={})[Zm.LESS_THAN.name]="LESS_THAN",g_[Zm.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",g_[Zm.GREATER_THAN.name]="GREATER_THAN",g_[Zm.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",g_[Zm.EQUAL.name]="EQUAL",g_[Zm.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",g_[Zm.IN.name]="IN",g_[Zm.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",g_),w_=(E_.prototype._n=function(t){var e=void 0===t.code?Zy.UNKNOWN:Vb(t.code);return new tg(e,t.message||"")},E_.prototype.ln=function(t){return this.options.dn||qg(t)?t:{value:t}},E_.prototype.fn=function(t){var e;return qg(e="object"==typeof t?t.value:t)?null:e},E_.prototype.Wt=function(t){return{integerValue:""+t}},E_.prototype.jt=function(t){if(this.options.dn){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bg(t)?"-0":t}},E_.prototype.Tn=function(t){return Wg(t)?this.Wt(t):this.jt(t)},E_.prototype.k=function(t){return this.options.dn?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},E_.prototype.v=function(t){var e=Zg(t);return new og(e.seconds,e.nanos)},E_.prototype.mn=function(t){return this.options.dn?t.toBase64():t.toUint8Array()},E_.prototype.En=function(t){return this.options.dn?(D_(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),jg.fromBase64String(t||"")):(D_(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),jg.fromUint8Array(t||new Uint8Array))},E_.prototype.toVersion=function(t){return this.k(t.k())},E_.prototype.fromVersion=function(t){return D_(!!t,"Trying to deserialize version that isn't set"),sg.v(this.v(t))},E_.prototype.wn=function(t,e){return this.In(e||this.cn).child("documents").child(t).K()},E_.prototype.Rn=function(t){var e=yg.G(t);return D_(T_(e),"Tried to deserialize invalid key "+e.toString()),e},E_.prototype.An=function(t){return this.wn(t.path)},E_.prototype.tt=function(t){var e=this.Rn(t);return D_(e.get(1)===this.cn.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.cn.projectId),D_(!e.get(3)&&!this.cn.database||e.get(3)===this.cn.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.cn.database),new Tg(this.Pn(e))},E_.prototype.Vn=function(t){return this.wn(t)},E_.prototype.gn=function(t){var e=this.Rn(t);return 4===e.length?yg.H:this.Pn(e)},Object.defineProperty(E_.prototype,"pn",{get:function(){return new yg(["projects",this.cn.projectId,"databases",this.cn.database]).K()},enumerable:!0,configurable:!0}),E_.prototype.In=function(t){return new yg(["projects",t.projectId,"databases",t.database])},E_.prototype.Pn=function(t){return D_(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.M(5)},E_.prototype.yn=function(t,e){return{name:this.An(t),fields:e.proto.mapValue.fields}},E_.prototype.bn=function(t){return{name:this.An(t.key),fields:t.Ie().mapValue.fields,updateTime:this.k(t.version.k())}},E_.prototype.vn=function(t,e){var n=this.tt(t.name),r=this.fromVersion(t.updateTime),i=new Lm({mapValue:{fields:t.fields}});return new Qm(n,r,i,{hasCommittedMutations:!!e})},E_.prototype.Sn=function(t){D_(!!t.found,"Tried to deserialize a found document from a missing document."),t.found.name,t.found.updateTime;var e=this.tt(t.found.name),n=this.fromVersion(t.found.updateTime),r=new Lm({mapValue:{fields:t.found.fields}});return new Qm(e,n,r,{})},E_.prototype.Dn=function(t){D_(!!t.missing,"Tried to deserialize a missing document from a found document."),D_(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.tt(t.missing),n=this.fromVersion(t.readTime);return new Ym(e,n)},E_.prototype.Cn=function(t){return"found"in t?this.Sn(t):"missing"in t?this.Dn(t):P_("invalid batch get response: "+JSON.stringify(t))},E_.prototype.kn=function(t){var e;if("targetChange"in t){t.targetChange;var n=this.Nn(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.En(t.targetChange.resumeToken),o=t.targetChange.cause;e=new t_(n,r,i,o&&this._n(o)||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var a=this.tt(s.document.name),u=this.fromVersion(s.document.updateTime),c=new Lm({mapValue:{fields:s.document.fields}}),h=new Qm(a,u,c,{});e=new $b(s.targetIds||[],s.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){t.documentDelete;var l=t.documentDelete;l.document;var f=this.tt(l.document),p=l.readTime?this.fromVersion(l.readTime):sg.S(),d=new Ym(f,p);e=new $b([],l.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){t.documentRemove;var v=t.documentRemove;v.document;var y=this.tt(v.document);e=new $b([],v.removedTargetIds||[],y,null)}else{if(!("filter"in t))return P_("Unknown change type "+JSON.stringify(t));t.filter;var g=t.filter;g.targetId;var m=new Ab(g.count||0);e=new Zb(g.targetId,m)}return e},E_.prototype.Nn=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:P_("Got unexpected TargetChange.state: "+t)},E_.prototype.Fn=function(t){if(!("targetChange"in t))return sg.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?sg.MIN:this.fromVersion(e.readTime)},E_.prototype.$n=function(t){var e,n=this;if(t instanceof Rm)e={update:this.yn(t.key,t.value)};else if(t instanceof Dm)e={delete:this.An(t.key)};else if(t instanceof Om)e={update:this.yn(t.key,t.data),updateMask:this.Mn(t.se)};else if(t instanceof Pm)e={transform:{document:this.An(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.Ln(t)})}};else{if(!(t instanceof xm))return P_("Unknown mutation type "+t.type);e={verify:this.An(t.key)}}return t.Zt.Ht||(e.currentDocument=this.On(t.Zt)),e},E_.prototype.xn=function(t){var e=this,n=t.currentDocument?this.Bn(t.currentDocument):_m.NONE;if(t.update){t.update.name;var r=this.tt(t.update.name),i=new Lm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.Un(t.updateMask);return new Om(r,i,o,n)}return new Rm(r,i,n)}if(t.delete){var s=this.tt(t.delete);return new Dm(s,n)}if(t.transform){var a=this.tt(t.transform.document),u=t.transform.fieldTransforms.map(function(t){return e.qn(t)});return D_(!0===n.exists,'Transforms only support precondition "exists == true"'),new Pm(a,u)}if(t.verify){var c=this.tt(t.verify);return new xm(c,n)}return P_("unknown mutation proto: "+JSON.stringify(t))},E_.prototype.On=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P_("Unknown precondition")},E_.prototype.Bn=function(t){return void 0!==t.updateTime?_m.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?_m.exists(t.exists):_m.NONE},E_.prototype.Qn=function(t,e){var n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(sg.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new gm(n,r)},E_.prototype.Wn=function(t,e){var n=this;return t&&0<t.length?(D_(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.Qn(t,e)})):[]},E_.prototype.Ln=function(t){var e=t.transform;if(e instanceof um)return{fieldPath:t.field.K(),setToServerValue:"REQUEST_TIME"};if(e instanceof hm)return{fieldPath:t.field.K(),appendMissingElements:{values:e.elements}};if(e instanceof lm)return{fieldPath:t.field.K(),removeAllFromArray:{values:e.elements}};if(e instanceof fm)return{fieldPath:t.field.K(),increment:e.Qt};throw P_("Unknown transform: "+t.transform)},E_.prototype.qn=function(t){var e=null;if("setToServerValue"in t)D_("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),e=um.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];e=new hm(n)}else if("removeAllFromArray"in t){var r=t.removeAllFromArray.values||[];e=new lm(r)}else"increment"in t?e=new fm(this,t.increment):P_("Unknown transform proto: "+JSON.stringify(t));var i=wg.Z(t.fieldPath);return new bm(i,e)},E_.prototype.jn=function(t){return{documents:[this.Vn(t.path)]}},E_.prototype.Kn=function(t){var e=t.documents.length;D_(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return $m.ve(this.gn(n)).xe()},E_.prototype.Gn=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Vn(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Vn(n.L()),e.structuredQuery.from=[{collectionId:n.B()}]);var r=this.zn(t.filters);r&&(e.structuredQuery.where=r);var i=this.Hn(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ln(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Jn(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Jn(t.endAt)),e},E_.prototype.Yn=function(t){var e=this.gn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){D_(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.Xn(n.where));var a=[];n.orderBy&&(a=this.Zn(n.orderBy));var u=null;n.limit&&(u=this.fn(n.limit));var c=null;n.startAt&&(c=this.ti(n.startAt));var h=null;return n.endAt&&(h=this.ti(n.endAt)),new $m(e,i,a,s,u,"F",c,h).xe()},E_.prototype.ei=function(t){var e=this.si(t.Ze);return null==e?null:{"goog-listen-tags":e}},E_.prototype.si=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return P_("Unrecognized query purpose: "+t)}},E_.prototype.xe=function(t){var e,n=t.target;return(e=n.Pe()?{documents:this.jn(n)}:{query:this.Gn(n)}).targetId=t.targetId,0<t.resumeToken.Ot()&&(e.resumeToken=this.mn(t.resumeToken)),e},E_.prototype.zn=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof db?e.ni(t):P_("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},E_.prototype.Xn=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.ii(t)]:void 0!==t.fieldFilter?[this.ri(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.Xn(t)}).reduce(function(t,e){return t.concat(e)}):P_("Unknown filter: "+JSON.stringify(t)):[]},E_.prototype.Hn=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.oi(t)})},E_.prototype.Zn=function(t){var e=this;return t.map(function(t){return e.hi(t)})},E_.prototype.Jn=function(t){return{before:t.before,values:t.position}},E_.prototype.ti=function(t){var e=!!t.before,n=t.values||[];return new Ob(n,e)},E_.prototype.ai=function(t){return b_[t.name]},E_.prototype.ui=function(t){switch(t){case"ASCENDING":return _b.ASCENDING;case"DESCENDING":return _b.DESCENDING;default:return}},E_.prototype.ci=function(t){return __[t.name]},E_.prototype._i=function(t){switch(t){case"EQUAL":return Zm.EQUAL;case"GREATER_THAN":return Zm.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Zm.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Zm.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Zm.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Zm.ARRAY_CONTAINS;case"IN":return Zm.IN;case"ARRAY_CONTAINS_ANY":return Zm.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return P_("Unspecified operator");default:return P_("Unknown operator")}},E_.prototype.li=function(t){return{fieldPath:t.K()}},E_.prototype.di=function(t){return wg.Z(t.fieldPath)},E_.prototype.oi=function(t){return{field:this.li(t.field),direction:this.ai(t.dir)}},E_.prototype.hi=function(t){return new Pb(this.di(t.field),this.ui(t.direction))},E_.prototype.ri=function(t){return db.create(this.di(t.fieldFilter.field),this._i(t.fieldFilter.op),t.fieldFilter.value)},E_.prototype.ni=function(t){if(t.op===Zm.EQUAL){if(sm(t.value))return{unaryFilter:{field:this.li(t.field),op:"IS_NAN"}};if(om(t.value))return{unaryFilter:{field:this.li(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.li(t.field),op:this.ci(t.op),value:t.value}}},E_.prototype.ii=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.di(t.unaryFilter.field);return db.create(e,Zm.EQUAL,{doubleValue:NaN});case"IS_NULL":var n=this.di(t.unaryFilter.field);return db.create(n,Zm.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P_("Unspecified filter");default:return P_("Unknown filter")}},E_.prototype.Mn=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.K())}),{fieldPaths:e}},E_.prototype.Un=function(t){var e=(t.fieldPaths||[]).map(function(t){return wg.Z(t)});return mm.Gt(e)},E_);function E_(t,e){this.cn=t,this.options=e}function T_(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var I_=(N_.fi=function(t){N_.platform&&P_("Platform already defined"),N_.platform=t},N_.Lt=function(){return N_.platform||P_("Platform not set"),N_.platform},N_),S_=new wa("@firebase/firestore");function N_(){}function C_(){return S_.logLevel}function A_(t){S_.logLevel=t}function k_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(S_.logLevel<=pa.DEBUG){var r=e.map(O_);S_.debug.apply(S_,bs(["Firestore ("+Qy+"): "+t],r))}}function R_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(S_.logLevel<=pa.ERROR){var r=e.map(O_);S_.error.apply(S_,bs(["Firestore ("+Qy+"): "+t],r))}}function O_(t){if("string"==typeof t)return t;var e=I_.Lt();try{return e.Ti(t)}catch(e){return t}}function P_(t){var e="FIRESTORE ("+Qy+") INTERNAL ASSERTION FAILED: "+t;throw R_(e),new Error(e)}function D_(t,e){t||P_(e)}var x_=(L_.mi=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},L_);function L_(){}function M_(t,e){return t<e?-1:e<t?1:0}function F_(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function U_(t){return t+"\0"}function j_(t,e,n,r,i){this.cn=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var V_=(Object.defineProperty(hw.prototype,"Ei",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),hw.prototype.isEqual=function(t){return t instanceof hw&&t.projectId===this.projectId&&t.database===this.database},hw.prototype.D=function(t){return M_(this.projectId,t.projectId)||M_(this.database,t.database)},hw),q_=(cw.prototype.get=function(t){var e=this.wi(t),n=this.Ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},cw.prototype.has=function(t){return void 0!==this.get(t)},cw.prototype.set=function(t,e){var n=this.wi(t),r=this.Ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Ii[n]=[[t,e]]},cw.prototype.delete=function(t){var e=this.wi(t),n=this.Ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Ii[e]:n.splice(r,1),!0;return!1},cw.prototype.forEach=function(a){Fg(this.Ii,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},cw.prototype.U=function(){return Ug(this.Ii)},cw),B_=(uw.prototype.Ut=function(t,e,n){for(var r=n.Ai,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.Ut(e,s)}}return e},uw.prototype.Bt=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.Bt(e,e,this.Ri))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.Bt(e,o,this.Ri))}return e},uw.prototype.Pi=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Bt(t.key,n.get(t.key));e&&(i=i.it(t.key,e))}),i},uw.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Yb())},uw.prototype.isEqual=function(t){return this.batchId===t.batchId&&F_(this.mutations,t.mutations,function(t,e){return t.isEqual(e)})&&F_(this.baseMutations,t.baseMutations,function(t,e){return t.isEqual(e)})},uw),W_=(aw.from=function(t,e,n,r){D_(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=zb(),o=t.mutations,s=0;s<o.length;s++)i=i.it(o[s].key,n[s].version);return new aw(t,e,n,r,i)},aw),K_=(sw.prototype.U=function(){return this.pi.U()},sw.prototype.vi=function(t,e){var n=new H_(t,e);this.pi=this.pi.add(n),this.yi=this.yi.add(n)},sw.prototype.Si=function(t,e){var n=this;t.forEach(function(t){return n.vi(t,e)})},sw.prototype.Di=function(t,e){this.Ci(new H_(t,e))},sw.prototype.ki=function(t,e){var n=this;t.forEach(function(t){return n.Di(t,e)})},sw.prototype.Ni=function(t){var e=this,n=Tg.EMPTY,r=new H_(n,t),i=new H_(n,t+1),o=[];return this.yi.Ct([r,i],function(t){e.Ci(t),o.push(t.key)}),o},sw.prototype.Fi=function(){var e=this;this.pi.forEach(function(t){return e.Ci(t)})},sw.prototype.Ci=function(t){this.pi=this.pi.delete(t),this.yi=this.yi.delete(t)},sw.prototype.$i=function(t){var e=Tg.EMPTY,n=new H_(e,t),r=new H_(e,t+1),i=Yb();return this.yi.Ct([n,r],function(t){i=i.add(t.key)}),i},sw.prototype.Mi=function(t){var e=new H_(t,0),n=this.pi.Nt(e);return null!==n&&t.isEqual(n.key)},sw),H_=(ow.Ee=function(t,e){return Tg.F(t.key,e.key)||M_(t.Li,e.Li)},ow.bi=function(t,e){return M_(t.Li,e.Li)||Tg.F(t.key,e.key)},ow),G_=(iw.prototype.catch=function(t){return this.next(void 0,t)},iw.prototype.next=function(r,i){var o=this;return this.Ui&&P_("Called next() or catch() twice for PersistencePromise"),this.Ui=!0,this.Bi?this.error?this.qi(i,this.error):this.Qi(r,this.result):new iw(function(e,n){o.Oi=function(t){o.Qi(r,t).next(e,n)},o.xi=function(t){o.qi(i,t).next(e,n)}})},iw.prototype.Wi=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},iw.prototype.ji=function(t){try{var e=t();return e instanceof iw?e:iw.resolve(e)}catch(t){return iw.reject(t)}},iw.prototype.Qi=function(t,e){return t?this.ji(function(){return t(e)}):iw.resolve(e)},iw.prototype.qi=function(t,e){return t?this.ji(function(){return t(e)}):iw.reject(e)},iw.resolve=function(n){return new iw(function(t,e){t(n)})},iw.reject=function(n){return new iw(function(t,e){e(n)})},iw.Ki=function(t){return new iw(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},iw.Gi=function(t){for(var n=iw.resolve(!1),e=function(e){n=n.next(function(t){return t?iw.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},iw.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Ki(i)},iw),z_=(Object.defineProperty(rw.prototype,"readTime",{get:function(){return this.Ji},set:function(t){this.Ji=t},enumerable:!0,configurable:!0}),rw.prototype.Yi=function(t,e){this.Xi(),this.readTime=e,this.zi.set(t.key,t)},rw.prototype.Zi=function(t,e){this.Xi(),e&&(this.readTime=e),this.zi.set(t,null)},rw.prototype.tr=function(t,e){this.Xi();var n=this.zi.get(e);return void 0!==n?G_.resolve(n):this.er(t,e)},rw.prototype.getEntries=function(t,e){return this.sr(t,e)},rw.prototype.apply=function(t){return this.Xi(),this.Hi=!0,this.nr(t)},rw.prototype.Xi=function(){},rw),Q_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Y_=(nw.prototype.rr=function(t){this.ir.push(t)},nw.prototype.or=function(){this.ir.forEach(function(t){return t()})},nw),X_=(ew.prototype.cr=function(e,n){var r=this;return this.ar._r(e,n).next(function(t){return r.lr(e,n,t)})},ew.prototype.lr=function(t,r,i){return this.hr.tr(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Bt(r,t);return t})},ew.prototype.dr=function(t,e,i){var o=Wb();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Bt(t,e);o=o.it(t,e)}),o},ew.prototype.Tr=function(e,t){var n=this;return this.hr.getEntries(e,t).next(function(t){return n.mr(e,t)})},ew.prototype.mr=function(r,i){var o=this;return this.ar.Er(r,i).next(function(t){var e=o.dr(r,i,t),n=Bb();return e.forEach(function(t,e){e=e||new Ym(t,sg.S()),n=n.it(t,e)}),n})},ew.prototype.wr=function(t,e,n){return e.Pe()?this.Ir(t,e.path):e.He()?this.Rr(t,e,n):this.Ar(t,e,n)},ew.prototype.Ir=function(t,e){return this.cr(t,new Tg(e)).next(function(t){var e=Hb();return t instanceof Qm&&(e=e.it(t.key,t)),e})},ew.prototype.Rr=function(n,r,i){var o=this,s=r.collectionGroup,a=Hb();return this.ur.Pr(n,s).next(function(t){return G_.forEach(t,function(t){var e=r.Le(t.child(s));return o.Ar(n,e,i).next(function(t){t.forEach(function(t,e){a=a.it(t,e)})})}).next(function(){return a})})},ew.prototype.Ar=function(e,n,t){var h,l,r=this;return this.hr.wr(e,n,t).next(function(t){return h=t,r.ar.Vr(e,n)}).next(function(t){return l=t,r.gr(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.Bt(u,u,r.Ri);h=c instanceof Qm?h.it(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},ew.prototype.gr=function(t,e,n){for(var r=Yb(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Om&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.hr.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Qm&&(c=c.it(t,e))}),c})},ew),J_=(tw.br=function(t,e){for(var n=Yb(),r=Yb(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new tw(t,e.fromCache,n,r)},tw),$_=(Z_.prototype.Sr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Z_.prototype.next=function(){var t=++this.previousValue;return this.Dr&&this.Dr(t),t},Z_);function Z_(t,e){var n=this;this.previousValue=t,e&&(e.vr=function(t){return n.Sr(t)},this.Dr=function(t){return e.Cr(t)})}function tw(t,e,n,r){this.targetId=t,this.fromCache=e,this.pr=n,this.yr=r}function ew(t,e,n){this.hr=t,this.ar=e,this.ur=n}function nw(){this.ir=[]}function rw(){this.zi=new q_(function(t){return t.toString()}),this.Hi=!1}function iw(t){var e=this;this.Oi=null,this.xi=null,this.result=void 0,this.error=void 0,this.Bi=!1,this.Ui=!1,t(function(t){e.Bi=!0,e.result=t,e.Oi&&e.Oi(t)},function(t){e.Bi=!0,e.error=t,e.xi&&e.xi(t)})}function ow(t,e){this.key=t,this.Li=e}function sw(){this.pi=new Pg(H_.Ee),this.yi=new Pg(H_.bi)}function aw(t,e,n,r,i){this.batch=t,this.Vi=e,this.Ai=n,this.streamToken=r,this.gi=i}function uw(t,e,n,r){this.batchId=t,this.Ri=e,this.baseMutations=n,this.mutations=r}function cw(t){this.wi=t,this.Ii={}}function hw(t,e){this.projectId=t,this.database=e||"(default)"}function lw(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}$_.kr=-1;var fw=(vw.Or=function(t,e,n,r,i){var o=new vw(t,e,Date.now()+n,r,i);return o.start(n),o},vw.prototype.start=function(t){var e=this;this.xr=setTimeout(function(){return e.Br()},t)},vw.prototype.Ur=function(){return this.Br()},vw.prototype.cancel=function(t){null!==this.xr&&(this.clearTimeout(),this.Lr.reject(new tg(Zy.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},vw.prototype.Br=function(){var e=this;this.Nr.qr(function(){return null!==e.xr?(e.clearTimeout(),e.op().then(function(t){return e.Lr.resolve(t)})):Promise.resolve()})},vw.prototype.clearTimeout=function(){null!==this.xr&&(this.Mr(this),clearTimeout(this.xr),this.xr=null)},vw),pw=(Object.defineProperty(dw.prototype,"Hr",{get:function(){return this.Wr},enumerable:!0,configurable:!0}),dw.prototype.qr=function(t){this.enqueue(t)},dw.prototype.Jr=function(t){this.Yr(),this.Xr(t)},dw.prototype.Zr=function(t){return this.Yr(),this.Xr(t)},dw.prototype.to=function(e){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.Yr(),this.Wr?[3,2]:(this.Wr=!0,[4,this.Zr(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},dw.prototype.enqueue=function(t){return this.Yr(),this.Wr?new Promise(function(t){}):this.Xr(t)},dw.prototype.Xr=function(t){var e=this,n=this.Qr.then(function(){return e.Gr=!0,t().catch(function(t){throw e.Kr=t,e.Gr=!1,R_("INTERNAL UNHANDLED ERROR: ",t.stack||t.message||""),t}).then(function(t){return e.Gr=!1,t})});return this.Qr=n},dw.prototype.eo=function(t,e,n){var r=this;this.Yr(),-1<this.zr.indexOf(t)&&(e=0);var i=fw.Or(this,t,e,n,function(t){return r.so(t)});return this.jr.push(i),i},dw.prototype.Yr=function(){this.Kr&&P_("AsyncQueue is already failed: "+(this.Kr.stack||this.Kr.message))},dw.prototype.no=function(){},dw.prototype.io=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,e=this.Qr];case 1:t.sent(),t.label=2;case 2:if(e!==this.Qr)return[3,0];t.label=3;case 3:return[2]}})})},dw.prototype.ro=function(t){for(var e=0,n=this.jr;e<n.length;e++)if(n[e].Fr===t)return!0;return!1},dw.prototype.oo=function(r){var i=this;return this.io().then(function(){i.jr.sort(function(t,e){return t.$r-e.$r});for(var t=0,e=i.jr;t<e.length;t++){var n=e[t];if(n.Ur(),"all"!==r&&n.Fr===r)break}return i.io()})},dw.prototype.ho=function(t){this.zr.push(t)},dw.prototype.so=function(t){var e=this.jr.indexOf(t);this.jr.splice(e,1)},dw);function dw(){this.Qr=Promise.resolve(),this.Wr=!1,this.jr=[],this.Kr=null,this.Gr=!1,this.zr=[]}function vw(t,e,n,r,i){this.Nr=t,this.Fr=e,this.$r=n,this.op=r,this.Mr=i,this.Lr=new lw,this.then=this.Lr.promise.then.bind(this.Lr.promise),this.catch=this.Lr.promise.catch.bind(this.Lr.promise),this.Lr.promise.catch(function(t){})}function yw(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=M_(n,i);return 0===s?M_(r,o):s}var gw=(ww.prototype.co=function(){return++this.uo},ww.prototype._o=function(t){var e=[t,this.co()];if(this.buffer.size<this.ao)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();yw(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(ww.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),ww),mw={lo:!1,do:0,fo:0,To:0},bw=(_w.Io=function(t){return new _w(t,_w.Ro,_w.Ao)},_w);function _w(t,e,n){this.mo=t,this.Eo=e,this.wo=n}function ww(t){this.ao=t,this.buffer=new Pg(yw),this.uo=0}bw.Po=-1,bw.Vo=1048576,bw.po=41943040,bw.Ro=10,bw.Ao=1e3,bw.yo=new bw(bw.po,bw.Ro,bw.Ao),bw.DISABLED=new bw(bw.Po,0,0);var Ew=(Cw.prototype.start=function(t){this.bo.Do.mo!==bw.Po&&this.Co(t)},Cw.prototype.stop=function(){this.So&&(this.So.cancel(),this.So=null)},Object.defineProperty(Cw.prototype,"ko",{get:function(){return null!==this.So},enumerable:!0,configurable:!0}),Cw.prototype.Co=function(t){var e=this,n=this.vo?3e5:6e4;k_("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.So=this.Nr.eo("lru_garbage_collection",n,function(){return e.So=null,e.vo=!0,t.No(e.bo).then(function(){return e.Co(t)}).catch(Aw)})},Cw),Tw=(Nw.prototype.$o=function(t,e){return this.Fo.Mo(t).next(function(t){return Math.floor(e/100*t)})},Nw.prototype.Lo=function(t,e){var n=this;if(0===e)return G_.resolve($_.kr);var r=new gw(e);return this.Fo.Xs(t,function(t){return r._o(t.sequenceNumber)}).next(function(){return n.Fo.Oo(t,function(t){return r._o(t)})}).next(function(){return r.maxValue})},Nw.prototype.xo=function(t,e,n){return this.Fo.xo(t,e,n)},Nw.prototype.Bo=function(t,e){return this.Fo.Bo(t,e)},Nw.prototype.Uo=function(e,n){var r=this;return this.Do.mo===bw.Po?(k_("LruGarbageCollector","Garbage collection skipped; disabled"),G_.resolve(mw)):this.qo(e).next(function(t){return t<r.Do.mo?(k_("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.Do.mo),mw):r.Qo(e,n)})},Nw.prototype.qo=function(t){return this.Fo.qo(t)},Nw.prototype.Qo=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.$o(e,this.Do.Eo).next(function(t){return i=t>h.Do.wo?(k_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.Do.wo+" from "+t),h.Do.wo):t,s=Date.now(),h.Lo(e,i)}).next(function(t){return r=t,a=Date.now(),h.xo(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Bo(e,r)}).next(function(t){return c=Date.now(),C_()<=pa.DEBUG&&k_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),G_.resolve({lo:!0,do:i,fo:o,To:t})})},Nw),Iw=(Sw.prototype.start=function(){return this.rh()},Sw.prototype.oh=function(i){return ds(this,void 0,void 0,function(){var e,m,n,r=this;return vs(this,function(t){switch(t.label){case 0:return e=this.ar,m=this.sh,[4,this.persistence.runTransaction("Handle user change","readonly",function(y){var g;return r.ar.hh(y).next(function(t){return g=t,e=r.persistence.Yo(i),m=new X_(r.Xo,e,r.persistence.nh()),e.hh(y)}).next(function(t){for(var e=[],n=[],r=Yb(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Tr(y,r).next(function(t){return{ah:t,uh:e,_h:n}})})})];case 1:return n=t.sent(),[2,(this.ar=e,this.sh=m,this.Wo.ih(this.sh),n)]}})})},Sw.prototype.lh=function(a){var u,c=this,h=og.now(),t=a.reduce(function(t,e){return t.add(e.key)},Yb());return this.persistence.runTransaction("Locally write mutations","readwrite",function(s){return c.sh.Tr(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.ee(u.get(i.key));null!=o&&e.push(new Om(i.key,o,o.se(),_m.exists(!0)))}return c.ar.dh(s,h,e,a)})}).then(function(t){var e=t.Pi(u);return{batchId:t.batchId,zi:e}})},Sw.prototype.fh=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.ar.Th(e,t).next(function(t){return t?n.sh.Tr(e,t):G_.resolve(null)})})},Sw.prototype.mh=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Xo.Eh({wh:!0});return i.ar.mh(t,r.batch,r.streamToken).next(function(){return i.Ih(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.ar.Rh(t)}).next(function(){return i.sh.Tr(t,e)})})},Sw.prototype.Ah=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.ar.Ph(e,t).next(function(t){return D_(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.ar.Vh(e,t)}).next(function(){return r.ar.Rh(e)}).next(function(){return r.sh.Tr(e,n)})})},Sw.prototype.gh=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.ar.gh(t)})},Sw.prototype.ph=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.ar.ph(t)})},Sw.prototype.yh=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(t){return n.ar.yh(t,e)})},Sw.prototype.bh=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.th.bh(t)})},Sw.prototype.vh=function(u){var c=this,h=u.ts,l=this.Ko;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.Xo.Eh({wh:!0});l=c.Ko;var s=[];u.Ts.forEach(function(t,e){var n=l.get(e);if(n){s.push(c.th.Sh(o,t.gs,e).next(function(){return c.th.Dh(o,t.Ps,e)}));var r=t.resumeToken;if(0<r.Ot()){var i=n.ss(r,h).es(o.Ch);l=l.it(e,i),Sw.kh(n,i,t)&&s.push(c.th.Nh(o,i))}}});var a=Bb(),n=Yb();if(u.Es.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.Es.forEach(function(t,e){var n=r.get(t);e instanceof Ym&&e.version.isEqual(sg.MIN)?(i.Zi(t,h),a=a.it(t,e)):null==n||0<e.version.D(n.version)||0===e.version.D(n.version)&&n.hasPendingWrites?(i.Yi(e,h),a=a.it(t,e)):k_("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.ws.has(t)&&s.push(c.persistence.Jo.Fh(o,t))})})),!h.isEqual(sg.MIN)){var t=c.th.bh(o).next(function(t){return c.th.$h(o,o.Ch,h)});s.push(t)}return G_.Ki(s).next(function(){return i.apply(o)}).next(function(){return c.sh.mr(o,a)})}).then(function(t){return c.Ko=l,t})},Sw.kh=function(t,e,n){return D_(0<e.resumeToken.Ot(),"Attempted to persist target data with no resume token"),0===t.resumeToken.Ot()||e.ts.C()-t.ts.C()>=this.Mh||0<n.Ps.size+n.Vs.size+n.gs.size},Sw.prototype.Lh=function(t){for(var n=this,e=0,r=t;e<r.length;e++){var i=r[e],o=i.targetId;if(this.jo.Si(i.pr,o),this.jo.ki(i.yr,o),!i.fromCache){var s=this.Ko.get(o),a=s.ts,u=s.ns(a);this.Ko=this.Ko.it(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return G_.forEach(t,function(t){return G_.forEach(t.yr,function(t){return n.persistence.Jo.Di(e,t)})})})},Sw.prototype.Oh=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.ar.xh(t,e)})},Sw.prototype.Bh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.sh.cr(t,e)})},Sw.prototype.Uh=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.th.qh(e,r).next(function(t){return t?(n=t,G_.resolve(n)):i.th.Qh(e).next(function(t){return n=new Lb(r,t,0,e.Ch),i.th.Wh(e,n).next(function(){return n})})})}).then(function(t){return null===i.Ko.get(t.targetId)&&(i.Ko=i.Ko.it(t.targetId,t),i.Go.set(r,t.targetId)),t})},Sw.prototype.qh=function(t,e){var n=this.Go.get(e);return void 0!==n?G_.resolve(this.Ko.get(n)):this.th.qh(t,e)},Sw.prototype.jh=function(n,r){var i=this,o=this.Ko.get(n),t=r?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",t,function(e){var t=i.jo.Ni(n);return r?G_.resolve():G_.forEach(t,function(t){return i.persistence.Jo.Di(e,t)}).next(function(){i.persistence.Jo.removeTarget(e,o)})}).then(function(){i.Ko=i.Ko.remove(n),i.Go.delete(o.target)})},Sw.prototype.Kh=function(t,n){var r=this,i=sg.MIN,o=Yb();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.qh(e,t.xe()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.th.Gh(e,t.targetId).next(function(t){o=t})}).next(function(){return r.Wo.wr(e,t,n?i:sg.MIN,n?o:Yb())}).next(function(t){return{documents:t,zh:o}})})},Sw.prototype.Hh=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(t){return n.th.Gh(t,e)})},Sw.prototype.Jh=function(){return this.persistence.Jh()},Sw.prototype.Yh=function(t){this.ar.Xh(t)},Sw.prototype.Zh=function(t){this.persistence.Zh(t)},Sw.prototype.Ih=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=G_.resolve();return n.forEach(function(r){a=a.next(function(){return o.tr(t,r)}).next(function(t){var e=t,n=i.gi.get(r);D_(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.D(n)<0)&&(e=s.Ut(r,e,i))&&o.Yi(e,i.Vi)})}),a.next(function(){return e.ar.Vh(t,s)})},Sw.prototype.No=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Uo(t,n.Ko)})},Sw.prototype.ta=function(e){var n=this,t=this.Ko.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly",function(t){return n.th.un(t,e).next(function(t){return t?t.target:null})})},Sw.prototype.ea=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return r.Xo.ea(t,r.zo)}).then(function(t){var e=t.sa,n=t.readTime;return r.zo=n,e})},Sw.prototype.rh=function(){return ds(this,void 0,void 0,function(){var e,n=this;return vs(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.Xo.na(t)})];case 1:return e.zo=t.sent(),[2]}})})},Sw);function Sw(t,e,n){this.persistence=t,this.Wo=e,this.jo=new K_,this.Ko=new Sg(M_),this.Go=new q_(function(t){return t.canonicalId()}),this.zo=sg.MIN,this.persistence.Jo.Ho(this.jo),this.ar=t.Yo(n),this.Xo=t.Zo(),this.th=t.eh(),this.sh=new X_(this.Xo,this.ar,this.persistence.nh()),this.Wo.ih(this.sh)}function Nw(t,e){this.Fo=t,this.Do=e}function Cw(t,e){this.bo=t,this.Nr=e,this.vo=!1,this.So=null}function Aw(e){return ds(this,void 0,void 0,function(){return vs(this,function(t){if(e.code!==Zy.FAILED_PRECONDITION||e.message!==Q_)throw e;return k_("LocalStore","Unexpectedly lost primary lease"),[2]})})}function kw(t,e){if(0!==e.length)throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Gw(e.length,"argument")+".")}function Rw(t,e,n){if(e.length!==n)throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires "+Gw(n,"argument")+", but was called with "+Gw(e.length,"argument")+".")}function Ow(t,e,n){if(e.length<n)throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Gw(n,"argument")+", but was called with "+Gw(e.length,"argument")+".")}function Pw(t,e,n,r){if(e.length<n||e.length>r)throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Gw(e.length,"argument")+".")}function Dw(t,e,n,r){Uw(t,e,Hw(n)+" argument",r)}function xw(t,e,n,r){void 0!==r&&Dw(t,e,n,r)}function Lw(t,e,n,r){Uw(t,e,n+" option",r)}function Mw(t,e,n,r){void 0!==r&&Lw(t,e,n,r)}function Fw(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(Vw(s))}var a=Vw(n);throw new tg(Zy.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function Uw(t,e,n,r){if(!("object"===e?jw(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Vw(r);throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function jw(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Vw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":P_("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function qw(t,e,n){if(void 0===n)throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Hw(e)+" argument, but it was undefined.")}function Bw(n,t,r){Fg(t,function(t,e){if(r.indexOf(t)<0)throw new tg(Zy.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Ww(t,e,n,r){var i=Vw(r);return new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires its "+Hw(n)+" argument to be a "+e+", but it was: "+i)}function Kw(t,e,n){if(n<=0)throw new tg(Zy.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+Hw(e)+" argument to be a positive number, but it was: "+n+".")}function Hw(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Gw(t,e){return t+" "+e+(1===t?"":"s")}function zw(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new tg(Zy.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function Qw(){if("undefined"==typeof Uint8Array)throw new tg(Zy.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Yw(){if(!I_.Lt().ia)throw new tg(Zy.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}Iw.Mh=3e8;var Xw=(tE.fromBase64String=function(t){Rw("Blob.fromBase64String",arguments,1),Dw("Blob.fromBase64String","string",1,t),Yw();try{return new tE(jg.fromBase64String(t))}catch(t){throw new tg(Zy.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},tE.fromUint8Array=function(t){if(Rw("Blob.fromUint8Array",arguments,1),Qw(),!(t instanceof Uint8Array))throw Ww("Blob.fromUint8Array","Uint8Array",1,t);return new tE(jg.fromUint8Array(t))},tE.prototype.toBase64=function(){return Rw("Blob.toBase64",arguments,0),Yw(),this.ra.toBase64()},tE.prototype.toUint8Array=function(){return Rw("Blob.toUint8Array",arguments,0),Qw(),this.ra.toUint8Array()},tE.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},tE.prototype.isEqual=function(t){return this.ra.isEqual(t.ra)},tE),Jw=zw(Xw,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),$w=(Zw.documentId=function(){return Zw.ha},Zw.prototype.isEqual=function(t){if(!(t instanceof Zw))throw Ww("isEqual","FieldPath",1,t);return this.oa.isEqual(t.oa)},Zw);function Zw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(){if(!(t instanceof Array)||t.length<1)throw new tg(Zy.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var n=0;n<t.length;++n)if(Dw("FieldPath","string",n,t[n]),0===t[n].length)throw new tg(Zy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.oa=new wg(t)}function tE(t){Yw(),this.ra=t}$w.ha=new $w(wg.X().K());var eE,nE=new RegExp("[~\\*/\\[\\]]"),rE=(sE.delete=function(){return kw("FieldValue.delete",arguments),iE.instance},sE.serverTimestamp=function(){return kw("FieldValue.serverTimestamp",arguments),uE.instance},sE.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ow("FieldValue.arrayUnion",arguments,1),new pE(t)},sE.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ow("FieldValue.arrayRemove",arguments,1),new dE(t)},sE.increment=function(t){return Dw("FieldValue.increment","number",1,t),Rw("FieldValue.increment",arguments,1),new vE(t)},sE.prototype.isEqual=function(t){return this===t},sE),iE=(fs(oE,eE=rE),oE);function oE(){return eE.call(this,"FieldValue.delete")||this}function sE(t){this.aa=t}iE.instance=new iE;var aE,uE=(fs(cE,aE=rE),cE);function cE(){return aE.call(this,"FieldValue.serverTimestamp")||this}uE.instance=new uE;var hE,lE,fE,pE=(fs(NE,fE=rE),NE),dE=(fs(SE,lE=rE),SE),vE=(fs(IE,hE=rE),IE),yE=zw(rE,"Use FieldValue.<field>() instead."),gE=(Object.defineProperty(TE.prototype,"latitude",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(TE.prototype,"longitude",{get:function(){return this.la},enumerable:!0,configurable:!0}),TE.prototype.isEqual=function(t){return this._a===t._a&&this.la===t.la},TE.prototype.p=function(t){return M_(this._a,t._a)||M_(this.la,t.la)},TE),mE=/^__.*__$/,bE=(EE.prototype.da=function(t,e){var n=[];return null!==this.se?n.push(new Om(t,this.data,this.se,e)):n.push(new Rm(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Pm(t,this.fieldTransforms)),n},EE),_E=(wE.prototype.da=function(t,e){var n=[new Om(t,this.data,this.se,e)];return 0<this.fieldTransforms.length&&n.push(new Pm(t,this.fieldTransforms)),n},wE);function wE(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}function EE(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}function TE(t,e){if(Rw("GeoPoint",arguments,2),Dw("GeoPoint","number",1,t),Dw("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new tg(Zy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new tg(Zy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._a=t,this.la=e}function IE(t){var e=this;return(e=hE.call(this,"FieldValue.increment")||this).ca=t,e}function SE(t){var e=this;return(e=lE.call(this,"FieldValue.arrayRemove")||this).ua=t,e}function NE(t){var e=this;return(e=fE.call(this,"FieldValue.arrayUnion")||this).ua=t,e}function CE(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw P_("Unexpected case for UserDataSource: "+t)}}var AE=(PE.prototype.Ea=function(t){var e=null==this.path?null:this.path.child(t),n=new PE(this.fa,this.methodName,e,!1,this.fieldTransforms,this.se);return n.wa(t),n},PE.prototype.Ia=function(t){var e=null==this.path?null:this.path.child(t),n=new PE(this.fa,this.methodName,e,!1,this.fieldTransforms,this.se);return n.ma(),n},PE.prototype.Ra=function(t){return new PE(this.fa,this.methodName,null,!0,this.fieldTransforms,this.se)},PE.prototype.Aa=function(t){var e=null===this.path||this.path.U()?"":" (found in field "+this.path.toString()+")";return new tg(Zy.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},PE.prototype.contains=function(e){return void 0!==this.se.find(function(t){return e.q(t)})||void 0!==this.fieldTransforms.find(function(t){return e.q(t.field)})},PE.prototype.ma=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.wa(this.path.get(t))},PE.prototype.wa=function(t){if(0===t.length)throw this.Aa("Document fields must not be empty");if(CE(this.fa)&&mE.test(t))throw this.Aa('Document fields cannot begin and end with "__"')},PE),kE=function(t,e){this.cn=t,this.key=e},RE=(OE.prototype.Va=function(t,e){var n=new AE(0,t,wg.H);xE("Data must be an object, but it was:",n,e);var r=this.ga(e,n);return new bE(new Lm(r),null,n.fieldTransforms)},OE.prototype.pa=function(t,e,n){var r=new AE(2,t,wg.H);xE("Data must be an object, but it was:",r,e);var i,o,s=this.ga(e,r);if(n){for(var a=new Pg(wg.F),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof $w)l=h.oa;else{if("string"!=typeof h)throw P_("Expected stringOrFieldPath to be a string or a FieldPath");l=ME(t,h)}if(!r.contains(l))throw new tg(Zy.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=mm.Kt(a),o=r.fieldTransforms.filter(function(t){return i.zt(t.field)})}else i=mm.Gt(r.se),o=r.fieldTransforms;return new bE(new Lm(s),i,o)},OE.prototype.ya=function(o,t){var s=this,a=new AE(1,o,wg.H);xE("Data must be an object, but it was:",a,t);var u=new Pg(wg.F),c=Lm._e();Fg(t,function(t,e){var n=ME(o,t),r=a.Ia(n);if((e=s.ba(e,r))instanceof iE)u=u.add(n);else{var i=s.va(e,r);null!=i&&(u=u.add(n),c.set(n,i))}});var e=mm.Kt(u);return new _E(c.oe(),e,a.fieldTransforms)},OE.prototype.Sa=function(t,e,n,r){var i=new AE(1,t,wg.H),o=[LE(t,e)],s=[n];if(r.length%2!=0)throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(LE(t,r[a])),s.push(r[a+1]);for(var u=new Pg(wg.F),c=Lm._e(),h=0;h<o.length;++h){var l=o[h],f=i.Ia(l),p=this.ba(s[h],f);if(p instanceof iE)u=u.add(l);else{var d=this.va(p,f);null!=d&&(u=u.add(l),c.set(l,d))}}var v=mm.Kt(u);return new _E(c.oe(),v,i.fieldTransforms)},OE.prototype.Da=function(t,e,n){void 0===n&&(n=!1);var r=new AE(n?4:3,t,wg.H);return this.va(e,r)},OE.prototype.ba=function(t,e){try{return this.Pa(t)}catch(t){var n=FE(t);throw e.Aa(n)}},OE.prototype.va=function(t,e){if(DE(t=this.ba(t,e)))return xE("Unsupported field value:",e,t),this.ga(t,e);if(t instanceof rE)return this.Ca(t,e),null;if(e.path&&e.se.push(e.path),t instanceof Array){if(e.Ta&&4!==e.fa)throw e.Aa("Nested arrays are not supported");return this.ka(t,e)}return this.Na(t,e)},OE.prototype.ga=function(t,r){var i=this,o={};return Ug(t)?r.path&&0<r.path.length&&r.se.push(r.path):Fg(t,function(t,e){var n=i.va(e,r.Ea(t));null!=n&&(o[t]=n)}),{mapValue:{fields:o}}},OE.prototype.ka=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.va(s,e.Ra(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}},OE.prototype.Ca=function(t,e){if(!CE(e.fa))throw e.Aa(t.aa+"() can only be used with update() and set()");if(null===e.path)throw e.Aa(t.aa+"() is not currently supported inside arrays");if(t instanceof iE){if(2!==e.fa)throw 1===e.fa?e.Aa("FieldValue.delete() can only appear at the top level of your update data"):e.Aa("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.se.push(e.path)}else if(t instanceof uE)e.fieldTransforms.push(new bm(e.path,um.instance));else if(t instanceof pE){var n=this.Fa(t.aa,t.ua),r=new hm(n);e.fieldTransforms.push(new bm(e.path,r))}else if(t instanceof dE){var i=this.Fa(t.aa,t.ua),o=new lm(i);e.fieldTransforms.push(new bm(e.path,o))}else if(t instanceof vE){var s=this.Da("FieldValue.increment",t.ca),a=new fm(this.serializer,s);e.fieldTransforms.push(new bm(e.path,a))}else P_("Unknown FieldValue type: "+t)},OE.prototype.Na=function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return this.serializer.Tn(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=og.fromDate(t);return{timestampValue:this.serializer.k(n)}}if(t instanceof og){var r=new og(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:this.serializer.k(r)}}if(t instanceof gE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xw)return{bytesValue:this.serializer.mn(t)};if(t instanceof kE)return{referenceValue:this.serializer.wn(t.key.path,t.cn)};throw e.Aa("Unsupported field value: "+Vw(t))},OE.prototype.Fa=function(r,t){var i=this;return t.map(function(t,e){var n=new AE(3,r,wg.H);return i.va(t,n.Ra(e))})},OE);function OE(t,e){this.serializer=t,this.Pa=e}function PE(t,e,n,r,i,o){this.fa=t,this.methodName=e,this.path=n,this.Ta=r,void 0===i&&this.ma(),this.Ta=void 0!==r&&r,this.fieldTransforms=i||[],this.se=o||[]}function DE(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof og||t instanceof gE||t instanceof Xw||t instanceof kE||t instanceof rE)}function xE(t,e,n){if(!DE(n)||!jw(n)){var r=Vw(n);throw"an object"===r?e.Aa(t+" a custom object"):e.Aa(t+" "+r)}}function LE(t,e){if(e instanceof $w)return e.oa;if("string"==typeof e)return ME(t,e);throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function ME(t,e){try{return function(e){if(0<=e.search(nE))throw new tg(Zy.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new($w.bind.apply($w,bs([void 0],e.split("."))))}catch(t){throw new tg(Zy.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).oa}catch(e){var n=FE(e);throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function FE(t){return t instanceof Error?t.message:t.toString()}var UE,jE,VE=(eT.prototype.reset=function(){this.xa=0},eT.prototype.qa=function(){this.xa=this.Oa},eT.prototype.Qa=function(t){var e=this;this.cancel();var n=Math.floor(this.xa+this.Wa()),r=Math.max(0,Date.now()-this.Ua),i=Math.max(0,n-r);0<this.xa&&k_("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.xa+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ba=this.$a.eo(this.Fr,i,function(){return e.Ua=Date.now(),t()}),this.xa*=this.La,this.xa<this.Ma&&(this.xa=this.Ma),this.xa>this.Oa&&(this.xa=this.Oa)},eT.prototype.cancel=function(){null!==this.Ba&&(this.Ba.cancel(),this.Ba=null)},eT.prototype.Wa=function(){return(Math.random()-.5)*this.xa},eT),qE=(tT.prototype.Ya=function(){return 1===this.state||2===this.state||4===this.state},tT.prototype.Xa=function(){return 2===this.state},tT.prototype.start=function(){3!==this.state?this.auth():this.Za()},tT.prototype.stop=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.Ya()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},tT.prototype.tu=function(){this.state=0,this.Ja.reset()},tT.prototype.eu=function(){var t=this;this.Xa()&&null===this.Ha&&(this.Ha=this.$a.eo(this.ja,6e4,function(){return t.su()}))},tT.prototype.nu=function(t){this.iu(),this.stream.send(t)},tT.prototype.su=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){return this.Xa()?[2,this.close(0)]:[2]})})},tT.prototype.iu=function(){this.Ha&&(this.Ha.cancel(),this.Ha=null)},tT.prototype.close=function(e,n){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.iu(),this.Ja.cancel(),this.za++,3!==e?this.Ja.reset():n&&n.code===Zy.RESOURCE_EXHAUSTED?(R_(n.toString()),R_("Using maximum backoff delay to prevent overloading the backend."),this.Ja.qa()):n&&n.code===Zy.UNAUTHENTICATED&&this.Ga._(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ou(n)];case 1:return t.sent(),[2]}})})},tT.prototype.ru=function(){},tT.prototype.auth=function(){var n=this;this.state=1;var t=this.hu(this.za),e=this.za;this.Ga.getToken().then(function(t){n.za===e&&n.au(t)},function(e){t(function(){var t=new tg(Zy.UNKNOWN,"Fetching auth token failed: "+e.message);return n.uu(t)})})},tT.prototype.au=function(t){var e=this,n=this.hu(this.za);this.stream=this.cu(t),this.stream._u(function(){n(function(){return e.state=2,e.listener._u()})}),this.stream.ou(function(t){n(function(){return e.uu(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},tT.prototype.Za=function(){var t=this;this.state=4,this.Ja.Qa(function(){return ds(t,void 0,void 0,function(){return vs(this,function(t){return this.state=0,this.start(),[2]})})})},tT.prototype.uu=function(t){return k_("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},tT.prototype.hu=function(e){var n=this;return function(t){n.$a.qr(function(){return n.za===e?t():(k_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},tT),BE=(fs(ZE,jE=qE),ZE.prototype.cu=function(t){return this.Ka.lu("Listen",t)},ZE.prototype.onMessage=function(t){this.Ja.reset();var e=this.serializer.kn(t),n=this.serializer.Fn(t);return this.listener.du(e,n)},ZE.prototype.fu=function(t){var e={};e.database=this.serializer.pn,e.addTarget=this.serializer.xe(t);var n=this.serializer.ei(t);n&&(e.labels=n),this.nu(e)},ZE.prototype.Tu=function(t){var e={};e.database=this.serializer.pn,e.removeTarget=t,this.nu(e)},ZE),WE=(fs($E,UE=qE),Object.defineProperty($E.prototype,"Eu",{get:function(){return this.mu},enumerable:!0,configurable:!0}),$E.prototype.start=function(){this.mu=!1,UE.prototype.start.call(this)},$E.prototype.ru=function(){this.mu&&this.wu([])},$E.prototype.cu=function(t){return this.Ka.lu("Write",t)},$E.prototype.onMessage=function(t){if(D_(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.En(t.streamToken),this.mu){this.Ja.reset();var e=this.serializer.Wn(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Iu(n,e)}return D_(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.mu=!0,this.listener.Ru()},$E.prototype.Au=function(){var t={};t.database=this.serializer.pn,this.nu(t)},$E.prototype.wu=function(t){var e=this,n={streamToken:this.serializer.mn(this.lastStreamToken),writes:t.map(function(t){return e.serializer.$n(t)})};this.nu(n)},$E),KE=(JE.prototype.Pu=function(t){return new WE(this.$a,this.Ka,this.credentials,this.serializer,t)},JE.prototype.Vu=function(t){return new BE(this.$a,this.Ka,this.credentials,this.serializer,t)},JE.prototype.commit=function(t){var e=this,n={database:this.serializer.pn,writes:t.map(function(t){return e.serializer.$n(t)})};return this.gu("Commit",n).then(function(t){return e.serializer.Wn(t.writeResults,t.commitTime)})},JE.prototype.pu=function(e){var i=this,t={database:this.serializer.pn,documents:e.map(function(t){return i.serializer.An(t)})};return this.yu("BatchGetDocuments",t).then(function(t){var n=Bb();t.forEach(function(t){var e=i.serializer.Cn(t);n=n.it(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);D_(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},JE.prototype.gu=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.Ka.gu(e,n,t)}).catch(function(t){throw t.code===Zy.UNAUTHENTICATED&&r.credentials._(),t})},JE.prototype.yu=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.Ka.yu(e,n,t)}).catch(function(t){throw t.code===Zy.UNAUTHENTICATED&&r.credentials._(),t})},JE),HE=(XE.prototype.pu=function(r){return ds(this,void 0,void 0,function(){var e,n=this;return vs(this,function(t){switch(t.label){case 0:if(this.ku(),0<this.mutations.length)throw new tg(Zy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.bu.pu(r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Ym||t instanceof Qm?n.Nu(t):P_("Document in a transaction was a "+t.constructor.name)}),e)]}})})},XE.prototype.set=function(t,e){this.write(e.da(t,this.Zt(t))),this.Cu.add(t)},XE.prototype.update=function(t,e){try{this.write(e.da(t,this.Fu(t)))}catch(t){this.Du=t}this.Cu.add(t)},XE.prototype.delete=function(t){this.write([new Dm(t,this.Zt(t))]),this.Cu.add(t)},XE.prototype.commit=function(){return ds(this,void 0,void 0,function(){var e,n=this;return vs(this,function(t){switch(t.label){case 0:if(this.ku(),this.Du)throw this.Du;return e=this.vu,this.mutations.forEach(function(t){e=e.remove(t.key)}),e.forEach(function(t,e){n.mutations.push(new xm(t,n.Zt(t)))}),[4,this.bu.commit(this.mutations)];case 1:return t.sent(),this.Su=!0,[2]}})})},XE.prototype.Nu=function(t){var e;if(t instanceof Qm)e=t.version;else{if(!(t instanceof Ym))throw P_("Document in a transaction was a "+t.constructor.name);e=sg.S()}var n=this.vu.get(t.key);if(null!==n){if(!e.isEqual(n))throw new tg(Zy.ABORTED,"Document version changed between two reads.")}else this.vu=this.vu.it(t.key,e)},XE.prototype.Zt=function(t){var e=this.vu.get(t);return!this.Cu.has(t)&&e?_m.updateTime(e):_m.NONE},XE.prototype.Fu=function(t){var e=this.vu.get(t);if(this.Cu.has(t)||!e)return _m.exists(!0);if(e.isEqual(sg.S()))throw new tg(Zy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _m.updateTime(e)},XE.prototype.write=function(t){this.ku(),this.mutations=this.mutations.concat(t)},XE.prototype.ku=function(){},XE),GE=(YE.prototype.xu=function(){var t=this;0===this.Mu&&(this.Bu("Unknown"),this.Lu=this.Nr.eo("online_state_timeout",1e4,function(){return t.Lu=null,t.Uu("Backend didn't respond within 10 seconds."),t.Bu("Offline"),Promise.resolve()}))},YE.prototype.qu=function(t){"Online"===this.state?this.Bu("Unknown"):(this.Mu++,1<=this.Mu&&(this.Qu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.Bu("Offline")))},YE.prototype.set=function(t){this.Qu(),this.Mu=0,"Online"===t&&(this.Ou=!1),this.Bu(t)},YE.prototype.Bu=function(t){t!==this.state&&(this.state=t,this.$u(t))},YE.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ou?(R_(e),this.Ou=!1):k_("OnlineStateTracker",e)},YE.prototype.Qu=function(){null!==this.Lu&&(this.Lu.cancel(),this.Lu=null)},YE),zE=(QE.prototype.start=function(){return this.enableNetwork()},QE.prototype.enableNetwork=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.Ju()?(e=this.nc,[4,this.Wu.ph()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.hc()?this.ac():this.Xu.set("Unknown"),[4,this.uc()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},QE.prototype.disableNetwork=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.Xu.set("Offline"),[2]}})})},QE.prototype.cc=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return[4,this.nc.stop()];case 1:return t.sent(),[4,this.Zu.stop()];case 2:return t.sent(),0<this.ju.length&&(k_("RemoteStore","Stopping write stream with "+this.ju.length+" pending writes"),this.ju=[]),this._c(),[2]}})})},QE.prototype.lc=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return k_("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.zu.lc(),this.Xu.set("Unknown"),[2]}})})},QE.prototype.listen=function(t){this.Ku.has(t.targetId)||(this.Ku.set(t.targetId,t),this.hc()?this.ac():this.Zu.Xa()&&this.dc(t))},QE.prototype.fc=function(t){this.Ku.delete(t),this.Zu.Xa()&&this.Tc(t),0===this.Ku.size&&(this.Zu.Xa()?this.Zu.eu():this.Ju()&&this.Xu.set("Unknown"))},QE.prototype.un=function(t){return this.Ku.get(t)||null},QE.prototype.an=function(t){return this.mc.an(t)},QE.prototype.dc=function(t){this.Gu.Bs(t.targetId),this.Zu.fu(t)},QE.prototype.Tc=function(t){this.Gu.Bs(t),this.Zu.Tu(t)},QE.prototype.ac=function(){this.Gu=new a_(this),this.Zu.start(),this.Xu.xu()},QE.prototype.hc=function(){return this.Ju()&&!this.Zu.Ya()&&0<this.Ku.size},QE.prototype.Ju=function(){return this.isPrimary&&this.networkEnabled},QE.prototype._c=function(){this.Gu=null},QE.prototype.tc=function(){return ds(this,void 0,void 0,function(){var n=this;return vs(this,function(t){return this.Ku.forEach(function(t,e){n.dc(t)}),[2]})})},QE.prototype.ec=function(e){return ds(this,void 0,void 0,function(){return vs(this,function(t){return this._c(),this.hc()?(this.Xu.qu(e),this.ac()):this.Xu.set("Unknown"),[2]})})},QE.prototype.sc=function(n,r){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return this.Xu.set("Online"),n instanceof t_&&2===n.state&&n.cause?[2,this.Ec(n)]:(n instanceof $b?this.Gu.zs(n):n instanceof Zb?this.Gu.sn(n):this.Gu.Ys(n),r.isEqual(sg.MIN)?[3,4]:[4,this.Wu.bh()]);case 1:return e=t.sent(),0<=r.D(e)?[4,this.wc(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:t.label=4;case 4:return[2]}})})},QE.prototype.wc=function(r){var i=this,t=this.Gu.rn(r);return t.Ts.forEach(function(t,e){if(0<t.resumeToken.Ot()){var n=i.Ku.get(e);n&&i.Ku.set(e,n.ss(t.resumeToken,r))}}),t.ms.forEach(function(t){var e=i.Ku.get(t);if(e){i.Ku.set(t,e.ss(jg.xt,e.ts)),i.Tc(t);var n=new Lb(e.target,t,1,e.sequenceNumber);i.dc(n)}}),this.mc.vh(t)},QE.prototype.Ec=function(t){var n=this,r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return ds(n,void 0,void 0,function(){return vs(this,function(t){return this.Ku.has(e)?[2,(this.Ku.delete(e),this.Gu.removeTarget(e),this.mc.Ic(e,r))]:[2]})})})}),i},QE.prototype.uc=function(){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return this.Rc()?(e=0<this.ju.length?this.ju[this.ju.length-1].batchId:-1,[4,this.Wu.Oh(e)]):[3,5];case 1:return null!==(n=t.sent())?[3,2]:(0===this.ju.length&&this.nc.eu(),[3,4]);case 2:return this.Ac(n),[4,this.uc()];case 3:t.sent(),t.label=4;case 4:t.label=5;case 5:return this.Pc()&&this.Vc(),[2]}})})},QE.prototype.Rc=function(){return this.Ju()&&this.ju.length<10},QE.prototype.gc=function(){return this.ju.length},QE.prototype.Ac=function(t){this.ju.push(t),this.nc.Xa()&&this.nc.Eu&&this.nc.wu(t.mutations)},QE.prototype.Pc=function(){return this.Ju()&&!this.nc.Ya()&&0<this.ju.length},QE.prototype.Vc=function(){this.nc.start()},QE.prototype.ic=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){return this.nc.Au(),[2]})})},QE.prototype.oc=function(){var r=this;return this.Wu.yh(this.nc.lastStreamToken).then(function(){for(var t=0,e=r.ju;t<e.length;t++){var n=e[t];r.nc.wu(n.mutations)}}).catch(Aw)},QE.prototype.Iu=function(t,e){var n=this,r=this.ju.shift(),i=W_.from(r,t,e,this.nc.lastStreamToken);return this.mc.pc(i).then(function(){return n.uc()})},QE.prototype.rc=function(n){return ds(this,void 0,void 0,function(){var e=this;return vs(this,function(t){return n&&0<this.ju.length?[2,(this.nc.Eu?this.yc(n):this.bc(n)).then(function(){e.Pc()&&e.Vc()})]:[2]})})},QE.prototype.bc=function(e){return ds(this,void 0,void 0,function(){return vs(this,function(t){return jb(e.code)?[2,(k_("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.nc.lastStreamToken),this.nc.lastStreamToken=jg.xt,this.Wu.yh(jg.xt).catch(Aw))]:[2]})})},QE.prototype.yc=function(i){return ds(this,void 0,void 0,function(){var e,n,r=this;return vs(this,function(t){return jb(n=i.code)&&n!==Zy.ABORTED?(e=this.ju.shift(),[2,(this.nc.tu(),this.mc.vc(e.batchId,i).then(function(){return r.uc()}))]):[2]})})},QE.prototype.Sc=function(){return new HE(this.bu)},QE.prototype.Yu=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.Xu.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},QE.prototype.Dc=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.Ju()?(k_("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Yu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},QE.prototype.Cc=function(e){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:[4,this.cc()];case 3:t.sent(),this.Xu.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},QE);function QE(t,e,n,r,i){var o=this;this.Wu=t,this.bu=e,this.ju=[],this.Ku=new Map,this.Gu=null,this.networkEnabled=!1,this.isPrimary=!1,this.zu=i,this.zu.Hu(function(t){n.qr(function(){return ds(o,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.Ju()?(k_("RemoteStore","Restarting streams for network reachability change."),[4,this.Yu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Xu=new GE(n,r),this.Zu=this.bu.Vu({_u:this.tc.bind(this),ou:this.ec.bind(this),du:this.sc.bind(this)}),this.nc=this.bu.Pu({_u:this.ic.bind(this),ou:this.rc.bind(this),Ru:this.oc.bind(this),Iu:this.Iu.bind(this)})}function YE(t,e){this.Nr=t,this.$u=e,this.state="Unknown",this.Mu=0,this.Lu=null,this.Ou=!0}function XE(t){this.bu=t,this.vu=zb(),this.mutations=[],this.Su=!1,this.Du=null,this.Cu=new Set}function JE(t,e,n,r){this.$a=t,this.Ka=e,this.credentials=n,this.serializer=r}function $E(t,e,n,r,i){var o=this;return(o=UE.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.mu=!1,o.lastStreamToken=jg.xt,o}function ZE(t,e,n,r,i){var o=this;return(o=jE.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function tT(t,e,n,r,i,o){this.$a=t,this.ja=n,this.Ka=r,this.Ga=i,this.listener=o,this.state=0,this.za=0,this.Ha=null,this.stream=null,this.Ja=new VE(t,e)}function eT(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.$a=t,this.Fr=e,this.Ma=n,this.La=r,this.Oa=i,this.xa=0,this.Ba=null,this.Ua=Date.now(),this.reset()}function nT(t,e){return"firestore_clients_"+t+"_"+e}function rT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function iT(t,e){return"firestore_targets_"+t+"_"+e}function oT(t){this.key=t}function sT(t){this.key=t}function aT(t,e,n){this.query=t,this.targetId=e,this.view=n}function uT(t){this.key=t,this.Y_=!1}function cT(){this.kl=null,this.targetId=0,this.Nl=[]}var hT=(FT.kc=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new tg(r.error.code,r.error.message)),i?new FT(t,e,r.state,o):(R_("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},FT.prototype.Nc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},FT),lT=(MT.kc=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new tg(n.error.code,n.error.message)),r?new MT(t,n.state,i):(R_("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},MT.prototype.Nc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},MT),fT=(LT.kc=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Jb(),o=0;r&&o<n.activeTargetIds.length;++o)r=Wg(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new LT(t,i):(R_("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},LT),pT=(xT.kc=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new xT(e.clientId,e.onlineState):(R_("SharedClientState","Failed to parse online state: "+t),null)},xT),dT=(DT.prototype.Fc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},DT.prototype.$c=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},DT.prototype.Nc=function(){var t={activeTargetIds:this.activeTargetIds.j(),updateTimeMs:Date.now()};return JSON.stringify(t)},DT),vT=(PT.Uc=function(t){return!(!t.window||null==t.window.localStorage)},PT.prototype.start=function(){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return vs(this,function(t){switch(t.label){case 0:return[4,this.mc.Jh()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Mc&&(o=this.getItem(nT(this.persistenceKey,i)))&&(s=fT.kc(i,o))&&(this.Lc[s.clientId]=s);for(this.zc(),(a=this.storage.getItem(this.Gc))&&(u=this.Hc(a))&&this.Jc(u),c=0,h=this.Bc;c<h.length;c++)l=h[c],this.xc(l);return this.Bc=[],this.platform.window.addEventListener("unload",function(){return f.lc()}),this.ko=!0,[2]}})})},PT.prototype.Cr=function(t){this.setItem(this.Qc,JSON.stringify(t))},PT.prototype.Yc=function(){var n=Jb();return Fg(this.Lc,function(t,e){n=n.Ft(e.activeTargetIds)}),n},PT.prototype.Xc=function(t){for(var e in this.Lc)if(this.Lc.hasOwnProperty(e)&&this.Lc[e].activeTargetIds.has(t))return!0;return!1},PT.prototype.Zc=function(t){this.t_(t,"pending")},PT.prototype.e_=function(t,e,n){this.t_(t,e,n),this.s_(t)},PT.prototype.n_=function(t){var e="not-current";if(this.Xc(t)){var n=this.storage.getItem(iT(this.persistenceKey,t));if(n){var r=lT.kc(t,n);r&&(e=r.state)}}return this.i_.Fc(t),this.zc(),e},PT.prototype.r_=function(t){this.i_.$c(t),this.zc()},PT.prototype.o_=function(t){return this.i_.activeTargetIds.has(t)},PT.prototype.h_=function(t){this.removeItem(iT(this.persistenceKey,t))},PT.prototype.a_=function(t,e,n){this.u_(t,e,n)},PT.prototype.oh=function(t,e,n){var r=this;e.forEach(function(t){r.s_(t)}),this.currentUser=t,n.forEach(function(t){r.Zc(t)})},PT.prototype.c_=function(t){this.__(t)},PT.prototype.lc=function(){this.ko&&(this.platform.window.removeEventListener("storage",this.Oc),this.removeItem(this.qc),this.ko=!1)},PT.prototype.getItem=function(t){var e=this.storage.getItem(t);return k_("SharedClientState","READ",t,e),e},PT.prototype.setItem=function(t,e){k_("SharedClientState","SET",t,e),this.storage.setItem(t,e)},PT.prototype.removeItem=function(t){k_("SharedClientState","REMOVE",t),this.storage.removeItem(t)},PT.prototype.xc=function(a){var t=this;if(a.storageArea===this.storage){if(k_("SharedClientState","EVENT",a.key,a.newValue),a.key===this.qc)return void R_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.$a.qr(function(){return ds(t,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){if(this.ko){if(null!==a.key)if(this.Wc.test(a.key)){if(null==a.newValue)return e=this.l_(a.key),[2,this.d_(e,null)];if(n=this.f_(a.key,a.newValue))return[2,this.d_(n.clientId,n)]}else if(this.jc.test(a.key)){if(null!==a.newValue&&(r=this.T_(a.key,a.newValue)))return[2,this.m_(r)]}else if(this.Kc.test(a.key)){if(null!==a.newValue&&(i=this.E_(a.key,a.newValue)))return[2,this.w_(i)]}else if(a.key===this.Gc){if(null!==a.newValue&&(o=this.Hc(a.newValue)))return[2,this.Jc(o)]}else a.key===this.Qc&&(s=function(t){var e=$_.kr;if(null!=t)try{var n=JSON.parse(t);D_("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){R_("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==$_.kr&&this.vr(s)}else this.Bc.push(a);return[2]})})})}},Object.defineProperty(PT.prototype,"i_",{get:function(){return this.Lc[this.Mc]},enumerable:!0,configurable:!0}),PT.prototype.zc=function(){this.setItem(this.qc,this.i_.Nc())},PT.prototype.t_=function(t,e,n){var r=new hT(this.currentUser,t,e,n),i=rT(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Nc())},PT.prototype.s_=function(t){var e=rT(this.persistenceKey,this.currentUser,t);this.removeItem(e)},PT.prototype.__=function(t){var e={clientId:this.Mc,onlineState:t};this.storage.setItem(this.Gc,JSON.stringify(e))},PT.prototype.u_=function(t,e,n){var r=iT(this.persistenceKey,t),i=new lT(t,e,n);this.setItem(r,i.Nc())},PT.prototype.l_=function(t){var e=this.Wc.exec(t);return e?e[1]:null},PT.prototype.f_=function(t,e){var n=this.l_(t);return fT.kc(n,e)},PT.prototype.T_=function(t,e){var n=this.jc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hT.kc(new Yy(i),r,e)},PT.prototype.E_=function(t,e){var n=this.Kc.exec(t),r=Number(n[1]);return lT.kc(r,e)},PT.prototype.Hc=function(t){return pT.kc(t)},PT.prototype.m_=function(e){return ds(this,void 0,void 0,function(){return vs(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.mc.I_(e.batchId,e.state,e.error)]:(k_("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},PT.prototype.w_=function(t){return this.mc.R_(t.targetId,t.state,t.error)},PT.prototype.d_=function(t,e){var n=this,r=this.Yc();e?this.Lc[t]=e:delete this.Lc[t];var i=this.Yc(),o=[],s=[];return i.forEach(function(e){return ds(n,void 0,void 0,function(){return vs(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return ds(n,void 0,void 0,function(){return vs(this,function(t){return i.has(e)||s.push(e),[2]})})}),this.mc.A_(o,s)},PT.prototype.Jc=function(t){this.Lc[t.clientId]&&this.$u(t.onlineState)},PT),yT=(OT.prototype.Zc=function(t){},OT.prototype.e_=function(t,e,n){},OT.prototype.n_=function(t){return this.P_.Fc(t),this.V_[t]||"not-current"},OT.prototype.a_=function(t,e,n){this.V_[t]=e},OT.prototype.r_=function(t){this.P_.$c(t)},OT.prototype.o_=function(t){return this.P_.activeTargetIds.has(t)},OT.prototype.h_=function(t){delete this.V_[t]},OT.prototype.Yc=function(){return this.P_.activeTargetIds},OT.prototype.Xc=function(t){return this.P_.activeTargetIds.has(t)},OT.prototype.start=function(){return this.P_=new dT,Promise.resolve()},OT.prototype.oh=function(t,e,n){},OT.prototype.c_=function(t){},OT.prototype.lc=function(){},OT.prototype.Cr=function(t){},OT),gT=(RT.prototype.next=function(){return this.g_+=2,this.g_},RT.p_=function(){return new RT(0)},RT.y_=function(){return new RT(-1)},RT),mT=(Object.defineProperty(kT.prototype,"C_",{get:function(){return this.b_},enumerable:!0,configurable:!0}),kT.prototype.k_=function(t,e){var a=this,u=e?e.N_:new n_,c=e?e.D_:this.D_,h=e?e._s:this._s,l=c,f=!1,p=this.query.je()&&c.size===this.query.limit?c.last():null,d=this.query.Ke()&&c.size===this.query.limit?c.first():null;if(t.ut(function(t,e){var n=c.get(t),r=e instanceof Qm?e:null;r=r&&(a.query.matches(r)?r:null);var i=!!n&&a._s.has(n.key),o=!!r&&(r.te||a._s.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.F_(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.Be(r,p)||d&&a.query.Be(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.je()||this.query.Ke())for(;l.size>this.query.limit;){var n=this.query.je()?l.last():l.first();l=l.delete(n.key),h=h.delete(n.key),u.track({type:1,doc:n})}return{D_:l,N_:u,M_:f,_s:h}},kT.prototype.F_=function(t,e){return t.te&&e.hasCommittedMutations&&!e.te},kT.prototype.nr=function(t,e,n){var o=this,r=this.D_;this.D_=t.D_,this._s=t._s;var i=t.N_.us();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.Be(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P_("Unknown ChangeType: "+t)}}var r,i}),this.L_(n);var s=e?this.O_():[],a=0===this.S_.size&&this.As?1:0,u=a!==this.v_;return this.v_=a,0!==i.length||u?{snapshot:new r_(this.query,t.D_,r,i,t._s,0==a,u,!1),x_:s}:{x_:s}},kT.prototype.B_=function(t){return this.As&&"Offline"===t?(this.As=!1,this.nr({D_:this.D_,N_:new n_,_s:this._s,M_:!1},!1)):{x_:[]}},kT.prototype.U_=function(t){return!this.b_.has(t)&&!!this.D_.has(t)&&!this.D_.get(t).te},kT.prototype.L_=function(t){var e=this;t&&(t.Ps.forEach(function(t){return e.b_=e.b_.add(t)}),t.Vs.forEach(function(t){}),t.gs.forEach(function(t){return e.b_=e.b_.delete(t)}),this.As=t.As)},kT.prototype.O_=function(){var e=this;if(!this.As)return[];var n=this.S_;this.S_=Yb(),this.D_.forEach(function(t){e.U_(t.key)&&(e.S_=e.S_.add(t.key))});var r=[];return n.forEach(function(t){e.S_.has(t)||r.push(new sT(t))}),this.S_.forEach(function(t){n.has(t)||r.push(new oT(t))}),r},kT.prototype.q_=function(t){this.b_=t.zh,this.S_=Yb();var e=this.k_(t.documents);return this.nr(e,!0)},kT.prototype.Q_=function(){return r_.fs(this.query,this.D_,this._s,0===this.v_)},kT),bT=(AT.prototype.K_=function(){this.G_()},AT.prototype.G_=function(){var t=this;this.Ja.Qa(function(){return ds(t,void 0,void 0,function(){var e,n,r=this;return vs(this,function(t){return e=this.W_.Sc(),(n=this.z_(e))&&n.then(function(t){r.Nr.qr(function(){return e.commit().then(function(){r.Lr.resolve(t)}).catch(function(t){r.H_(t)})})}).catch(function(t){r.H_(t)}),[2]})})})},AT.prototype.z_=function(t){try{var e=this.updateFunction(t);return!qg(e)&&e.catch&&e.then?e:(this.Lr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Lr.reject(t),null}},AT.prototype.H_=function(t){var e=this;0<this.j_&&this.J_(t)?(--this.j_,this.Nr.qr(function(){return e.G_(),Promise.resolve()})):this.Lr.reject(t)},AT.prototype.J_=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!jb(e)},AT),_T=(Object.defineProperty(CT.prototype,"cl",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),CT.prototype.subscribe=function(t){this.tl=t},CT.prototype.listen=function(s){return ds(this,void 0,void 0,function(){var e,n,r,i,o;return vs(this,function(t){switch(t.label){case 0:return this._l("listen()"),(r=this.el.get(s))?(e=r.targetId,this.X_.n_(e),n=r.view.Q_(),[3,4]):[3,1];case 1:return[4,this.Wu.Uh(s.xe())];case 2:return i=t.sent(),o=this.X_.n_(i.targetId),e=i.targetId,[4,this.ll(s,e,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.W_.listen(i),t.label=4;case 4:return[2,(this.tl.du([n]),e)]}})})},CT.prototype.ll=function(a,u,c){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){switch(t.label){case 0:return[4,this.Wu.Kh(a,!0)];case 1:return e=t.sent(),n=new mT(a,e.zh),r=n.k_(e.documents),i=o_.Rs(u,c&&"Offline"!==this.onlineState),o=n.nr(r,!0===this.isPrimary,i),s=new aT(a,u,n),[2,(this.el.set(a,s),this.sl.has(u)?this.sl.get(u).push(a):this.sl.set(u,[a]),o.snapshot)]}})})},CT.prototype.dl=function(r){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,this.Wu.Kh(r.query,!0)];case 1:return e=t.sent(),n=r.view.q_(e),[2,(this.isPrimary&&this.fl(r.targetId,n.x_),n)]}})})},CT.prototype.fc=function(i){return ds(this,void 0,void 0,function(){var e,n,r=this;return vs(this,function(t){switch(t.label){case 0:return this._l("unlisten()"),e=this.el.get(i),1<(n=this.sl.get(e.targetId)).length?[2,(this.sl.set(e.targetId,n.filter(function(t){return!t.isEqual(i)})),void this.el.delete(i))]:this.isPrimary?(this.X_.r_(e.targetId),this.X_.Xc(e.targetId)?[3,2]:[4,this.Wu.jh(e.targetId,!1).then(function(){r.X_.h_(e.targetId),r.W_.fc(e.targetId),r.Tl(e.targetId)}).catch(Aw)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.Tl(e.targetId),[4,this.Wu.jh(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},CT.prototype.write=function(n,r){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return this._l("write()"),[4,this.Wu.lh(n)];case 1:return e=t.sent(),this.X_.Zc(e.batchId),this.ml(e.batchId,r),[4,this.El(e.zi)];case 2:return t.sent(),[4,this.W_.uc()];case 3:return t.sent(),[2]}})})},CT.prototype.runTransaction=function(t,e,n){new bT(t,this.W_,e,n).K_()},CT.prototype.vh=function(n){return ds(this,void 0,void 0,function(){var e,r=this;return vs(this,function(t){switch(t.label){case 0:this._l("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Wu.vh(n)];case 2:return e=t.sent(),n.Ts.forEach(function(t,e){var n=r.rl.get(e);n&&(D_(t.Ps.size+t.Vs.size+t.gs.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.Ps.size?n.Y_=!0:0<t.Vs.size?D_(n.Y_,"Received change for limbo target document without add."):0<t.gs.size&&(D_(n.Y_,"Received remove for limbo target document without add."),n.Y_=!1))}),[4,this.El(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,Aw(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},CT.prototype.B_=function(r,t){if(this.isPrimary&&0===t||!this.isPrimary&&1===t){this._l("applyOnlineStateChange()");var i=[];this.el.forEach(function(t,e){var n=e.view.B_(r);n.snapshot&&i.push(n.snapshot)}),this.tl.wl(r),this.tl.du(i),this.onlineState=r,this.isPrimary&&this.X_.c_(r)}},CT.prototype.Ic=function(a,u){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return vs(this,function(t){switch(t.label){case 0:return this._l("rejectListens()"),this.X_.a_(a,"rejected",u),e=this.rl.get(a),(n=e&&e.key)?(this.il=this.il.remove(n),this.rl.delete(a),this.Il(),r=(r=new Sg(Tg.F)).it(n,new Ym(n,sg.S())),i=Yb().add(n),o=new i_(sg.MIN,new Map,new Pg(M_),r,i),[2,this.vh(o)]):[4,this.Wu.jh(a,!1).then(function(){return s.Tl(a,u)}).catch(Aw)];case 1:return t.sent(),[2]}})})},CT.prototype.I_=function(n,r,i){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return this._l("applyBatchState()"),[4,this.Wu.fh(n)];case 1:return null===(e=t.sent())?[3,6]:"pending"!==r?[3,3]:[4,this.W_.uc()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.Rl(n,i||null),this.Wu.Yh(n)):P_("Unknown batchState: "+r),t.label=4;case 4:return[4,this.El(e)];case 5:return t.sent(),[3,7];case 6:k_("SyncEngine","Cannot apply mutation batch with id: "+n),t.label=7;case 7:return[2]}})})},CT.prototype.pc=function(r){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:this._l("applySuccessfulWrite()"),e=r.batch.batchId,this.Rl(e,null),this.Al(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Wu.mh(r)];case 2:return n=t.sent(),this.X_.e_(e,"acknowledged"),[4,this.El(n)];case 3:return t.sent(),[3,6];case 4:return[4,Aw(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},CT.prototype.vc=function(n,r){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:this._l("rejectFailedWrite()"),this.Rl(n,r),this.Al(n),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Wu.Ah(n)];case 2:return e=t.sent(),this.X_.e_(n,"rejected",r),[4,this.El(e)];case 3:return t.sent(),[3,6];case 4:return[4,Aw(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},CT.prototype.Pl=function(r){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return this.W_.Ju()||k_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Wu.gh()];case 1:return-1===(e=t.sent())?[2,void r.resolve()]:((n=this.al.get(e)||[]).push(r),this.al.set(e,n),[2])}})})},CT.prototype.Al=function(t){(this.al.get(t)||[]).forEach(function(t){t.resolve()}),this.al.delete(t)},CT.prototype.Vl=function(e){this.al.forEach(function(t){t.forEach(function(t){t.reject(new tg(Zy.CANCELLED,e))})}),this.al.clear()},CT.prototype.ml=function(t,e){var n=this.hl[this.currentUser.s()];n=(n=n||new Sg(M_)).it(t,e),this.hl[this.currentUser.s()]=n},CT.prototype.Rl=function(t,e){var n=this.hl[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.hl[this.currentUser.s()]=n}},CT.prototype.Tl=function(t,e){var n=this;void 0===e&&(e=null),this.X_.r_(t);for(var r=0,i=this.sl.get(t);r<i.length;r++){var o=i[r];this.el.delete(o),e&&this.tl.gl(o,e)}if(this.sl.delete(t),this.isPrimary){var s=this.ol.$i(t);this.ol.Ni(t),s.forEach(function(t){n.ol.Mi(t)||n.pl(t)})}},CT.prototype.pl=function(t){var e=this.il.get(t);null!==e&&(this.W_.fc(e),this.il=this.il.remove(t),this.rl.delete(e),this.Il())},CT.prototype.fl=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof oT?(this.ol.vi(i.key,t),this.yl(i)):i instanceof sT?(k_("SyncEngine","Document no longer in limbo: "+i.key),this.ol.Di(i.key,t),this.ol.Mi(i.key)||this.pl(i.key)):P_("Unknown limbo change: "+JSON.stringify(i))}},CT.prototype.yl=function(t){var e=t.key;this.il.get(e)||(k_("SyncEngine","New document in limbo: "+e),this.nl.push(e),this.Il())},CT.prototype.Il=function(){for(;0<this.nl.length&&this.il.size<this.Z_;){var t=this.nl.shift(),e=this.ul.next();this.rl.set(e,new uT(t)),this.il=this.il.it(t,e),this.W_.listen(new Lb($m.ve(t.path).xe(),e,2,$_.kr))}},CT.prototype.bl=function(){return this.il},CT.prototype.vl=function(){return this.nl},CT.prototype.El=function(r,u){return ds(this,void 0,void 0,function(){var o,s,e,a=this;return vs(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.el.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.k_(r);return n.M_?a.Wu.Kh(i.query,!1).then(function(t){var e=t.documents;return i.view.k_(e,n)}):n}).then(function(t){var e=u&&u.Ts.get(i.targetId),n=i.view.nr(t,!0===a.isPrimary,e);if(a.fl(i.targetId,n.x_),n.snapshot){a.isPrimary&&a.X_.a_(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=J_.br(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.tl.du(o),[4,this.Wu.Lh(s)];case 2:return t.sent(),[2]}})})},CT.prototype._l=function(t){},CT.prototype.Dc=function(r){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?(this.Vl("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Wu.oh(r)]):[3,3];case 1:return n=t.sent(),this.X_.oh(r,n.uh,n._h),[4,this.El(n.ah)];case 2:t.sent(),t.label=3;case 3:return[4,this.W_.Dc()];case 4:return t.sent(),[2]}})})},CT.prototype.Cc=function(c){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return vs(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.W_.Cc(!0)]);case 1:return t.sent(),e=this.X_.Yc(),[4,this.Sl(e.j())];case 2:for(n=t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.W_.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),this.sl.forEach(function(t,e){u.X_.o_(e)?s.push(e):a=a.then(function(){return u.Tl(e),u.Wu.jh(e,!0)}),u.W_.fc(e)}),[4,a]);case 4:return t.sent(),[4,this.Sl(s)];case 5:return t.sent(),this.Dl(),[4,this.W_.Cc(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},CT.prototype.Dl=function(){var n=this;this.rl.forEach(function(t,e){n.W_.fc(e)}),this.ol.Fi(),this.rl=new Map,this.il=new Sg(Tg.F)},CT.prototype.Sl=function(d){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return vs(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.sl.get(o))&&0!==a.length?[4,this.Wu.jh(o,!0)]:[3,8]):[3,14];case 2:return t.sent(),[4,this.Wu.Uh(a[0].xe())];case 3:s=t.sent(),u=0,c=a,t.label=4;case 4:return u<c.length?(h=c[u],l=this.el.get(h),[4,this.dl(l)]):[3,7];case 5:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return[4,this.Wu.ta(o)];case 9:return p=t.sent(),[4,this.Wu.Uh(p)];case 10:return s=t.sent(),[4,this.ll(this.Cl(p),o,!1)];case 11:t.sent(),t.label=12;case 12:e.push(s),t.label=13;case 13:return r++,[3,1];case 14:return[2,(this.tl.du(n),e)]}})})},CT.prototype.Cl=function(t){return new $m(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},CT.prototype.Jh=function(){return this.Wu.Jh()},CT.prototype.R_=function(r,i,o){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return this.isPrimary?(k_("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.sl.has(r))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Wu.ea()];case 3:return e=t.sent(),n=i_.Is(r,"current"===i),[4,this.El(e,n)];case 4:return t.sent(),[3,8];case 5:return[4,this.Wu.jh(r,!0)];case 6:return t.sent(),this.Tl(r,o),[3,8];case 7:P_("Unexpected target state: "+i),t.label=8;case 8:return[2]}})})},CT.prototype.A_=function(f,p){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return vs(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[3,10];e=0,n=f,t.label=1;case 1:return e<n.length?(r=n[e],[4,this.Wu.ta(r)]):[3,6];case 2:return i=t.sent(),[4,this.Wu.Uh(i)];case 3:return o=t.sent(),[4,this.ll(this.Cl(i),o.targetId,!1)];case 4:t.sent(),this.W_.listen(o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return vs(this,function(t){switch(t.label){case 0:return a.sl.has(e)?[4,a.Wu.jh(e,!1).then(function(){l.W_.fc(e),l.Tl(e)}).catch(Aw)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,s(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},CT.prototype.enableNetwork=function(){return this.Wu.Zh(!0),this.W_.enableNetwork()},CT.prototype.disableNetwork=function(){return this.Wu.Zh(!1),this.W_.disableNetwork()},CT.prototype.an=function(t){var e=this.rl.get(t);if(e&&e.Y_)return Yb().add(e.key);var n=Yb(),r=this.sl.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.el.get(s);n=n.Ft(a.view.C_)}return n},CT),wT=(NT.prototype.listen=function(t){var e=t.query,n=!1,r=this.Fl.get(e);return r||(n=!0,r=new cT,this.Fl.set(e,r)),r.Nl.push(t),t.B_(this.onlineState),r.kl&&t.Ml(r.kl)&&this.Ll(),n?this.mc.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},NT.prototype.fc=function(o){return ds(this,void 0,void 0,function(){var e,n,r,i;return vs(this,function(t){return e=o.query,n=!1,(r=this.Fl.get(e))&&0<=(i=r.Nl.indexOf(o))&&(r.Nl.splice(i,1),n=0===r.Nl.length),n?[2,(this.Fl.delete(e),this.mc.fc(e))]:[2]})})},NT.prototype.du=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.Fl.get(o);if(s){for(var a=0,u=s.Nl;a<u.length;a++)u[a].Ml(i)&&(e=!0);s.kl=i}}e&&this.Ll()},NT.prototype.gl=function(t,e){var n=this.Fl.get(t);if(n)for(var r=0,i=n.Nl;r<i.length;r++)i[r].onError(e);this.Fl.delete(t)},NT.prototype.wl=function(i){this.onlineState=i;var o=!1;this.Fl.forEach(function(t,e){for(var n=0,r=e.Nl;n<r.length;n++)r[n].B_(i)&&(o=!0)}),o&&this.Ll()},NT.prototype.Ol=function(t){this.$l.add(t),t.next()},NT.prototype.xl=function(t){this.$l.delete(t)},NT.prototype.Ll=function(){this.$l.forEach(function(t){t.next()})},NT),ET=(ST.prototype.Ml=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new r_(t.query,t.docs,t.cs,e,t._s,t.fromCache,t.ls,!0)}var o=!1;return this.Ul?this.Ql(t)&&(this.Bl.next(t),o=!0):this.Wl(t,this.onlineState)&&(this.jl(t),o=!0),this.ql=t,o},ST.prototype.onError=function(t){this.Bl.error(t)},ST.prototype.B_=function(t){this.onlineState=t;var e=!1;return this.ql&&!this.Ul&&this.Wl(this.ql,t)&&(this.jl(this.ql),e=!0),e},ST.prototype.Wl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Kl&&n||t.docs.U()&&"Offline"!==e)},ST.prototype.Ql=function(t){if(0<t.docChanges.length)return!0;var e=this.ql&&this.ql.hasPendingWrites!==t.hasPendingWrites;return!(!t.ls&&!e)&&!0===this.options.includeMetadataChanges},ST.prototype.jl=function(t){t=r_.fs(t.query,t.docs,t._s,t.fromCache),this.Ul=!0,this.Bl.next(t)},ST),TT=(IT.prototype.ih=function(t){this.Gl=t},IT.prototype.wr=function(e,r,i,o){var s=this;return r.Oe()||i.isEqual(sg.MIN)?this.zl(e,r):this.Gl.Tr(e,o).next(function(t){var n=s.Hl(r,t);return(r.je()||r.Ke())&&s.M_(r.ge,n,o,i)?s.zl(e,r):(C_()<=pa.DEBUG&&k_("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Gl.wr(e,r,i).next(function(e){return n.forEach(function(t){e=e.it(t.key,t)}),e}))})},IT.prototype.Hl=function(n,t){var r=new Pg(function(t,e){return n.Be(t,e)});return t.forEach(function(t,e){e instanceof Qm&&n.matches(e)&&(r=r.add(e))}),r},IT.prototype.M_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.D(r))},IT.prototype.zl=function(t,e){return C_()<=pa.DEBUG&&k_("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Gl.wr(t,e,sg.MIN)},IT);function IT(){}function ST(t,e,n){this.query=t,this.Bl=e,this.Ul=!1,this.ql=null,this.onlineState="Unknown",this.options=n||{}}function NT(t){this.mc=t,this.Fl=new q_(function(t){return t.canonicalId()}),this.onlineState="Unknown",this.$l=new Set,this.mc.subscribe(this)}function CT(t,e,n,r,i){this.Wu=t,this.W_=e,this.X_=n,this.currentUser=r,this.Z_=i,this.tl=null,this.el=new q_(function(t){return t.canonicalId()}),this.sl=new Map,this.nl=[],this.il=new Sg(Tg.F),this.rl=new Map,this.ol=new K_,this.hl={},this.al=new Map,this.ul=gT.y_(),this.isPrimary=void 0,this.onlineState="Unknown"}function AT(t,e,n,r){this.Nr=t,this.W_=e,this.updateFunction=n,this.Lr=r,this.j_=5,this.Ja=new VE(this.Nr,"retry_transaction")}function kT(t,e){this.query=t,this.b_=e,this.v_=null,this.As=!1,this.S_=Yb(),this._s=Yb(),this.D_=new e_(t.Be.bind(t))}function RT(t){this.g_=t}function OT(){this.P_=new dT,this.V_={},this.mc=null,this.$u=null,this.vr=null}function PT(t,e,n,r,i){if(this.$a=t,this.platform=e,this.persistenceKey=n,this.Mc=r,this.mc=null,this.$u=null,this.vr=null,this.Lc={},this.Oc=this.xc.bind(this),this.ko=!1,this.Bc=[],!PT.Uc(this.platform))throw new tg(Zy.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.qc=nT(this.persistenceKey,this.Mc),this.Qc="firestore_sequence_number_"+this.persistenceKey,this.Lc[this.Mc]=new dT,this.Wc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.jc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Kc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Gc="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.Oc)}function DT(){this.activeTargetIds=Jb()}function xT(t,e){this.clientId=t,this.onlineState=e}function LT(t,e){this.clientId=t,this.activeTargetIds=e}function MT(t,e,n){this.targetId=t,this.state=e,this.error=n}function FT(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function UT(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=VT(e)),e=jT(t.get(n),e);return VT(e)}function jT(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function VT(t){return t+""}function qT(t){var e=t.length;if(D_(2<=e,"Invalid path "+t),2===e)return D_(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),yg.H;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&P_('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:P_('Invalid encoded resource path: "'+t+'"')}o=s+2}return new yg(r)}var BT=(YT.Yl=function(o,t,s){return k_("SimpleDb","Opening database:",o),new G_(function(n,r){var i=window.indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new YT(e))},i.onblocked=function(){r(new tg(Zy.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new tg(Zy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){k_("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,TI).next(function(){k_("SimpleDb","Database upgrade to version "+TI+" complete")})}}).Wi()},YT.delete=function(t){return k_("SimpleDb","Removing database:",t),XT(window.indexedDB.deleteDatabase(t)).Wi()},YT.Uc=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(YT.Xl())return!0;if(void 0===window.navigator)return!1;var t=Rs(),e=YT.Jl(t),n=0<e&&e<10,r=YT.Zl(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},YT.Xl=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.td)},YT.ed=function(t,e){return t.store(e)},YT.Jl=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},YT.Zl=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},YT.prototype.sd=function(e){this.db.onversionchange=function(t){return e(t)}},YT.prototype.runTransaction=function(r,c,h){return ds(this,void 0,void 0,function(){var s,a,e,u,n;return vs(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return vs(this,function(t){switch(t.label){case 0:++a,e=KT.open(u.db,s?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),n=h(e).catch(function(t){return e.abort(t),G_.reject(t)}).Wi(),r={},n.catch(function(){}),[4,e.nd];case 2:return[2,(r.value=(t.sent(),n),r)];case 3:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,k_("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),o?[3,4]:[2,{value:Promise.reject(i)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},YT.prototype.close=function(){this.db.close()},YT),WT=(Object.defineProperty(QT.prototype,"Bi",{get:function(){return this.od},enumerable:!0,configurable:!0}),Object.defineProperty(QT.prototype,"ad",{get:function(){return this.hd},enumerable:!0,configurable:!0}),Object.defineProperty(QT.prototype,"cursor",{set:function(t){this.rd=t},enumerable:!0,configurable:!0}),QT.prototype.done=function(){this.od=!0},QT.prototype.ud=function(t){this.hd=t},QT.prototype.delete=function(){return XT(this.rd.delete())},QT),KT=(zT.open=function(t,e,n){return new zT(t.transaction(n,e))},Object.defineProperty(zT.prototype,"nd",{get:function(){return this._d.promise},enumerable:!0,configurable:!0}),zT.prototype.abort=function(t){t&&this._d.reject(t),this.aborted||(k_("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},zT.prototype.store=function(t){var e=this.transaction.objectStore(t);return new HT(e)},zT),HT=(GT.prototype.put=function(t,e){return XT(void 0!==e?(k_("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(k_("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},GT.prototype.add=function(t){return k_("SimpleDb","ADD",this.store.name,t,t),XT(this.store.add(t))},GT.prototype.get=function(e){var n=this;return XT(this.store.get(e)).next(function(t){return void 0===t&&(t=null),k_("SimpleDb","GET",n.store.name,e,t),t})},GT.prototype.delete=function(t){return k_("SimpleDb","DELETE",this.store.name,t),XT(this.store.delete(t))},GT.prototype.count=function(){return k_("SimpleDb","COUNT",this.store.name),XT(this.store.count())},GT.prototype.ld=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.dd(n,function(t,e){r.push(e)}).next(function(){return r})},GT.prototype.fd=function(t,e){k_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Td=!1;var r=this.cursor(n);return this.dd(r,function(t,e,n){return n.delete()})},GT.prototype.md=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.dd(r,e)},GT.prototype.Ed=function(i){var t=this.cursor({});return new G_(function(n,r){t.onerror=function(t){var e=$T(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},GT.prototype.dd=function(t,s){var a=[];return new G_(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new WT(e),r=s(e.primaryKey,e.value,n);if(r instanceof G_){var i=r.catch(function(t){return n.done(),G_.reject(t)});a.push(i)}n.Bi?o():null===n.ad?e.continue():e.continue(n.ad)}else o()}}).next(function(){return G_.Ki(a)})},GT.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},GT.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Td?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},GT);function GT(t){this.store=t}function zT(t){var n=this;this.transaction=t,this.aborted=!1,this._d=new lw,this.transaction.oncomplete=function(){n._d.resolve()},this.transaction.onabort=function(){t.error?n._d.reject(t.error):n._d.resolve()},this.transaction.onerror=function(t){var e=$T(t.target.error);n._d.reject(e)}}function QT(t){this.rd=t,this.od=!1,this.hd=null}function YT(t){this.db=t,12.2===YT.Jl(Rs())&&R_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function XT(t){return new G_(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=$T(t.target.error);r(e)}})}var JT=!1;function $T(t){var e=BT.Jl(Rs());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new tg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return JT||(JT=!0,setTimeout(function(){throw r},0)),r}}return t}var ZT=(tI.Id=function(t,e,n,r){return D_(""!==t.uid,"UserID must not be an empty string."),new tI(t.t()?t.uid:"",e,n,r)},tI.prototype.Rd=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rI(t).md({index:RI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},tI.prototype.mh=function(e,t,n){return this.Ad(e).next(function(t){return t.lastStreamToken=n.toBase64(),oI(e).put(t)})},tI.prototype.ph=function(t){return this.Ad(t).next(function(t){return jg.fromBase64String(t.lastStreamToken)})},tI.prototype.yh=function(e,n){return this.Ad(e).next(function(t){return t.lastStreamToken=n.toBase64(),oI(e).put(t)})},tI.prototype.dh=function(c,h,l,f){var p=this,d=iI(c),v=rI(c);return v.add({}).next(function(t){D_("number"==typeof t,"Auto-generated key is not a number");for(var e=new B_(t,h,l,f),n=p.serializer.Pd(p.userId,e),r=[],i=new Pg(function(t,e){return M_(t.K(),e.K())}),o=0,s=f;o<s.length;o++){var a=s[o],u=OI.key(p.userId,a.key.path,t);i=i.add(a.key.path.L()),r.push(v.put(n)),r.push(d.put(u,OI.PLACEHOLDER))}return i.forEach(function(t){r.push(p.ur.Vd(c,t))}),c.rr(function(){p.wd[t]=e.keys()}),G_.Ki(r).next(function(){return e})})},tI.prototype.Ph=function(t,e){var n=this;return rI(t).get(e).next(function(t){return t?(D_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.gd(t)):null})},tI.prototype.Th=function(t,n){var r=this;return this.wd[n]?G_.resolve(this.wd[n]):this.Ph(t,n).next(function(t){if(t){var e=t.keys();return r.wd[n]=e}return null})},tI.prototype.xh=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return rI(t).md({index:RI.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(D_(e.batchId>=i,"Should have found mutation after "+i),o=r.serializer.gd(e)),n.done()}).next(function(){return o})},tI.prototype.gh=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return rI(t).md({index:RI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},tI.prototype.hh=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rI(t).ld(RI.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.gd(t)})})},tI.prototype._r=function(a,u){var c=this,t=OI.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return iI(a).md({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=qT(i);if(r===c.userId&&u.path.isEqual(s))return rI(a).get(o).next(function(t){if(!t)throw P_("Dangling document-mutation reference found: "+e+" which points to "+o);D_(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),h.push(c.serializer.gd(t))});n.done()}).next(function(){return h})},tI.prototype.Er=function(r,t){var u=this,c=new Pg(M_),i=[];return t.forEach(function(a){var t=OI.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=iI(r).md({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=qT(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),G_.Ki(i).next(function(){return u.pd(r,c)})},tI.prototype.Vr=function(t,e){var a=this,u=e.path,c=u.length+1,n=OI.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new Pg(M_);return iI(t).md({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=qT(i);r===a.userId&&u.q(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.pd(t,h)})},tI.prototype.pd=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(rI(t).get(e).next(function(t){if(null===t)throw P_("Dangling document-mutation reference found, which points to "+e);D_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.gd(t))}))}),G_.Ki(i).next(function(){return r})},tI.prototype.Vh=function(e,n){var r=this;return nI(e.yd,this.userId,n).next(function(t){return e.rr(function(){r.Xh(n.batchId)}),G_.forEach(t,function(t){return r.Jo.bd(e,t)})})},tI.prototype.Xh=function(t){delete this.wd[t]},tI.prototype.Rh=function(n){var o=this;return this.Rd(n).next(function(t){if(!t)return G_.resolve();var e=IDBKeyRange.lowerBound(OI.prefixForUser(o.userId)),i=[];return iI(n).md({range:e},function(t,e,n){if(t[0]===o.userId){var r=qT(t[1]);i.push(r)}else n.done()}).next(function(){D_(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.K()}))})})},tI.prototype.Mi=function(t,e){return eI(t,this.userId,e)},tI.prototype.Ad=function(t){var e=this;return oI(t).get(this.userId).next(function(t){return t||new kI(e.userId,-1,"")})},tI);function tI(t,e,n,r){this.userId=t,this.serializer=e,this.ur=n,this.Jo=r,this.wd={}}function eI(t,o,e){var n=OI.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return iI(t).md({range:r,Td:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function nI(t,e,n){var r=t.store(RI.store),i=t.store(OI.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.md({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){D_(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=OI.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return G_.Ki(o).next(function(){return c})}function rI(t){return JI.ed(t,RI.store)}function iI(t){return JI.ed(t,OI.store)}function oI(t){return JI.ed(t,kI.store)}var sI=(aI.prototype.Qh=function(n){var r=this;return this.vd(n).next(function(t){var e=new gT(t.highestTargetId);return t.highestTargetId=e.next(),r.Sd(n,t).next(function(){return t.highestTargetId})})},aI.prototype.bh=function(t){return this.vd(t).next(function(t){return sg.v(new og(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},aI.prototype.Dd=function(t){return hI(t.yd)},aI.prototype.$h=function(e,n,r){var i=this;return this.vd(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.k()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Sd(e,t)})},aI.prototype.Wh=function(e,n){var r=this;return this.Cd(e,n).next(function(){return r.vd(e).next(function(t){return t.targetCount+=1,r.kd(n,t),r.Sd(e,t)})})},aI.prototype.Nh=function(t,e){return this.Cd(t,e)},aI.prototype.Nd=function(e,t){var n=this;return this.Fd(e,t.targetId).next(function(){return uI(e).delete(t.targetId)}).next(function(){return n.vd(e)}).next(function(t){return D_(0<t.targetCount,"Removing from an empty target cache"),--t.targetCount,n.Sd(e,t)})},aI.prototype.xo=function(r,i,o){var s=this,a=0,u=[];return uI(r).md(function(t,e){var n=s.serializer.$d(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.Nd(r,n)))}).next(function(){return G_.Ki(u)}).next(function(){return a})},aI.prototype.Xs=function(t,r){var i=this;return uI(t).md(function(t,e){var n=i.serializer.$d(e);r(n)})},aI.prototype.vd=function(t){return cI(t.yd)},aI.prototype.Sd=function(t,e){return JI.ed(t,jI.store).put(jI.key,e)},aI.prototype.Cd=function(t,e){return uI(t).put(this.serializer.Md(e))},aI.prototype.kd=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},aI.prototype.Ld=function(t){return this.vd(t).next(function(t){return t.targetCount})},aI.prototype.qh=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),s=null;return uI(t).md({range:n,index:FI.queryTargetsIndexName},function(t,e,n){var r=o.serializer.$d(e);i.isEqual(r.target)&&(s=r,n.done())}).next(function(){return s})},aI.prototype.Dh=function(n,t,r){var i=this,o=[],s=lI(n);return t.forEach(function(t){var e=UT(t.path);o.push(s.put(new UI(r,e))),o.push(i.Jo.vi(n,t))}),G_.Ki(o)},aI.prototype.Sh=function(n,t,r){var i=this,o=lI(n);return G_.forEach(t,function(t){var e=UT(t.path);return G_.Ki([o.delete([r,e]),i.Jo.Di(n,t)])})},aI.prototype.Fd=function(t,e){var n=lI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},aI.prototype.Gh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=lI(t),o=Yb();return r.md({range:n,Td:!0},function(t,e,n){var r=qT(t[1]),i=new Tg(r);o=o.add(i)}).next(function(){return o})},aI.prototype.Mi=function(t,e){var n=UT(e.path),r=IDBKeyRange.bound([n],[U_(n)],!1,!0),i=0;return lI(t).md({index:UI.documentTargetsIndex,Td:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},aI.prototype.un=function(t,e){var n=this;return uI(t).get(e).next(function(t){return t?n.serializer.$d(t):null})},aI);function aI(t,e){this.Jo=t,this.serializer=e}function uI(t){return JI.ed(t,FI.store)}function cI(t){return BT.ed(t,jI.store).get(jI.key).next(function(t){return D_(null!==t,"Missing metadata row."),t})}function hI(t){return cI(t).next(function(t){return t.highestListenSequenceNumber})}function lI(t){return JI.ed(t,UI.store)}var fI,pI=(dI.prototype.Yi=function(t,e,n){return yI(t).put(gI(e),n)},dI.prototype.Zi=function(t,e){var n=yI(t),r=gI(e);return n.delete(r)},dI.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Od(e,t)})},dI.prototype.tr=function(t,e){var n=this;return yI(t).get(gI(e)).next(function(t){return n.xd(t)})},dI.prototype.Bd=function(t,e){var n=this;return yI(t).get(gI(e)).next(function(t){var e=n.xd(t);return e?{Ud:e,size:mI(t)}:null})},dI.prototype.getEntries=function(t,e){var r=this,i=Wb();return this.qd(t,e,function(t,e){var n=r.xd(e);i=i.it(t,n)}).next(function(){return i})},dI.prototype.Qd=function(t,e){var r=this,i=Wb(),o=new Sg(Tg.F);return this.qd(t,e,function(t,e){var n=r.xd(e);o=n?(i=i.it(t,n),o.it(t,mI(e))):(i=i.it(t,null),o.it(t,0))}).next(function(){return{Wd:i,jd:o}})},dI.prototype.qd=function(t,e,i){if(e.U())return G_.resolve();var n=IDBKeyRange.bound(e.first().path.j(),e.last().path.j()),o=e._t(),s=o.wt();return yI(t).md({range:n},function(t,e,n){for(var r=Tg.nt(t);s&&Tg.F(s,r)<0;)i(s,null),s=o.wt();s&&s.isEqual(r)&&(i(s,e),s=o.It()?o.wt():null),s?n.ud(s.path.j()):n.done()}).next(function(){for(;s;)i(s,null),s=o.It()?o.wt():null})},dI.prototype.wr=function(t,i,e){var o=this,s=Hb(),a=i.path.length+1,n={};if(e.isEqual(sg.MIN)){var r=i.path.j();n.range=IDBKeyRange.lowerBound(r)}else{var u=i.path.j(),c=this.serializer.Kd(e);n.range=IDBKeyRange.lowerBound([u,c],!0),n.index=LI.collectionReadTimeIndex}return yI(t).md(n,function(t,e,n){if(t.length===a){var r=o.serializer.Gd(e);i.path.q(r.key.path)?r instanceof Qm&&i.matches(r)&&(s=s.it(r.key,r)):n.done()}}).next(function(){return s})},dI.prototype.ea=function(t,e){var r=this,i=Bb(),o=this.serializer.Kd(e),n=yI(t),s=IDBKeyRange.lowerBound(o,!0);return n.md({index:LI.readTimeIndex,range:s},function(t,e){var n=r.serializer.Gd(e);i=i.it(n.key,n),o=e.readTime}).next(function(){return{sa:i,readTime:r.serializer.zd(o)}})},dI.prototype.na=function(t){var r=this,e=yI(t),i=sg.MIN;return e.md({index:LI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(i=r.serializer.zd(e.readTime)),n.done()}).next(function(){return i})},dI.prototype.Eh=function(t){return new dI.Hd(this,!!t&&t.wh)},dI.prototype.Jd=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},dI.prototype.getMetadata=function(t){return vI(t).get(MI.key).next(function(t){return D_(!!t,"Missing document cache metadata"),t})},dI.prototype.Od=function(t,e){return vI(t).put(MI.key,e)},dI.prototype.xd=function(t){if(t){var e=this.serializer.Gd(t);return e instanceof Ym&&e.version.isEqual(sg.S())?null:e}return null},dI);function dI(t,e){this.serializer=t,this.ur=e}function vI(t){return JI.ed(t,MI.store)}function yI(t){return JI.ed(t,LI.store)}function gI(t){return t.path.j()}function mI(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw P_("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}function bI(t,e){var n=this;return(n=fI.call(this)||this).Yd=t,n.wh=e,n.Xd=new q_(function(t){return t.toString()}),n}function _I(t,e){this.seconds=t,this.nanoseconds=e}pI.Hd=(fs(bI,fI=z_),bI.prototype.nr=function(s){var a=this,u=[],c=0,h=new Pg(function(t,e){return M_(t.K(),e.K())});return this.zi.forEach(function(t,e){var n=a.Xd.get(t);if(e){var r=a.Yd.serializer.Zd(e,a.readTime);h=h.add(t.path.L());var i=mI(r);c+=i-n,u.push(a.Yd.Yi(s,t,r))}else if(c-=n,a.wh){var o=a.Yd.serializer.Zd(new Ym(t,sg.S()),a.readTime);u.push(a.Yd.Yi(s,t,o))}else u.push(a.Yd.Zi(s,t))}),h.forEach(function(t){u.push(a.Yd.ur.Vd(s,t))}),u.push(this.Yd.updateMetadata(s,c)),G_.Ki(u)},bI.prototype.er=function(t,e){var n=this;return this.Yd.Bd(t,e).next(function(t){return null===t?(n.Xd.set(e,0),null):(n.Xd.set(e,t.size),t.Ud)})},bI.prototype.sr=function(t,e){var n=this;return this.Yd.Qd(t,e).next(function(t){var e=t.Wd;return t.jd.forEach(function(t,e){n.Xd.set(t,e)}),e})},bI);var wI=(AI.prototype.Vd=function(t,e){return this.tf.add(e),G_.resolve()},AI.prototype.Pr=function(t,e){return G_.resolve(this.tf.getEntries(e))},AI),EI=(CI.prototype.add=function(t){var e=t.B(),n=t.L(),r=this.index[e]||new Pg(yg.F),i=!r.has(n);return this.index[e]=r.add(n),i},CI.prototype.has=function(t){var e=t.B(),n=t.L(),r=this.index[e];return r&&r.has(n)},CI.prototype.getEntries=function(t){return(this.index[t]||new Pg(yg.F)).j()},CI),TI=10,II=(NI.prototype.createOrUpgrade=function(n,r,t,e){var i=this;D_(t<e&&0<=t&&e<=TI,"Unexpected schema upgrade from v"+t+" to v"+e+".");var o,s=new KT(r);t<1&&1<=e&&(n.createObjectStore(SI.store),(o=n).createObjectStore(kI.store,{keyPath:kI.keyPath}),o.createObjectStore(RI.store,{keyPath:RI.keyPath,autoIncrement:!0}).createIndex(RI.userMutationsIndex,RI.userMutationsKeyPath,{unique:!0}),o.createObjectStore(OI.store),qI(n),n.createObjectStore(LI.store));var a,u=G_.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(UI.store),a.deleteObjectStore(FI.store),a.deleteObjectStore(jI.store),qI(n)),u=u.next(function(){return t=s.store(jI.store),e=new jI(0,0,sg.MIN.k(),0),t.put(jI.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(RI.store).ld().next(function(t){r.deleteObjectStore(RI.store),r.createObjectStore(RI.store,{keyPath:RI.keyPath,autoIncrement:!0}).createIndex(RI.userMutationsIndex,RI.userMutationsKeyPath,{unique:!0});var e=i.store(RI.store),n=t.map(function(t){return e.put(t)});return G_.Ki(n)});var r,i})),u=u.next(function(){n.createObjectStore(BI.store,{keyPath:BI.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(MI.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(LI.store)).createIndex(LI.readTimeIndex,LI.readTimeIndexPath,{unique:!1}),t.createIndex(LI.collectionReadTimeIndex,LI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},NI.prototype.addDocumentGlobal=function(e){var n=0;return e.store(LI.store).md(function(t,e){n+=mI(e)}).next(function(){var t=new MI(n);return e.store(MI.store).put(MI.key,t)})},NI.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(kI.store),e=r.store(RI.store);return t.ld().next(function(t){return G_.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.ld(RI.userMutationsIndex,t).next(function(t){return G_.forEach(t,function(t){D_(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.gd(t);return nI(r,n.userId,e).next(function(){})})})})})},NI.prototype.ensureSequenceNumbers=function(t){var s=t.store(UI.store),e=t.store(LI.store);return hI(t).next(function(i){var o=[];return e.md(function(t,e){var n=new yg(t),r=[0,UT(n)];o.push(s.get(r).next(function(t){return t?G_.resolve():s.put(new UI(0,UT(n),i))}))}).next(function(){return G_.Ki(o)})})},NI.prototype.createCollectionParentIndex=function(t,e){function r(t){if(o.add(t)){var e=t.B(),n=t.L();return i.put({collectionId:e,parent:UT(n)})}}t.createObjectStore(VI.store,{keyPath:VI.keyPath});var i=e.store(VI.store),o=new EI;return e.store(LI.store).md({Td:!0},function(t,e){return r(new yg(t).L())}).next(function(){return e.store(OI.store).md({Td:!0},function(t,e){t[0];var n=t[1];return r((t[2],qT(n)).L())})})},NI.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(FI.store);return o.md(function(t,e){var n=i.serializer.$d(e),r=i.serializer.Md(n);return o.put(r)})},NI),SI=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function NI(t){this.serializer=t}function CI(){this.index={}}function AI(){this.tf=new EI}SI.store="owner",SI.key="owner";var kI=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};kI.store="mutationQueues",kI.keyPath="userId";var RI=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};RI.store="mutations",RI.keyPath="batchId",RI.userMutationsIndex="userMutationsIndex",RI.userMutationsKeyPath=["userId","batchId"];var OI=(PI.prefixForUser=function(t){return[t]},PI.prefixForPath=function(t,e){return[t,UT(e)]},PI.key=function(t,e,n){return[t,UT(e),n]},PI);function PI(){}function DI(t,e){this.path=t,this.readTime=e}function xI(t,e){this.path=t,this.version=e}OI.store="documentMutations",OI.PLACEHOLDER=new OI;var LI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};LI.store="remoteDocuments",LI.readTimeIndex="readTimeIndex",LI.readTimeIndexPath="readTime",LI.collectionReadTimeIndex="collectionReadTimeIndex",LI.collectionReadTimeIndexPath=["parentPath","readTime"];var MI=function(t){this.byteSize=t};MI.store="remoteDocumentGlobal",MI.key="remoteDocumentGlobalKey";var FI=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};FI.store="targets",FI.keyPath="targetId",FI.queryTargetsIndexName="queryTargetsIndex",FI.queryTargetsKeyPath=["canonicalId","targetId"];var UI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};UI.store="targetDocuments",UI.keyPath=["targetId","path"],UI.documentTargetsIndex="documentTargetsIndex",UI.documentTargetsKeyPath=["path","targetId"];var jI=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};jI.key="targetGlobalKey",jI.store="targetGlobal";var VI=function(t,e){this.collectionId=t,this.parent=e};function qI(t){t.createObjectStore(UI.store,{keyPath:UI.keyPath}).createIndex(UI.documentTargetsIndex,UI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(FI.store,{keyPath:FI.keyPath}).createIndex(FI.queryTargetsIndexName,FI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(jI.store)}VI.store="collectionParents",VI.keyPath=["collectionId","parent"];var BI=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};BI.store="clientMetadata",BI.keyPath="clientId";var WI=bs(bs(bs([kI.store,RI.store,OI.store,LI.store,FI.store,SI.store,jI.store,UI.store],[BI.store]),[MI.store]),[VI.store]),KI=(HI.prototype.Vd=function(t,e){var n=this;if(this.ef.has(e))return G_.resolve();var r=e.B(),i=e.L();t.rr(function(){n.ef.add(e)});var o={collectionId:r,parent:UT(i)};return GI(t).put(o)},HI.prototype.Pr=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[U_(i),""],!1,!0);return GI(t).ld(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(qT(r.parent))}return o})},HI);function HI(){this.ef=new EI}function GI(t){return JI.ed(t,VI.store)}var zI,QI=(tS.prototype.Gd=function(t){if(t.document)return this.sf.vn(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Tg.nt(t.noDocument.path),n=this.nf(t.noDocument.readTime);return new Ym(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=Tg.nt(t.unknownDocument.path),i=this.nf(t.unknownDocument.version);return new Xm(r,i)}return P_("Unexpected DbRemoteDocument")},tS.prototype.Zd=function(t,e){var n=this.Kd(e),r=t.key.path.L().j();if(t instanceof Qm){var i=this.sf.bn(t),o=t.hasCommittedMutations;return new LI(null,null,i,o,n,r)}if(t instanceof Ym){var s=t.key.path.j(),a=this.if(t.version),u=t.hasCommittedMutations;return new LI(null,new DI(s,a),null,u,n,r)}if(t instanceof Xm){var c=t.key.path.j(),h=this.if(t.version);return new LI(new xI(c,h),null,null,!0,n,r)}return P_("Unexpected MaybeDocument")},tS.prototype.Kd=function(t){var e=t.k();return[e.seconds,e.nanoseconds]},tS.prototype.zd=function(t){var e=new og(t[0],t[1]);return sg.v(e)},tS.prototype.if=function(t){var e=t.k();return new _I(e.seconds,e.nanoseconds)},tS.prototype.nf=function(t){var e=new og(t.seconds,t.nanoseconds);return sg.v(e)},tS.prototype.Pd=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.sf.$n(t)}),i=e.mutations.map(function(t){return n.sf.$n(t)});return new RI(t,e.batchId,e.Ri.toMillis(),r,i)},tS.prototype.gd=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.sf.xn(t)}),r=t.mutations.map(function(t){return e.sf.xn(t)}),i=og.fromMillis(t.localWriteTimeMs);return new B_(t.batchId,i,n,r)},tS.prototype.$d=function(t){var e,n=this.nf(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.nf(t.lastLimboFreeSnapshotVersion):sg.MIN;return e=void 0!==t.query.documents?this.sf.Kn(t.query):this.sf.Yn(t.query),new Lb(e,t.targetId,0,t.lastListenSequenceNumber,n,r,jg.fromBase64String(t.resumeToken))},tS.prototype.Md=function(t){var e,n=this.if(t.ts),r=this.if(t.lastLimboFreeSnapshotVersion);e=t.target.Pe()?this.sf.jn(t.target):this.sf.Gn(t.target);var i=t.resumeToken.toBase64();return new FI(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},tS),YI="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",XI=(fs(ZI,zI=Y_),ZI),JI=($I.ed=function(t,e){if(t instanceof XI)return BT.ed(t.yd,e);throw P_("IndexedDbPersistence must use instances of IndexedDbTransaction")},$I.mf=function(t){if(!$I.Uc())throw new tg(Zy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return new $I(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.Ef,t.$a,t.serializer,t.rf)},$I.prototype.start=function(){var e=this;return BT.Yl(this.df,TI,new II(this.serializer)).then(function(t){return e.wf=t,e.If()}).then(function(){return e.Rf(),e.Af(),e.Pf(),e.wf.runTransaction("readonly",[jI.store],function(t){return hI(t)})}).then(function(t){e.Vf=new $_(t,e.rf)}).then(function(){e.hf=!0}).catch(function(t){return e.wf&&e.wf.close(),Promise.reject(t)})},$I.prototype.gf=function(n){var t=this;return this.lf=function(e){return ds(t,void 0,void 0,function(){return vs(this,function(t){return this.ko?[2,n(e)]:[2]})})},n(this.isPrimary)},$I.prototype.pf=function(n){var t=this;this.wf.sd(function(e){return ds(t,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},$I.prototype.Zh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.$a.qr(function(){return ds(e,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.ko?[4,this.If()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},$I.prototype.If=function(){var n=this;return this.wf.runTransaction("readwrite",WI,function(e){return nS(e).put(new BI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.yf(e).next(function(t){t||(n.isPrimary=!1,n.$a.qr(function(){return n.lf(!1)}))})}).next(function(){return n.bf(e)}).next(function(t){return n.isPrimary&&!t?n.vf(e).next(function(){return!1}):!!t&&n.Sf(e).next(function(){return!0})})}).catch(function(t){if(!n.allowTabSynchronization)throw t;return k_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.$a.qr(function(){return n.lf(t)}),n.isPrimary=t})},$I.prototype.yf=function(t){var e=this;return eS(t).get(SI.key).next(function(t){return G_.resolve(e.Df(t))})},$I.prototype.Cf=function(t){return nS(t).delete(this.clientId)},$I.prototype.kf=function(){return ds(this,void 0,void 0,function(){var i=this;return vs(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Nf(this._f,18e5)?[3,2]:(this._f=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=$I.ed(t,BI.store);return r.ld().next(function(t){var e=i.Ff(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return G_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:t.sent().forEach(function(t){i.window.localStorage.removeItem(i.$f(t.clientId))}),t.label=2;case 2:return[2]}})})},$I.prototype.Pf=function(){var t=this;this.cf=this.$a.eo("client_metadata_refresh",4e3,function(){return t.If().then(function(){return t.kf()}).then(function(){return t.Pf()})})},$I.prototype.Df=function(t){return!!t&&t.ownerId===this.clientId},$I.prototype.bf=function(e){var i=this;return eS(e).get(SI.key).next(function(t){if(null!==t&&i.Nf(t.leaseTimestampMs,5e3)&&!i.Mf(t.ownerId)){if(i.Df(t)&&i.networkEnabled)return!0;if(!i.Df(t)){if(!t.allowTabSynchronization)throw new tg(Zy.FAILED_PRECONDITION,YI);return!1}}return!(!i.networkEnabled||!i.inForeground)||nS(e).ld().next(function(t){return void 0===i.Ff(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&k_("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},$I.prototype.lc=function(){return ds(this,void 0,void 0,function(){var e=this;return vs(this,function(t){switch(t.label){case 0:return this.hf=!1,this.Lf(),this.cf&&(this.cf.cancel(),this.cf=null),this.Of(),this.xf(),[4,this.wf.runTransaction("readwrite",[SI.store,BI.store],function(t){return e.vf(t).next(function(){return e.Cf(t)})})];case 1:return t.sent(),this.wf.close(),this.Bf(),[2]}})})},$I.prototype.Ff=function(t,e){var n=this;return t.filter(function(t){return n.Nf(t.updateTimeMs,e)&&!n.Mf(t.clientId)})},$I.prototype.Jh=function(){var e=this;return this.wf.runTransaction("readonly",[BI.store],function(t){return nS(t).ld().next(function(t){return e.Ff(t,18e5).map(function(t){return t.clientId})})})},$I.clearPersistence=function(n){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return $I.Uc()?(e=n+$I.ff,[4,BT.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty($I.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),$I.prototype.Yo=function(t){return ZT.Id(t,this.serializer,this.ur,this.Jo)},$I.prototype.eh=function(){return this.th},$I.prototype.Zo=function(){return this.hr},$I.prototype.nh=function(){return this.ur},$I.prototype.runTransaction=function(n,t,r){var i=this;k_("IndexedDbPersistence","Starting transaction:",n);var o,e="readonly"===t?"readonly":"readwrite";return this.wf.runTransaction(e,WI,function(e){return o=new XI(e,i.Vf.next()),"readwrite-primary"===t?i.yf(e).next(function(t){return!!t||i.bf(e)}).next(function(t){if(!t)throw R_("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.$a.qr(function(){return i.lf(!1)}),new tg(Zy.FAILED_PRECONDITION,Q_);return r(o)}).next(function(t){return i.Sf(e).next(function(){return t})}):i.Uf(e).next(function(){return r(o)})}).then(function(t){return o.or(),t})},$I.prototype.Uf=function(t){var e=this;return eS(t).get(SI.key).next(function(t){if(null!==t&&e.Nf(t.leaseTimestampMs,5e3)&&!e.Mf(t.ownerId)&&!e.Df(t)&&!t.allowTabSynchronization)throw new tg(Zy.FAILED_PRECONDITION,YI)})},$I.prototype.Sf=function(t){var e=new SI(this.clientId,this.allowTabSynchronization,Date.now());return eS(t).put(SI.key,e)},$I.Uc=function(){return BT.Uc()},$I.qf=function(t){var e=t.cn.projectId;return t.cn.Ei||(e+="."+t.cn.database),"firestore/"+t.persistenceKey+"/"+e+"/"},$I.prototype.vf=function(t){var e=this,n=eS(t);return n.get(SI.key).next(function(t){return e.Df(t)?(k_("IndexedDbPersistence","Releasing primary lease."),n.delete(SI.key)):G_.resolve()})},$I.prototype.Nf=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(R_("Detected an update time that is in the future: "+t+" > "+n),1))},$I.prototype.Rf=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.uf=function(){t.$a.qr(function(){return t.inForeground="visible"===t.document.visibilityState,t.If()})},this.document.addEventListener("visibilitychange",this.uf),this.inForeground="visible"===this.document.visibilityState)},$I.prototype.Of=function(){this.uf&&(this.document.removeEventListener("visibilitychange",this.uf),this.uf=null)},$I.prototype.Af=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.af=function(){t.Lf(),t.$a.qr(function(){return t.lc()})},this.window.addEventListener("unload",this.af))},$I.prototype.xf=function(){this.af&&(this.window.removeEventListener("unload",this.af),this.af=null)},$I.prototype.Mf=function(t){try{var e=null!==this.Tf.getItem(this.$f(t));return k_("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return R_("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},$I.prototype.Lf=function(){try{this.Tf.setItem(this.$f(this.clientId),String(Date.now()))}catch(t){R_("Failed to set zombie client id.",t)}},$I.prototype.Bf=function(){try{this.Tf.removeItem(this.$f(this.clientId))}catch(t){}},$I.prototype.$f=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},$I);function $I(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.$a=o,this.rf=a,this.hf=!1,this.isPrimary=!1,this.networkEnabled=!0,this.af=null,this.inForeground=!1,this.uf=null,this.cf=null,this._f=Number.NEGATIVE_INFINITY,this.lf=function(t){return Promise.resolve()},this.Jo=new rS(this,i),this.df=e+$I.ff,this.serializer=new QI(s),this.document=r.document,this.th=new sI(this.Jo,this.serializer),this.ur=new KI,this.hr=new pI(this.serializer,this.ur),!r.window||!r.window.localStorage)throw new tg(Zy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.Tf=this.window.localStorage}function ZI(t,e){var n=this;return(n=zI.call(this)||this).yd=t,n.Ch=e,n}function tS(t){this.sf=t}function eS(t){return t.store(SI.store)}function nS(t){return t.store(BI.store)}JI.ff="main";var rS=(iS.prototype.Mo=function(t){var n=this.Wf(t);return this.db.eh().Ld(t).next(function(e){return n.next(function(t){return e+t})})},iS.prototype.Wf=function(t){var e=0;return this.Oo(t,function(t){e++}).next(function(){return e})},iS.prototype.Xs=function(t,e){return this.db.eh().Xs(t,e)},iS.prototype.Oo=function(t,n){return this.jf(t,function(t,e){return n(e)})},iS.prototype.Ho=function(t){this.Qf=t},iS.prototype.vi=function(t,e){return oS(t,e)},iS.prototype.Di=function(t,e){return oS(t,e)},iS.prototype.xo=function(t,e,n){return this.db.eh().xo(t,e,n)},iS.prototype.bd=function(t,e){return oS(t,e)},iS.prototype.Kf=function(t,e){return this.Qf.Mi(e)?G_.resolve(!0):(r=e,i=!1,oI(n=t).Ed(function(t){return eI(n,t,r).next(function(t){return t&&(i=!0),G_.resolve(!t)})}).next(function(){return i}));var n,r,i},iS.prototype.Bo=function(r,i){var o=this,s=this.db.Zo().Eh(),a=[],u=0;return this.jf(r,function(e,t){if(t<=i){var n=o.Kf(r,e).next(function(t){if(!t)return u++,s.tr(r,e).next(function(){return s.Zi(e),lI(r).delete([0,UT(e.path)])})});a.push(n)}}).next(function(){return G_.Ki(a)}).next(function(){return s.apply(r)}).next(function(){return u})},iS.prototype.removeTarget=function(t,e){var n=e.es(t.Ch);return this.db.eh().Nh(t,n)},iS.prototype.Fh=function(t,e){return oS(t,e)},iS.prototype.jf=function(t,o){var s,e=lI(t),a=$_.kr;return e.md({index:UI.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==$_.kr&&o(new Tg(qT(s)),a),a=i,s=r):a=$_.kr}).next(function(){a!==$_.kr&&o(new Tg(qT(s)),a)})},iS.prototype.qo=function(t){return this.db.Zo().Jd(t)},iS);function iS(t,e){this.db=t,this.Qf=null,this.bo=new Tw(this,e)}function oS(t,e){return lI(t).put((n=t.Ch,new UI(0,UT(e.path),n)));var n}var sS,aS=(hS.prototype.Rd=function(t){return G_.resolve(0===this.ar.length)},hS.prototype.mh=function(t,e,n){var r=e.batchId,i=this.Hf(r,"acknowledged");return D_(0===i,"Can only acknowledge the first batch in the mutation queue"),this.ar[i],this.lastStreamToken=n,G_.resolve()},hS.prototype.ph=function(t){return G_.resolve(this.lastStreamToken)},hS.prototype.yh=function(t,e){return this.lastStreamToken=e,G_.resolve()},hS.prototype.dh=function(t,e,n,r){var i=this.Gf;this.Gf++,0<this.ar.length&&this.ar[this.ar.length-1];var o=new B_(i,e,n,r);this.ar.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.zf=this.zf.add(new H_(u.key,i)),this.ur.Vd(t,u.key.path.L())}return G_.resolve(o)},hS.prototype.Ph=function(t,e){return G_.resolve(this.Jf(e))},hS.prototype.Th=function(t,e){var n=this.Jf(e);return G_.resolve(n.keys())},hS.prototype.xh=function(t,e){var n=e+1,r=this.Yf(n),i=r<0?0:r;return G_.resolve(this.ar.length>i?this.ar[i]:null)},hS.prototype.gh=function(){return G_.resolve(0===this.ar.length?-1:this.Gf-1)},hS.prototype.hh=function(t){return G_.resolve(this.ar.slice())},hS.prototype._r=function(t,e){var n=this,r=new H_(e,0),i=new H_(e,Number.POSITIVE_INFINITY),o=[];return this.zf.Ct([r,i],function(t){var e=n.Jf(t.Li);o.push(e)}),G_.resolve(o)},hS.prototype.Er=function(t,e){var r=this,i=new Pg(M_);return e.forEach(function(t){var e=new H_(t,0),n=new H_(t,Number.POSITIVE_INFINITY);r.zf.Ct([e,n],function(t){i=i.add(t.Li)})}),G_.resolve(this.Xf(i))},hS.prototype.Vr=function(t,e){var n=e.path,r=n.length+1,i=n;Tg.st(i)||(i=i.child(""));var o=new H_(new Tg(i),0),s=new Pg(M_);return this.zf.kt(function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.Li)),!0)},o),G_.resolve(this.Xf(s))},hS.prototype.Xf=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Jf(t);null!==e&&r.push(e)}),r},hS.prototype.Vh=function(n,r){var i=this;D_(0===this.Hf(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.ar.shift();var o=this.zf;return G_.forEach(r.mutations,function(t){var e=new H_(t.key,r.batchId);return o=o.delete(e),i.Jo.bd(n,t.key)}).next(function(){i.zf=o})},hS.prototype.Xh=function(t){},hS.prototype.Mi=function(t,e){var n=new H_(e,0),r=this.zf.Nt(n);return G_.resolve(e.isEqual(r&&r.key))},hS.prototype.Rh=function(t){return this.ar.length,G_.resolve()},hS.prototype.Hf=function(t,e){return this.Yf(t)},hS.prototype.Yf=function(t){return 0===this.ar.length?0:t-this.ar[0].batchId},hS.prototype.Jf=function(t){var e=this.Yf(t);return e<0||e>=this.ar.length?null:this.ar[e]},hS),uS=(cS.prototype.Yi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zf(e);return this.docs=this.docs.it(r,{Ud:e,size:s,readTime:n}),this.size+=s-o,this.ur.Vd(t,r.path.L())},cS.prototype.Zi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},cS.prototype.tr=function(t,e){var n=this.docs.get(e);return G_.resolve(n?n.Ud:null)},cS.prototype.getEntries=function(t,e){var n=this,r=Wb();return e.forEach(function(t){var e=n.docs.get(t);r=r.it(t,e?e.Ud:null)}),G_.resolve(r)},cS.prototype.wr=function(t,e,n){for(var r=Hb(),i=new Tg(e.path.child("")),o=this.docs.lt(i);o.It();){var s=o.wt(),a=s.key,u=s.value,c=u.Ud,h=u.readTime;if(!e.path.q(a.path))break;h.D(n)<=0||c instanceof Qm&&e.matches(c)&&(r=r.it(c.key,c))}return G_.resolve(r)},cS.prototype.tT=function(t,e){return G_.forEach(this.docs,function(t){return e(t)})},cS.prototype.ea=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},cS.prototype.na=function(t){return G_.resolve(sg.MIN)},cS.prototype.Eh=function(t){return new cS.Hd(this)},cS.prototype.Jd=function(t){return G_.resolve(this.size)},cS);function cS(t,e){this.ur=t,this.Zf=e,this.docs=new Sg(Tg.F),this.size=0}function hS(t,e){this.ur=t,this.Jo=e,this.ar=[],this.Gf=1,this.lastStreamToken=jg.xt,this.zf=new Pg(H_.Ee)}function lS(t){var e=this;return(e=sS.call(this)||this).Yd=t,e}uS.Hd=(fs(lS,sS=z_),lS.prototype.nr=function(n){var r=this,i=[];return this.zi.forEach(function(t,e){e?i.push(r.Yd.Yi(n,e,r.readTime)):r.Yd.Zi(t)}),G_.Ki(i)},lS.prototype.er=function(t,e){return this.Yd.tr(t,e)},lS.prototype.sr=function(t,e){return this.Yd.getEntries(t,e)},lS);var fS,pS,dS=(kS.prototype.Xs=function(t,n){return this.eT.forEach(function(t,e){return n(e)}),G_.resolve()},kS.prototype.bh=function(t){return G_.resolve(this.lastRemoteSnapshotVersion)},kS.prototype.Dd=function(t){return G_.resolve(this.sT)},kS.prototype.Qh=function(t){return this.highestTargetId=this.iT.next(),G_.resolve(this.highestTargetId)},kS.prototype.$h=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sT&&(this.sT=e),G_.resolve()},kS.prototype.Cd=function(t){this.eT.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.iT=new gT(e),this.highestTargetId=e),t.sequenceNumber>this.sT&&(this.sT=t.sequenceNumber)},kS.prototype.Wh=function(t,e){return this.Cd(e),this.targetCount+=1,G_.resolve()},kS.prototype.Nh=function(t,e){return this.Cd(e),G_.resolve()},kS.prototype.Nd=function(t,e){return this.eT.delete(e.target),this.nT.Ni(e.targetId),--this.targetCount,G_.resolve()},kS.prototype.xo=function(n,r,i){var o=this,s=0,a=[];return this.eT.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.eT.delete(t),a.push(o.Fd(n,e.targetId)),s++)}),G_.Ki(a).next(function(){return s})},kS.prototype.Ld=function(t){return G_.resolve(this.targetCount)},kS.prototype.qh=function(t,e){var n=this.eT.get(e)||null;return G_.resolve(n)},kS.prototype.un=function(t,e){return P_("Not yet implemented.")},kS.prototype.Dh=function(e,t,n){this.nT.Si(t,n);var r=this.persistence.Jo,i=[];return r&&t.forEach(function(t){i.push(r.vi(e,t))}),G_.Ki(i)},kS.prototype.Sh=function(e,t,n){this.nT.ki(t,n);var r=this.persistence.Jo,i=[];return r&&t.forEach(function(t){i.push(r.Di(e,t))}),G_.Ki(i)},kS.prototype.Fd=function(t,e){return this.nT.Ni(e),G_.resolve()},kS.prototype.Gh=function(t,e){var n=this.nT.$i(e);return G_.resolve(n)},kS.prototype.Mi=function(t,e){return G_.resolve(this.nT.Mi(e))},kS),vS=(AS.prototype.start=function(){return Promise.resolve()},AS.prototype.lc=function(){return this.hf=!1,Promise.resolve()},Object.defineProperty(AS.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),AS.prototype.Jh=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){return[2,[this.clientId]]})})},AS.prototype.gf=function(t){return t(!0)},AS.prototype.pf=function(){},AS.prototype.Zh=function(t){},AS.prototype.nh=function(){return this.ur},AS.prototype.Yo=function(t){var e=this.rT[t.s()];return e||(e=new aS(this.ur,this.Jo),this.rT[t.s()]=e),e},AS.prototype.eh=function(){return this.th},AS.prototype.Zo=function(){return this.hr},AS.prototype.runTransaction=function(t,e,n){var r=this;k_("MemoryPersistence","Starting transaction:",t);var i=new yS(this.Vf.next());return this.Jo.hT(),n(i).next(function(t){return r.Jo.aT(i).next(function(){return t})}).Wi().then(function(t){return i.or(),t})},AS.prototype.uT=function(e,n){return G_.Gi(Object.values(this.rT).map(function(t){return function(){return t.Mi(e,n)}}))},AS),yS=(fs(CS,pS=Y_),CS),gS=(NS._T=function(t){return new NS(t)},Object.defineProperty(NS.prototype,"lT",{get:function(){if(this.cT)return this.cT;throw P_("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),NS.prototype.Ho=function(t){this.Qf=t},NS.prototype.vi=function(t,e){return this.lT.delete(e),G_.resolve()},NS.prototype.Di=function(t,e){return this.lT.add(e),G_.resolve()},NS.prototype.bd=function(t,e){return this.lT.add(e),G_.resolve()},NS.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.eh();return r.Gh(t,e.targetId).next(function(t){t.forEach(function(t){return n.lT.add(t)})}).next(function(){return r.Nd(t,e)})},NS.prototype.hT=function(){this.cT=new Set},NS.prototype.aT=function(t){var n=this,r=this.persistence.Zo().Eh();return G_.forEach(this.lT,function(e){return n.dT(t,e).next(function(t){t||r.Zi(e)})}).next(function(){return n.cT=null,r.apply(t)})},NS.prototype.Fh=function(t,e){var n=this;return this.dT(t,e).next(function(t){t?n.lT.delete(e):n.lT.add(e)})},NS.prototype.oT=function(t){return 0},NS.prototype.dT=function(t,e){var n=this;return G_.Gi([function(){return n.persistence.eh().Mi(t,e)},function(){return n.persistence.uT(t,e)},function(){return G_.resolve(n.Qf.Mi(e))}])},NS),mS=(SS.prototype.initialize=function(e){return ds(this,void 0,void 0,function(){var n=this;return vs(this,function(t){switch(t.label){case 0:return this.X_=this.fT(e),this.persistence=this.TT(e),[4,this.persistence.start()];case 1:return t.sent(),this.mT=this.ET(e),this.Wu=this.wT(e),this.W_=this.IT(e),this.mc=this.RT(e),this.AT=this.PT(e),this.X_.$u=function(t){return n.mc.B_(t,1)},this.W_.mc=this.mc,this.X_.mc=this.mc,[4,this.X_.start()];case 2:return t.sent(),[4,this.W_.start()];case 3:return t.sent(),[4,this.Wu.start()];case 4:return t.sent(),[4,this.persistence.gf(function(e){return ds(n,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return[4,this.mc.Cc(e)];case 1:return t.sent(),this.mT&&(e&&!this.mT.ko?this.mT.start(this.Wu):e||this.mT.stop()),[2]}})})})];case 5:return t.sent(),[2]}})})},SS.prototype.PT=function(t){return new wT(this.mc)},SS.prototype.ET=function(t){return null},SS.prototype.wT=function(t){return new Iw(this.persistence,new TT,t.VT)},SS.prototype.TT=function(t){return new vS(t.clientId,gS._T)},SS.prototype.IT=function(t){var e=this;return new zE(this.Wu,t.bu,t.Nr,function(t){return e.mc.B_(t,0)},t.platform.gT())},SS.prototype.fT=function(t){return new yT},SS.prototype.RT=function(t){return new _T(this.Wu,this.W_,this.X_,t.VT,t.Z_)},SS.prototype.clearPersistence=function(t){throw new tg(Zy.FAILED_PRECONDITION,"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.")},SS),bS=(fs(IS,fS=mS),IS.prototype.ET=function(t){var e=this.persistence.Jo.bo;return new Ew(e,t.Nr)},IS.prototype.TT=function(t){var e=JI.qf(t.pT),n=t.platform.yT(t.pT.cn);return JI.mf({allowTabSynchronization:t.bT.synchronizeTabs,persistenceKey:e,clientId:t.clientId,platform:t.platform,$a:t.Nr,serializer:n,Ef:bw.Io(t.bT.cacheSizeBytes),rf:this.X_})},IS.prototype.fT=function(t){if(t.bT.synchronizeTabs){if(!vT.Uc(t.platform))throw new tg(Zy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=JI.qf(t.pT);return new vT(t.Nr,t.platform,e,t.clientId,t.VT)}return new yT},IS.prototype.clearPersistence=function(t){var e=JI.qf(t);return JI.clearPersistence(e)},IS),_S=(TS.prototype.start=function(e,n){var r=this;this.vT();var i=new lw,o=new lw,s=!1;return this.credentials.l(function(t){if(!s)return s=!0,k_("FirestoreClient","Initializing. user=",t.uid),r.ST(e,n,t,o).then(i.resolve,i.reject);r.Nr.qr(function(){return r.Dc(t)})}),this.Nr.qr(function(){return i.promise}),o.promise},TS.prototype.enableNetwork=function(){var t=this;return this.vT(),this.Nr.enqueue(function(){return t.mc.enableNetwork()})},TS.prototype.ST=function(s,a,u,c){return ds(this,void 0,void 0,function(){var e,n,r,i,o=this;return vs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,this.platform.DT(this.pT)];case 1:return e=t.sent(),n=this.platform.yT(this.pT.cn),r=new KE(this.Nr,e,this.credentials,n),[4,s.initialize({Nr:this.Nr,pT:this.pT,platform:this.platform,bu:r,clientId:this.clientId,VT:u,Z_:100,bT:a})];case 2:return t.sent(),this.persistence=s.persistence,this.X_=s.X_,this.Wu=s.Wu,this.W_=s.W_,this.mc=s.mc,this.mT=s.mT,this.CT=s.AT,this.persistence.pf(function(){return ds(o,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),c.resolve(),[3,4];case 3:if(i=t.sent(),c.reject(i),!this.kT(i))throw i;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),this.ST(new mS,{NT:!1},u,c))];case 4:return[2]}})})},TS.prototype.kT=function(t){return"FirebaseError"===t.name?t.code===Zy.FAILED_PRECONDITION||t.code===Zy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},TS.prototype.vT=function(){if(this.Nr.Hr)throw new tg(Zy.FAILED_PRECONDITION,"The client has already been terminated.")},TS.prototype.Dc=function(t){return this.Nr.no(),k_("FirestoreClient","Credential Changed. Current user: "+t.uid),this.mc.Dc(t)},TS.prototype.disableNetwork=function(){var t=this;return this.vT(),this.Nr.enqueue(function(){return t.mc.disableNetwork()})},TS.prototype.terminate=function(){var t=this;return this.Nr.to(function(){return ds(t,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.mT&&this.mT.stop(),[4,this.W_.lc()];case 1:return t.sent(),[4,this.X_.lc()];case 2:return t.sent(),[4,this.persistence.lc()];case 3:return t.sent(),this.credentials.T(),[2]}})})})},TS.prototype.waitForPendingWrites=function(){var t=this;this.vT();var e=new lw;return this.Nr.qr(function(){return t.mc.Pl(e)}),e.promise},TS.prototype.listen=function(t,e,n){var r=this;this.vT();var i=new ET(t,e,n);return this.Nr.qr(function(){return r.CT.listen(i)}),i},TS.prototype.fc=function(t){var e=this;this.FT||this.Nr.qr(function(){return e.CT.fc(t)})},TS.prototype.$T=function(t){var e=this;return this.vT(),this.Nr.enqueue(function(){return e.Wu.Bh(t)}).then(function(t){if(t instanceof Qm)return t;if(t instanceof Ym)return null;throw new tg(Zy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},TS.prototype.MT=function(i){var t=this;return this.vT(),this.Nr.enqueue(function(){return ds(t,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return[4,this.Wu.Kh(i,!0)];case 1:return e=t.sent(),n=new mT(i,e.zh),r=n.k_(e.documents),[2,n.nr(r,!1).snapshot]}})})})},TS.prototype.write=function(t){var e=this;this.vT();var n=new lw;return this.Nr.qr(function(){return e.mc.write(t,n)}),n.promise},TS.prototype.cn=function(){return this.pT.cn},TS.prototype.Ol=function(t){var e=this;this.vT(),this.Nr.qr(function(){return e.CT.Ol(t),Promise.resolve()})},TS.prototype.xl=function(t){this.FT||this.CT.xl(t)},Object.defineProperty(TS.prototype,"FT",{get:function(){return this.Nr.Hr},enumerable:!0,configurable:!0}),TS.prototype.transaction=function(t){var e=this;this.vT();var n=new lw;return this.Nr.qr(function(){return e.mc.runTransaction(e.Nr,t,n),Promise.resolve()}),n.promise},TS),wS=(ES.prototype.next=function(t){this.LT(this.observer.next,t)},ES.prototype.error=function(t){this.LT(this.observer.error,t)},ES.prototype.OT=function(){this.muted=!0},ES.prototype.LT=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},ES);function ES(t){this.observer=t,this.muted=!1}function TS(t,e,n,r){this.platform=t,this.pT=e,this.credentials=n,this.Nr=r,this.clientId=x_.mi()}function IS(){return null!==fS&&fS.apply(this,arguments)||this}function SS(){}function NS(t){this.persistence=t,this.Qf=null,this.cT=null}function CS(t){var e=this;return(e=pS.call(this)||this).Ch=t,e}function AS(t,e){var n=this;this.clientId=t,this.rT={},this.Vf=new $_(0),this.hf=!1,this.hf=!0,this.Jo=e(this),this.th=new dS(this),this.ur=new wI,this.hr=new uS(this.ur,function(t){return n.Jo.oT(t)})}function kS(t){this.persistence=t,this.eT=new q_(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=sg.MIN,this.highestTargetId=0,this.sT=0,this.nT=new K_,this.targetCount=0,this.iT=gT.p_()}function RS(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var OS,PS,DS=(rN.prototype.BT=function(t){switch(zg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return tm(t.integerValue||t.doubleValue);case 3:return this.UT(t.timestampValue);case 4:return this.qT(t);case 5:return t.stringValue;case 6:return new Xw(em(t.bytesValue));case 7:return this.QT(t.referenceValue);case 8:return new gE(t.geoPointValue.latitude,t.geoPointValue.longitude);case 9:return this.WT(t.arrayValue);case 10:return this.jT(t.mapValue);default:throw P_("Invalid value type: "+JSON.stringify(t))}},rN.prototype.jT=function(t){var n=this,r={};return Fg(t.fields||{},function(t,e){r[t]=n.BT(e)}),r},rN.prototype.WT=function(t){var e=this;return(t.values||[]).map(function(t){return e.BT(t)})},rN.prototype.qT=function(t){switch(this.xT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Kg(n)?t(n):n}(t);return null==e?null:this.BT(e);case"estimate":return this.UT(Hg(t));default:return null}},rN.prototype.UT=function(t){var e=Zg(t),n=new og(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},rN.prototype.QT=function(t){var e=yg.G(t);D_(T_(e),"ReferenceValue is not valid "+t);var n=new V_(e.get(1),e.get(3)),r=new Tg(e.M(5));return n.isEqual(this.firestore.KT)||R_("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.KT.projectId+"/"+this.firestore.KT.database+") instead."),new jS(r,this.firestore,this.converter)},rN),xS=bw.Po,LS=(nN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},nN),MS=(eN.prototype.settings=function(t){Rw("Firestore.settings",arguments,1),Dw("Firestore.settings","object",1,t);var e=new LS(t);if(this.JT&&!this.em.isEqual(e))throw new tg(Zy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.em=e).credentials&&(this.ZT=function(t){if(!t)return new eg;switch(t.type){case"gapi":var e=t.im;return D_(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new ig(e,t.V||"0");case"provider":return t.im;default:throw new tg(Zy.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},eN.prototype.enableNetwork=function(){return this.HT(),this.JT.enableNetwork()},eN.prototype.disableNetwork=function(){return this.HT(),this.JT.disableNetwork()},eN.prototype.enablePersistence=function(t){var e,n;if(this.JT)throw new tg(Zy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1;return t&&(void 0!==t.experimentalTabSynchronization&&R_("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n),this.rm(this.tm,{NT:!0,cacheSizeBytes:this.em.cacheSizeBytes,synchronizeTabs:r})},eN.prototype.clearPersistence=function(){return ds(this,void 0,void 0,function(){var r,e=this;return vs(this,function(t){if(void 0!==this.JT&&!this.JT.FT)throw new tg(Zy.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return r=new lw,[2,(this.zT.Jr(function(){return ds(e,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this.om(),[4,this.tm.clearPersistence(e)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return n=t.sent(),r.reject(n),[3,3];case 3:return[2]}})})}),r.promise)]})})},eN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(eN.prototype,"hm",{get:function(){return this.HT(),this.JT.FT},enumerable:!0,configurable:!0}),eN.prototype.waitForPendingWrites=function(){return this.HT(),this.JT.waitForPendingWrites()},eN.prototype.onSnapshotsInSync=function(t){if(this.HT(),RS(t))return this.am(t);Dw("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.am(e)},eN.prototype.am=function(t){var e=this,n=new wS({next:function(){t.next&&t.next()},error:function(t){throw P_("Uncaught Error in onSnapshotsInSync")}});return this.JT.Ol(n),function(){n.OT(),e.JT.xl(n)}},eN.prototype.HT=function(){return this.JT||this.rm(new mS,{NT:!1}),this.JT},eN.prototype.om=function(){return new j_(this.KT,this.XT,this.em.host,this.em.ssl,this.em.forceLongPolling)},eN.prototype.rm=function(t,e){var n=this.om();return this.JT=new _S(I_.Lt(),n,this.ZT,this.zT),this.JT.start(t,e)},eN.prototype.nm=function(r){var t=new w_(r,{dn:I_.Lt().dn});return new RE(t,function(t){if(t instanceof jS){var e=r,n=t.firestore.KT;if(!n.isEqual(e))throw new tg(Zy.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new kE(r,t.um)}return t})},eN.YT=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new tg(Zy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new tg(Zy.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new V_(n)},Object.defineProperty(eN.prototype,"app",{get:function(){if(!this.GT)throw new tg(Zy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.GT},enumerable:!0,configurable:!0}),eN.prototype.collection=function(t){return Rw("Firestore.collection",arguments,1),Dw("Firestore.collection","non-empty string",1,t),this.HT(),new HS(yg.G(t),this)},eN.prototype.doc=function(t){return Rw("Firestore.doc",arguments,1),Dw("Firestore.doc","non-empty string",1,t),this.HT(),jS.cm(yg.G(t),this)},eN.prototype.collectionGroup=function(t){if(Rw("Firestore.collectionGroup",arguments,1),Dw("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new tg(Zy.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.HT(),new WS(new $m(yg.H,t),this)},eN.prototype.runTransaction=function(e){var n=this;return Rw("Firestore.runTransaction",arguments,1),Dw("Firestore.runTransaction","function",1,e),this.HT().transaction(function(t){return e(new FS(n,t))})},eN.prototype.batch=function(){return this.HT(),new US(this)},Object.defineProperty(eN,"logLevel",{get:function(){switch(C_()){case pa.DEBUG:return"debug";case pa.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),eN.setLogLevel=function(t){switch(Rw("Firestore.setLogLevel",arguments,1),Dw("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":A_(pa.DEBUG);break;case"error":A_(pa.ERROR);break;case"silent":A_(pa.SILENT);break;default:throw new tg(Zy.INVALID_ARGUMENT,"Invalid log level: "+t)}},eN.prototype._m=function(){return this.em.timestampsInSnapshots},eN),FS=(tN.prototype.get=function(t){var n=this;Rw("Transaction.get",arguments,1);var r=aN("Transaction.get",t,this.lm);return this.dm.pu([r.um]).then(function(t){if(!t||1!==t.length)return P_("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof Ym)return new qS(n.lm,r.um,null,!1,!1,r.fm);if(e instanceof Qm)return new qS(n.lm,r.um,e,!1,!1,r.fm);throw P_("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},tN.prototype.set=function(t,e,n){Pw("Transaction.set",arguments,2,3);var r=aN("Transaction.set",t,this.lm);n=iN("Transaction.set",n);var i=uN(r.fm,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.lm.sm.pa(s,o,n.mergeFields):this.lm.sm.Va(s,o);return this.dm.set(r.um,a),this},tN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof $w?(Ow("Transaction.update",arguments,3),r=aN("Transaction.update",t,this.lm),this.lm.sm.Sa("Transaction.update",e,n,o)):(Rw("Transaction.update",arguments,2),r=aN("Transaction.update",t,this.lm),this.lm.sm.ya("Transaction.update",e)),this.dm.update(r.um,i),this},tN.prototype.delete=function(t){Rw("Transaction.delete",arguments,1);var e=aN("Transaction.delete",t,this.lm);return this.dm.delete(e.um),this},tN),US=(ZS.prototype.set=function(t,e,n){Pw("WriteBatch.set",arguments,2,3),this.Em();var r=aN("WriteBatch.set",t,this.lm);n=iN("WriteBatch.set",n);var i=uN(r.fm,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.lm.sm.pa(s,o,n.mergeFields):this.lm.sm.Va(s,o);return this.Tm=this.Tm.concat(a.da(r.um,_m.NONE)),this},ZS.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Em(),i="string"==typeof e||e instanceof $w?(Ow("WriteBatch.update",arguments,3),r=aN("WriteBatch.update",t,this.lm),this.lm.sm.Sa("WriteBatch.update",e,n,o)):(Rw("WriteBatch.update",arguments,2),r=aN("WriteBatch.update",t,this.lm),this.lm.sm.ya("WriteBatch.update",e)),this.Tm=this.Tm.concat(i.da(r.um,_m.exists(!0))),this},ZS.prototype.delete=function(t){Rw("WriteBatch.delete",arguments,1),this.Em();var e=aN("WriteBatch.delete",t,this.lm);return this.Tm=this.Tm.concat(new Dm(e.um,_m.NONE)),this},ZS.prototype.commit=function(){return this.Em(),this.mm=!0,0<this.Tm.length?this.lm.HT().write(this.Tm):Promise.resolve()},ZS.prototype.Em=function(){if(this.mm)throw new tg(Zy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},ZS),jS=($S.cm=function(t,e,n){if(t.length%2!=0)throw new tg(Zy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.K()+" has "+t.length);return new $S(new Tg(t),e,n)},Object.defineProperty($S.prototype,"id",{get:function(){return this.um.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty($S.prototype,"parent",{get:function(){return new HS(this.um.path.L(),this.firestore,this.fm)},enumerable:!0,configurable:!0}),Object.defineProperty($S.prototype,"path",{get:function(){return this.um.path.K()},enumerable:!0,configurable:!0}),$S.prototype.collection=function(t){if(Rw("DocumentReference.collection",arguments,1),Dw("DocumentReference.collection","non-empty string",1,t),!t)throw new tg(Zy.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=yg.G(t);return new HS(this.um.path.child(e),this.firestore)},$S.prototype.isEqual=function(t){if(!(t instanceof $S))throw Ww("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.um.isEqual(t.um)&&this.fm===t.fm},$S.prototype.set=function(t,e){Pw("DocumentReference.set",arguments,1,2),e=iN("DocumentReference.set",e);var n=uN(this.fm,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.sm.pa(i,r,e.mergeFields):this.firestore.sm.Va(i,r);return this.JT.write(o.da(this.um,_m.NONE))},$S.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof $w?(Ow("DocumentReference.update",arguments,2),this.firestore.sm.Sa("DocumentReference.update",t,e,r)):(Rw("DocumentReference.update",arguments,1),this.firestore.sm.ya("DocumentReference.update",t)),this.JT.write(n.da(this.um,_m.exists(!0)))},$S.prototype.delete=function(){return Rw("DocumentReference.delete",arguments,0),this.JT.write([new Dm(this.um,_m.NONE)])},$S.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Pw("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||RS(t[i])||(Bw("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Mw("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=RS(t[i])?t[i]:(Dw("DocumentReference.onSnapshot","function",i,t[i]),xw("DocumentReference.onSnapshot","function",i+1,t[i+1]),xw("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.wm(o,n)},$S.prototype.wm=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new wS({next:function(t){if(n.next){var e=t.docs.get(r.um);n.next(new qS(r.firestore,r.um,e,t.fromCache,t.hasPendingWrites,r.fm))}},error:e}),o=this.JT.listen($m.ve(this.um.path),i,t);return function(){i.OT(),r.JT.fc(o)}},$S.prototype.get=function(n){var r=this;return Pw("DocumentReference.get",arguments,0,1),sN("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.HT().$T(r.um).then(function(t){e(new qS(r.firestore,r.um,t,!0,t instanceof Qm&&t.te,r.fm))},t):r.Im(e,t,n)})},$S.prototype.Im=function(e,n,r){var i=this.wm({includeMetadataChanges:!0,Kl:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new tg(Zy.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new tg(Zy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},$S.prototype.withConverter=function(t){return new $S(this.um,this.firestore,t)},$S),VS=(JS.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},JS),qS=(XS.prototype.data=function(t){if(Pw("DocumentSnapshot.data",arguments,0,1),t=oN("DocumentSnapshot.data",t),this.Rm){if(this.fm){var e=new BS(this.lm,this.um,this.Rm,this.Am,this.Pm);return this.fm.fromFirestore(e,t)}return new DS(this.lm,this.lm._m(),t.serverTimestamps,void 0).BT(this.Rm.Ie())}},XS.prototype.get=function(t,e){if(Pw("DocumentSnapshot.get",arguments,1,2),e=oN("DocumentSnapshot.get",e),this.Rm){var n=this.Rm.data().field(LE("DocumentSnapshot.get",t));if(null!==n)return new DS(this.lm,this.lm._m(),e.serverTimestamps,this.fm).BT(n)}},Object.defineProperty(XS.prototype,"id",{get:function(){return this.um.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(XS.prototype,"ref",{get:function(){return new jS(this.um,this.lm,this.fm)},enumerable:!0,configurable:!0}),Object.defineProperty(XS.prototype,"exists",{get:function(){return null!==this.Rm},enumerable:!0,configurable:!0}),Object.defineProperty(XS.prototype,"metadata",{get:function(){return new VS(this.Pm,this.Am)},enumerable:!0,configurable:!0}),XS.prototype.isEqual=function(t){if(!(t instanceof XS))throw Ww("isEqual","DocumentSnapshot",1,t);return this.lm===t.lm&&this.Am===t.Am&&this.um.isEqual(t.um)&&(null===this.Rm?null===t.Rm:this.Rm.isEqual(t.Rm))&&this.fm===t.fm},XS),BS=(fs(YS,PS=qS),YS.prototype.data=function(t){return PS.prototype.data.call(this,t)},YS),WS=(QS.prototype.where=function(t,e,n){var r;Rw("Query.where",arguments,3),qw("Query.where",3,n),function(t,e){if(!t.some(function(t){return t===e}))throw new tg(Zy.INVALID_ARGUMENT,"Invalid value "+Vw(e)+" provided to function Query.where() for its "+Hw(2)+" argument. Acceptable values: "+t.join(", "))}(["<","<=","==",">=",">","array-contains","in","array-contains-any"],e);var i=LE("Query.where",t),o=Zm.G(e);if(i.Y()){if(o===Zm.ARRAY_CONTAINS||o===Zm.ARRAY_CONTAINS_ANY)throw new tg(Zy.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Zm.IN){this.gm(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this.pm(c))}r={arrayValue:{values:s}}}else r=this.pm(n)}else o!==Zm.IN&&o!==Zm.ARRAY_CONTAINS_ANY||this.gm(n,o),r=this.firestore.sm.Da("Query.where",n,o===Zm.IN);var h=db.create(i,o,r);return this.ym(h),new QS(this.Vm.Ce(h),this.firestore,this.fm)},QS.prototype.orderBy=function(t,e){var n;if(Pw("Query.orderBy",arguments,1,2),xw("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=_b.ASCENDING;else{if("desc"!==e)throw new tg(Zy.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=_b.DESCENDING}if(null!==this.Vm.startAt)throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.Vm.endAt)throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=LE("Query.orderBy",t),i=new Pb(r,n);return this.bm(i),new QS(this.Vm.ke(i),this.firestore,this.fm)},QS.prototype.limit=function(t){return Rw("Query.limit",arguments,1),Dw("Query.limit","number",1,t),Kw("Query.limit",1,t),new QS(this.Vm.Ne(t),this.firestore,this.fm)},QS.prototype.limitToLast=function(t){return Rw("Query.limitToLast",arguments,1),Dw("Query.limitToLast","number",1,t),Kw("Query.limitToLast",1,t),new QS(this.Vm.Fe(t),this.firestore,this.fm)},QS.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ow("Query.startAt",arguments,1);var r=this.vm("Query.startAt",t,e,!0);return new QS(this.Vm.$e(r),this.firestore,this.fm)},QS.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ow("Query.startAfter",arguments,1);var r=this.vm("Query.startAfter",t,e,!1);return new QS(this.Vm.$e(r),this.firestore,this.fm)},QS.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ow("Query.endBefore",arguments,1);var r=this.vm("Query.endBefore",t,e,!0);return new QS(this.Vm.Me(r),this.firestore,this.fm)},QS.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ow("Query.endAt",arguments,1);var r=this.vm("Query.endAt",t,e,!1);return new QS(this.Vm.Me(r),this.firestore,this.fm)},QS.prototype.isEqual=function(t){if(!(t instanceof QS))throw Ww("isEqual","Query",1,t);return this.firestore===t.firestore&&this.Vm.isEqual(t.Vm)},QS.prototype.withConverter=function(t){return new QS(this.Vm,this.firestore,t)},QS.prototype.vm=function(t,e,n,r){if(qw(t,1,e),e instanceof qS){if(0<n.length)throw new tg(Zy.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new tg(Zy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Sm(i.Rm,r)}var o=[e].concat(n);return this.Dm(t,o,r)},QS.prototype.Sm=function(t,e){for(var n=[],r=0,i=this.Vm.orderBy;r<i.length;r++){var o=i[r];if(o.field.Y())n.push(nm(this.firestore.KT,t.key));else{var s=t.field(o.field);if(Kg(s))throw new tg(Zy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var a=o.field.K();throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}n.push(s)}}return new Ob(n,e)},QS.prototype.Dm=function(t,e,n){var r=this.Vm.Ve;if(e.length>r.length)throw new tg(Zy.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.Vm.He()&&-1!==s.indexOf("/"))throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.Vm.path.child(yg.G(s));if(!Tg.st(a))throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Tg(a);i.push(nm(this.firestore.KT,u))}else{var c=this.firestore.sm.Da(t,s);i.push(c)}}return new Ob(i,n)},QS.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Pw("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||RS(t[i])||(Bw("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Mw("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=RS(t[i])?t[i]:(Dw("Query.onSnapshot","function",i,t[i]),xw("Query.onSnapshot","function",i+1,t[i+1]),xw("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Cm(this.Vm),this.wm(r,n)},QS.prototype.wm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new wS({next:function(t){e.next&&e.next(new KS(n.firestore,n.Vm,t,n.fm))},error:r}),o=this.firestore.HT(),s=o.listen(this.Vm,i,t);return function(){i.OT(),o.fc(s)}},QS.prototype.Cm=function(t){if(t.Ke()&&0===t.Ve.length)throw new tg(Zy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},QS.prototype.get=function(n){var r=this;return Pw("Query.get",arguments,0,1),sN("Query.get",n),this.Cm(this.Vm),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.HT().MT(r.Vm).then(function(t){e(new KS(r.firestore,r.Vm,t,r.fm))},t):r.Im(e,t,n)})},QS.prototype.Im=function(e,n,r){var i=this.wm({includeMetadataChanges:!0,Kl:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new tg(Zy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},QS.prototype.pm=function(t){if("string"==typeof t){if(""===t)throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Vm.He()&&-1!==t.indexOf("/"))throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.Vm.path.child(yg.G(t));if(!Tg.st(e))throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return nm(this.firestore.KT,new Tg(e))}if(t instanceof jS){var n=t;return nm(this.firestore.KT,n.um)}throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Vw(t)+".")},QS.prototype.gm=function(t,e){if(!Array.isArray(t)||0===t.length)throw new tg(Zy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new tg(Zy.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new tg(Zy.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new tg(Zy.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},QS.prototype.ym=function(t){if(t instanceof db){var e=[Zm.ARRAY_CONTAINS,Zm.ARRAY_CONTAINS_ANY],n=[Zm.IN,Zm.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Ge()){var o=this.Vm.Se();if(null!==o&&!o.isEqual(t.field))throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.Vm.De();null!==s&&this.km(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.Vm.ze(n)),null===a&&r&&(a=this.Vm.ze(e)),null!=a)throw a===t.op?new tg(Zy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new tg(Zy.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},QS.prototype.bm=function(t){if(null===this.Vm.De()){var e=this.Vm.Se();null!==e&&this.km(e,t.field)}},QS.prototype.km=function(t,e){if(!e.isEqual(t))throw new tg(Zy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},QS),KS=(Object.defineProperty(zS.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(zS.prototype,"empty",{get:function(){return this.Fm.docs.U()},enumerable:!0,configurable:!0}),Object.defineProperty(zS.prototype,"size",{get:function(){return this.Fm.docs.size},enumerable:!0,configurable:!0}),zS.prototype.forEach=function(e,n){var r=this;Pw("QuerySnapshot.forEach",arguments,1,2),Dw("QuerySnapshot.forEach","function",1,e),this.Fm.docs.forEach(function(t){e.call(n,r.Lm(t))})},Object.defineProperty(zS.prototype,"query",{get:function(){return new WS(this.Nm,this.lm,this.fm)},enumerable:!0,configurable:!0}),zS.prototype.docChanges=function(t){t&&(Bw("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Mw("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Fm.ds)throw new tg(Zy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.$m&&this.Mm===e||(this.$m=function(i,e,o,s){if(o.cs.U()){var n=0;return o.docChanges.map(function(t){var e=new BS(i,t.doc.key,t.doc,o.fromCache,o._s.has(t.doc.key),s);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var a=o.cs;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new BS(i,t.doc.key,t.doc,o.fromCache,o._s.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(n=a.indexOf(t.doc.key),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P_("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.lm,e,this.Fm,this.fm),this.Mm=e),this.$m},zS.prototype.isEqual=function(t){if(!(t instanceof zS))throw Ww("isEqual","QuerySnapshot",1,t);return this.lm===t.lm&&this.Nm.isEqual(t.Nm)&&this.Fm.isEqual(t.Fm)&&this.fm===t.fm},zS.prototype.Lm=function(t){return new BS(this.lm,t.key,t,this.metadata.fromCache,this.Fm._s.has(t.key),this.fm)},zS),HS=(fs(GS,OS=WS),Object.defineProperty(GS.prototype,"id",{get:function(){return this.Vm.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(GS.prototype,"parent",{get:function(){var t=this.Vm.path.L();return t.U()?null:new jS(new Tg(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(GS.prototype,"path",{get:function(){return this.Vm.path.K()},enumerable:!0,configurable:!0}),GS.prototype.doc=function(t){if(Pw("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=x_.mi()),Dw("CollectionReference.doc","non-empty string",1,t),""===t)throw new tg(Zy.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=yg.G(t);return jS.cm(this.Vm.path.child(e),this.firestore,this.fm)},GS.prototype.add=function(t){Rw("CollectionReference.add",arguments,1),Dw("CollectionReference.add","object",1,this.fm?this.fm.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},GS.prototype.withConverter=function(t){return new GS(this.Om,this.firestore,t)},GS);function GS(t,e,n){var r=this;if(((r=OS.call(this,$m.ve(t),e,n)||this).Om=t).length%2!=1)throw new tg(Zy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.K()+" has "+t.length);return r}function zS(t,e,n,r){this.lm=t,this.Nm=e,this.Fm=n,this.fm=r,this.$m=null,this.Mm=null,this.metadata=new VS(n.hasPendingWrites,n.fromCache)}function QS(t,e,n){this.Vm=t,this.firestore=e,this.fm=n}function YS(){return null!==PS&&PS.apply(this,arguments)||this}function XS(t,e,n,r,i,o){this.lm=t,this.um=e,this.Rm=n,this.Am=r,this.Pm=i,this.fm=o}function JS(t,e){this.hasPendingWrites=t,this.fromCache=e}function $S(t,e,n){this.um=t,this.firestore=e,this.fm=n,this.JT=this.firestore.HT()}function ZS(t){this.lm=t,this.Tm=[],this.mm=!1}function tN(t,e){this.lm=t,this.dm=e}function eN(t,e,n){var r=this;if(void 0===n&&(n=new mS),this.GT=null,this.zT=new pw,this.INTERNAL={delete:function(){return ds(r,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return this.HT(),[4,this.JT.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.GT=i,this.KT=eN.YT(i),this.XT=i.name,this.ZT=new ng(e)}else{var o=t;if(!o.projectId)throw new tg(Zy.INVALID_ARGUMENT,"Must provide projectId");this.KT=new V_(o.projectId,o.database),this.XT="[DEFAULT]",this.ZT=new eg}this.tm=n,this.em=new LS({}),this.sm=this.nm(this.KT)}function nN(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new tg(Zy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Lw("settings","non-empty string","host",t.host),this.host=t.host,Mw("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Bw("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Mw("settings","object","credentials",t.credentials),this.credentials=t.credentials,Mw("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?R_("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&R_("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,Mw("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=bw.po;else{if(t.cacheSizeBytes!==xS&&t.cacheSizeBytes<bw.Vo)throw new tg(Zy.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+bw.Vo);this.cacheSizeBytes=t.cacheSizeBytes}Mw("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}function rN(t,e,n,r){this.firestore=t,this.timestampsInSnapshots=e,this.xT=n,this.converter=r}function iN(t,e){if(void 0===e)return{merge:!1};if(Bw(t,e,["merge","mergeFields"]),Mw(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n){if(!(n instanceof Array))throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Vw(n));for(var r=0;r<n.length;++r)if(!("string"==typeof(i=n[r])||i instanceof $w))throw new tg(Zy.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+r+" was: "+Vw(n[r]));var i}(t,"mergeFields",n),void 0!==e.mergeFields&&void 0!==e.merge)throw new tg(Zy.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function oN(t,e){return void 0===e?{}:(Bw(t,e,["serverTimestamps"]),Fw(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function sN(t,e){xw(t,"object",1,e),e&&(Bw(t,e,["source"]),Fw(t,0,"source",e.source,["default","server","cache"]))}function aN(t,e,n){if(e instanceof jS){if(e.firestore!==n)throw new tg(Zy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Ww(t,"DocumentReference",1,e)}function uN(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var cN,hN=zw(MS,"Use firebase.firestore() instead."),lN=zw(FS,"Use firebase.firestore().runTransaction() instead."),fN=zw(US,"Use firebase.firestore().batch() instead."),pN=zw(jS,"Use firebase.firestore().doc() instead."),dN=zw(qS),vN=zw(BS),yN=zw(WS),gN=zw(KS),mN=zw(HS,"Use firebase.firestore().collection() instead."),bN={Firestore:hN,GeoPoint:gE,Timestamp:og,Blob:Jw,Transaction:lN,WriteBatch:fN,DocumentReference:pN,DocumentSnapshot:dN,Query:yN,QueryDocumentSnapshot:vN,QuerySnapshot:gN,CollectionReference:mN,FieldPath:$w,FieldValue:yE,setLogLevel:MS.setLogLevel,CACHE_SIZE_UNLIMITED:xS},_N=(kN.prototype.Hu=function(t){},kN.prototype.lc=function(){},kN),wN=(AN.prototype.Hu=function(t){this.Qm.push(t)},AN.prototype.lc=function(){window.removeEventListener("online",this.xm),window.removeEventListener("offline",this.Um)},AN.prototype.Wm=function(){window.addEventListener("online",this.xm),window.addEventListener("offline",this.Um)},AN.prototype.Bm=function(){k_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Qm;t<e.length;t++)(0,e[t])(0)},AN.prototype.qm=function(){k_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Qm;t<e.length;t++)(0,e[t])(1)},AN.Uc=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},AN),EN=(CN.prototype._u=function(t){this.Gm=t},CN.prototype.ou=function(t){this.zm=t},CN.prototype.onMessage=function(t){this.Hm=t},CN.prototype.close=function(){this.Km()},CN.prototype.send=function(t){this.jm(t)},CN.prototype.Jm=function(){this.Gm()},CN.prototype.Ym=function(t){this.zm(t)},CN.prototype.Xm=function(t){this.Hm(t)},CN),TN={BatchGetDocuments:"batchGet",Commit:"commit"},IN="gl-js/ fire/"+Qy,SN=(NN.prototype.tE=function(t,e){if(e)for(var n in e.h)e.h.hasOwnProperty(n)&&(t[n]=e.h[n]);t["X-Goog-Api-Client"]=IN},NN.prototype.gu=function(u,r,i){var c=this,h=this.eE(u);return new Promise(function(o,s){var a=new zy;a.listenOnce(Hy.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Ky.NO_ERROR:var t=a.getResponseJson();k_("Connection","XHR received:",JSON.stringify(t)),o(t);break;case Ky.TIMEOUT:k_("Connection",'RPC "'+u+'" timed out'),s(new tg(Zy.DEADLINE_EXCEEDED,"Request time out"));break;case Ky.HTTP_ERROR:var e=a.getStatus();if(k_("Connection",'RPC "'+u+'" failed with status:',e,"response text:",a.getResponseText()),0<e){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=(i=n.status.toLowerCase().replace("_","-"),0<=Object.values(Zy).indexOf(i)?i:Zy.UNKNOWN);s(new tg(r,n.message))}else s(new tg(Zy.UNKNOWN,"Server responded with status "+a.getStatus()))}else k_("Connection",'RPC "'+u+'" failed'),s(new tg(Zy.UNAVAILABLE,"Connection failed."));break;default:P_('RPC "'+u+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{k_("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);k_("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.tE(n,i),a.send(h,"POST",e,n,15)})},NN.prototype.yu=function(t,e,n){return this.gu(t,e,n)},NN.prototype.lu=function(t,e){var n,r,i=[this.Zm,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Wy(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.cn.projectId+"/databases/"+this.cn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.tE(s.initMessageHeaders,e),Os()||Ps()||0<=Rs().indexOf("Electron/")||0<=(r=Rs()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=Rs().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){c.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}k_("Connection","Creating WebChannel: "+a+" "+s);var c=o.createWebChannel(a,s),h=!1,l=!1,f=new EN({jm:function(t){l?k_("Connection","Not sending because WebChannel is closed:",t):(h||(k_("Connection","Opening WebChannel transport."),c.open(),h=!0),k_("Connection","WebChannel sending:",t),c.send(t))},Km:function(){return c.close()}});return u(Gy.EventType.OPEN,function(){l||k_("Connection","WebChannel transport opened.")}),u(Gy.EventType.CLOSE,function(){l||(l=!0,k_("Connection","WebChannel transport closed"),f.Ym())}),u(Gy.EventType.ERROR,function(t){l||(l=!0,k_("Connection","WebChannel transport errored:",t),f.Ym(new tg(Zy.UNAVAILABLE,"The operation could not be completed")))}),u(Gy.EventType.MESSAGE,function(t){var e;if(!l){var n=t.data[0];D_(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){k_("Connection","WebChannel received error:",r);var i=r.status,o=function(){var t=kb[i];if(void 0!==t)return Vb(t)}(),s=r.message;void 0===o&&(o=Zy.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.Ym(new tg(o,s)),c.close()}else k_("Connection","WebChannel received:",n),f.Xm(n)}}),setTimeout(function(){f.Jm()},0),f},NN.prototype.eE=function(t){var e=TN[t];return this.Zm+"/v1/projects/"+this.cn.projectId+"/databases/"+this.cn.database+"/documents:"+e},NN);function NN(t){this.cn=t.cn;var e=t.ssl?"https":"http";this.Zm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function CN(t){this.jm=t.jm,this.Km=t.Km}function AN(){var t=this;this.xm=function(){return t.Bm()},this.Um=function(){return t.qm()},this.Qm=[],this.Wm()}function kN(){}function RN(){this.dn=!0,this.ia="undefined"!=typeof atob}I_.fi((Object.defineProperty(RN.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(RN.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),RN.prototype.DT=function(t){return Promise.resolve(new SN(t))},RN.prototype.gT=function(){return new(wN.Uc()?wN:_N)},RN.prototype.yT=function(t){return new w_(t,{dn:!0})},RN.prototype.Ti=function(t){return JSON.stringify(t)},RN.prototype.atob=function(t){return atob(t)},RN.prototype.btoa=function(t){return btoa(t)},new RN)),(cN=Fl).INTERNAL.registerComponent(new ia("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new MS(e,n,new bS);var e,n},"PUBLIC").setServiceProps(Object.assign({},bN))),cN.registerVersion("@firebase/firestore","1.14.1-0");var ON,PN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},DN=(fs(xN,ON=Error),xN);function xN(t,e,n){var r=ON.call(this,e)||this;return Object.setPrototypeOf(r,xN.prototype),r.code=t,r.details=n,r}var LN=(MN.prototype.getAuthToken=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},MN.prototype.getInstanceIdToken=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},MN.prototype.getContext=function(){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},MN);function MN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function FN(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var UN=(jN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return FN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},jN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?FN(t,function(t){return e.decode(t)}):t},jN);function jN(){}var VN,qN=(Object.defineProperty(BN.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),BN.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},BN.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},BN.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},BN.prototype.postJSON=function(r,i,o){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},BN.prototype.call=function(h,l,f){return ds(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return vs(this,function(t){switch(t.label){case 0:return e=this._url(h),l=this.serializer.encode(l),r={data:l},i=new Headers,[4,this.contextProvider.getContext()];case 1:return(o=t.sent()).authToken&&i.append("Authorization","Bearer "+o.authToken),o.instanceIdToken&&i.append("Firebase-Instance-ID-Token",o.instanceIdToken),s=f.timeout||7e4,[4,Promise.race([this.postJSON(e,r,i),(n=s,new Promise(function(t,e){setTimeout(function(){e(new DN("deadline-exceeded","deadline-exceeded"))},n)})),this.cancelAllRequests])];case 2:if(!(a=t.sent()))throw new DN("cancelled","Firebase Functions instance was deleted.");if(u=function(t,e,n){var r=function(){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!PN[a])return new DN("internal","internal");r=PN[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new DN(r,i,o)}(a.status,a.json,this.serializer))throw u;if(!a.json)throw new DN("internal","Response is not valid JSON object.");if(void 0===(c=a.json.data)&&(c=a.json.result),void 0===c)throw new DN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},BN);function BN(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new UN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new LN(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function WN(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function KN(n,r,i){var o,t=new Promise(function(t,e){WN(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function HN(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function GN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return KN(this[n],t,arguments)})})}function zN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function QN(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=KN(t,n,arguments)).then(function(t){if(t)return new XN(t,e.request)});var t,e})})}function YN(t){this._index=t}function XN(t,e){this._cursor=t,this._request=e}function JN(t){this._store=t}function $N(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function ZN(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new $N(n)}function tC(t){this._db=t}function eC(t,e,n){var r=KN(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new ZN(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new tC(t)})}function nC(t){return KN(indexedDB,"deleteDatabase",[t])}VN={Functions:qN},Fl.INTERNAL.registerComponent(new ia("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new qN(n,r,i,e)},"PUBLIC").setServiceProps(VN).setMultipleInstances(!0)),Fl.registerVersion("@firebase/functions","0.4.41-0"),HN(YN,"_index",["name","keyPath","multiEntry","unique"]),GN(YN,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),QN(YN,"_index",IDBIndex,["openCursor","openKeyCursor"]),HN(XN,"_cursor",["direction","key","primaryKey","value"]),GN(XN,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(XN.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),WN(e._request).then(function(t){if(t)return new XN(t,e._request)})})})}),JN.prototype.createIndex=function(){return new YN(this._store.createIndex.apply(this._store,arguments))},JN.prototype.index=function(){return new YN(this._store.index.apply(this._store,arguments))},HN(JN,"_store",["name","keyPath","indexNames","autoIncrement"]),GN(JN,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),QN(JN,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),zN(JN,"_store",IDBObjectStore,["deleteIndex"]),$N.prototype.objectStore=function(){return new JN(this._tx.objectStore.apply(this._tx,arguments))},HN($N,"_tx",["objectStoreNames","mode"]),zN($N,"_tx",IDBTransaction,["abort"]),ZN.prototype.createObjectStore=function(){return new JN(this._db.createObjectStore.apply(this._db,arguments))},HN(ZN,"_db",["name","version","objectStoreNames"]),zN(ZN,"_db",IDBDatabase,["deleteObjectStore","close"]),tC.prototype.transaction=function(){return new $N(this._db.transaction.apply(this._db,arguments))},HN(tC,"_db",["name","version","objectStoreNames"]),zN(tC,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[JN,YN].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[YN,JN].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var rC,iC="0.4.8-0",oC=1e4,sC="w:"+iC,aC="FIS_v2",uC="https://firebaseinstallations.googleapis.com/v1",cC=36e5,hC=((rC={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',rC["not-registered"]="Firebase Installation is not registered.",rC["installation-not-found"]="Firebase Installation not found.",rC["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',rC["app-offline"]="Could not process request. Application offline.",rC["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",rC),lC=new Fs("installations","Installations",hC);function fC(t){return t instanceof Ls&&t.code.includes("request-failed")}function pC(t){var e=t.projectId;return uC+"/projects/"+e+"/installations"}function dC(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function vC(r,i){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,lC.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function yC(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function gC(t,e){var n=e.refreshToken,r=yC(t);return r.append("Authorization",aC+" "+n),r}function mC(n){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function bC(e){return new Promise(function(t){setTimeout(t,e)})}var _C=/^[cdef][\w-]{21}$/,wC="";function EC(t){return t.appName+"!"+t.appId}var TC=new Map;function IC(t,e){var n,r,i,o=EC(t);SC(o,e),n=o,r=e,(i=CC())&&i.postMessage({key:n,fid:r}),AC()}function SC(t,e){var n,r,i=TC.get(t);if(i)try{for(var o=ys(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var NC=null;function CC(){return!NC&&"BroadcastChannel"in self&&((NC=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){SC(t.data.key,t.data.fid)}),NC}function AC(){0===TC.size&&NC&&(NC.close(),NC=null)}var kC,RC,OC="firebase-installations-database",PC=1,DC="firebase-installations-store",xC=null;function LC(){return xC=xC||eC(OC,PC,function(t){switch(t.oldVersion){case 0:t.createObjectStore(DC)}})}function MC(s,a){return ds(this,void 0,void 0,function(){var e,n,r,i,o;return vs(this,function(t){switch(t.label){case 0:return e=EC(s),[4,LC()];case 1:return n=t.sent(),r=n.transaction(DC,"readwrite"),[4,(i=r.objectStore(DC)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||IC(s,a.fid),[2,a]}})})}function FC(i){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return e=EC(i),[4,LC()];case 1:return n=t.sent(),[4,(r=n.transaction(DC,"readwrite")).objectStore(DC).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function UC(a,u){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){switch(t.label){case 0:return e=EC(a),[4,LC()];case 1:return n=t.sent(),r=n.transaction(DC,"readwrite"),[4,(i=r.objectStore(DC)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||IC(a,s.fid),[2,s]}})})}function jC(i){return ds(this,void 0,void 0,function(){var r,e,n;return vs(this,function(t){switch(t.label){case 0:return[4,UC(i,function(t){var e=qC(t||{fid:function(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=(n=t,btoa(String.fromCharCode.apply(String,ms(n))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return _C.test(e)?e:wC}catch(t){return wC}var n}(),registrationStatus:0}),n=function(t,e){if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return ds(this,void 0,void 0,function(){var e,n,r,i;return vs(this,function(t){switch(t.label){case 0:return[4,VC(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,bC(100)];case 3:return t.sent(),[4,VC(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,jC(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(lC.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(r,i){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a){var u=i.fid;return ds(this,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){switch(t.label){case 0:return e=pC(a),n=yC(a),r={fid:u,authVersion:aC,appId:a.appId,sdkVersion:sC},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,mC(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=t.sent()).fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:dC(s.authToken)}];case 3:return[4,vC("Create Installation",o)];case 4:throw t.sent()}})})}(r)];case 1:return e=t.sent(),[2,MC(r,e)];case 2:return fC(n=t.sent())&&409===n.serverCode?[4,FC(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,MC(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,n)}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==wC?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function VC(t){return UC(t,function(t){if(!t)throw lC.create("installation-not-found");return qC(t)})}function qC(t){return 1===t.registrationStatus&&t.registrationTime+oC<Date.now()?{fid:t.fid,registrationStatus:0}:t}function BC(u,c){return void 0===c&&(c=!1),ds(this,void 0,void 0,function(){var a,e,n;return vs(this,function(t){switch(t.label){case 0:return[4,UC(u.appConfig,function(t){if(!KC(t))throw lC.create("not-registered");var e,n,r,i,o=t.authToken;if(c||2!==o.requestStatus||(r=o,(i=Date.now())<r.creationTime||r.creationTime+r.expiresIn<i+cC)){if(1===o.requestStatus)return a=function(r,i){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,WC(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,bC(100)];case 3:return t.sent(),[4,WC(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,BC(r,i)]:[2,n]}})})}(u,c),t;if(!navigator.onLine)throw lC.create("app-offline");var s=(e=t,n={requestStatus:1,requestTime:Date.now()},ps(ps({},e),{authToken:n}));return a=function(i,o){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,function(t,u){var c=t.appConfig,h=t.platformLoggerProvider;return ds(this,void 0,void 0,function(){var n,r,i,o,s,a;return vs(this,function(t){switch(t.label){case 0:return e=u.fid,n=pC(c)+"/"+e+"/authTokens:generate",r=gC(c,u),(i=h.getImmediate({optional:!0}))&&r.append("x-firebase-client",i.getPlatformInfoString()),o={installation:{sdkVersion:sC}},s={method:"POST",headers:r,body:JSON.stringify(o)},[4,mC(function(){return fetch(n,s)})];case 1:return(a=t.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,dC(t.sent())];case 3:return[4,vC("Generate Auth Token",a)];case 4:throw t.sent()}var e})})}(i,o)];case 1:return e=t.sent(),r=ps(ps({},o),{authToken:e}),[4,MC(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!fC(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,FC(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=ps(ps({},o),{authToken:{requestStatus:0}}),[4,MC(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(u,s),s}return t})];case 1:return e=t.sent(),a?[4,a]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function WC(t){return UC(t,function(t){if(!KC(t))throw lC.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+oC<Date.now()?ps(ps({},t),{authToken:{requestStatus:0}}):t})}function KC(t){return void 0!==t&&2===t.registrationStatus}function HC(t){return lC.create("missing-app-config-values",{valueName:t})}(kC=Fl).INTERNAL.registerComponent(new ia("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw HC("App Configuration");if(!t.name)throw HC("App Name");try{for(var r=ys(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw HC(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return[4,jC(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):BC(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(e,n){return void 0===n&&(n=!1),ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return[4,function(n){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,jC(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,BC(e,n)];case 2:return[2,t.sent().token]}})})}(n,t)},delete:function(){return function(r){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,UC(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw lC.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw lC.create("app-offline");case 3:return[4,function(s,a){return ds(this,void 0,void 0,function(){var n,r,i,o;return vs(this,function(t){switch(t.label){case 0:return e=a.fid,n=pC(s)+"/"+e,r=gC(s,a),i={method:"DELETE",headers:r},[4,mC(function(){return fetch(n,i)})];case 1:return(o=t.sent()).ok?[3,3]:[4,vC("Delete Installation",o)];case 2:throw t.sent();case 3:return[2]}var e})})}(e,n)];case 4:return t.sent(),[4,FC(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){CC();var n=EC(t),r=TC.get(n);r||(r=new Set,TC.set(n,r)),r.add(e)}(i=n.appConfig,r=t),function(){var t,e,n;t=r,e=EC(i),(n=TC.get(e))&&(n.delete(t),0===n.size&&TC.delete(e),AC())};var r,i}}},"PUBLIC")),kC.registerVersion("@firebase/installations",iC);var GC=((RC={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',RC["only-available-in-window"]="This method is available in a Window context.",RC["only-available-in-sw"]="This method is available in a service worker context.",RC["permission-default"]="The notification permission was not granted and dismissed instead.",RC["permission-blocked"]="The notification permission was not granted and blocked instead.",RC["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",RC["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",RC["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",RC["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",RC["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",RC["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",RC["token-update-no-token"]="FCM returned no token when updating the user to push.",RC["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",RC["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",RC["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",RC["invalid-vapid-key"]="The public VAPID key must be a string.",RC["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",RC),zC=new Fs("messaging","Messaging",GC);function QC(t){return zC.create("missing-app-config-values",{valueName:t})}function YC(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,ms(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var XC="fcm_token_details_db",JC=5,$C="fcm_token_object_Store";var ZC="firebase-messaging-database",tA=1,eA="firebase-messaging-store",nA=null;function rA(){return nA=nA||eC(ZC,tA,function(t){switch(t.oldVersion){case 0:t.createObjectStore(eA)}})}function iA(i){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return e=sA(i),[4,rA()];case 1:return[4,t.sent().transaction(eA).objectStore(eA).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,function(a){return ds(this,void 0,void 0,function(){var s,e=this;return vs(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!t.sent().map(function(t){return t.name}).includes(XC))return[2,null];t.label=2;case 2:return s=null,[4,eC(XC,JC,function(o){return ds(e,void 0,void 0,function(){var e,n,r,i;return vs(this,function(t){switch(t.label){case 0:return!(o.oldVersion<2)&&o.objectStoreNames.contains($C)?[4,(e=o.transaction.objectStore($C)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:YC(r.vapidKey)}}}else 3!==o.oldVersion&&4!==o.oldVersion||(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:YC(r.auth),p256dh:YC(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:YC(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,nC(XC)];case 4:return t.sent(),[4,nC("fcm_vapid_details_db")];case 5:return t.sent(),[4,nC("undefined")];case 6:return t.sent(),[2,function(){if(s&&s.subscriptionOptions){var t=s.subscriptionOptions;return"number"==typeof s.createTime&&0<s.createTime&&"string"==typeof s.token&&0<s.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}}()?s:null]}})})}(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,oA(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function oA(i,o){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return e=sA(i),[4,rA()];case 1:return n=t.sent(),[4,(r=n.transaction(eA,"readwrite")).objectStore(eA).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function sA(t){return t.appConfig.appId}var aA,uA,cA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hA="https://fcmregistrations.googleapis.com/v1",lA="FCM_MSG",fA="google.c.a.c_id";function pA(s,a){return ds(this,void 0,void 0,function(){var e,n,r,i,o;return vs(this,function(t){switch(t.label){case 0:return[4,vA(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(dA(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,zC.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),zC.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function dA(t){var e=t.projectId;return hA+"/projects/"+e+"/registrations"}function vA(t){var n=t.appConfig,r=t.installations;return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function yA(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==cA&&(o.web.applicationPubKey=i),o}function gA(h,l,f){return ds(this,void 0,void 0,function(){var s,a,u,c;return vs(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw zC.create("permission-blocked");return[4,function(n,i){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(){for(var t=(i+"=".repeat((4-i.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}()})]}})})}(l,f)];case 1:return s=t.sent(),[4,iA(h)];case 2:return a=t.sent(),u={vapidKey:f,swScope:l.scope,endpoint:s.endpoint,auth:YC(s.getKey("auth")),p256dh:YC(s.getKey("p256dh"))},a?[3,3]:[2,bA(h,u)];case 3:if(e=a.subscriptionOptions,n=u.vapidKey===e.vapidKey,r=u.endpoint===e.endpoint,i=u.auth===e.auth,o=u.p256dh===e.p256dh,n&&r&&i&&o)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,pA(h,a.token)];case 5:return t.sent(),[3,7];case 6:return c=t.sent(),console.warn(c),[3,7];case 7:return[2,bA(h,u)];case 8:return Date.now()>=a.createTime+6048e5?[2,function(i,o,s){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){switch(t.label){case 0:return[4,vA(a)];case 1:e=t.sent(),n=yA(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(dA(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),zC.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,zC.create("token-update-failed",{errorInfo:s});if(!i.token)throw zC.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=ps({token:e,createTime:Date.now()},i),[4,oA(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,mA(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:a.token,createTime:Date.now(),subscriptionOptions:u},h,l)]:[2,a.token];case 9:return[2]}var e,n,r,i,o})})}function mA(r,i){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,iA(r)];case 1:return(e=t.sent())?[4,pA(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return e=sA(i),[4,rA()];case 1:return n=t.sent(),[4,(r=n.transaction(eA,"readwrite")).objectStore(eA).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function bA(r,i){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,function(a,u){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){switch(t.label){case 0:return[4,vA(a)];case 1:e=t.sent(),n=yA(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(dA(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),zC.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,zC.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw zC.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,oA(r,n)];case 2:return t.sent(),[2,n.token]}})})}function _A(t){return"object"==typeof t&&t&&fA in t}(uA=aA=aA||{}).PUSH_RECEIVED="push-received",uA.NOTIFICATION_CLICKED="notification-clicked";var wA=(Object.defineProperty(EA.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),EA.prototype.getToken=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=cA),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw zC.create("permission-blocked");return[2,gA(this.firebaseDependencies,e,this.vapidKey)]}})})},EA.prototype.deleteToken=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,mA(this.firebaseDependencies,e)]}})})},EA.prototype.requestPermission=function(){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?zC.create("permission-blocked"):zC.create("permission-default")}})})},EA.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zC.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zC.create("invalid-vapid-key");this.vapidKey=t},EA.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw zC.create("invalid-sw-registration");if(this.swRegistration)throw zC.create("use-sw-after-get-token");this.swRegistration=t},EA.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},EA.prototype.setBackgroundMessageHandler=function(){throw zC.create("only-available-in-sw")},EA.prototype.onTokenRefresh=function(){return function(){}},EA.prototype.getServiceWorkerRegistration=function(){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),zC.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},EA.prototype.messageEventListener=function(o){var s;return ds(this,void 0,void 0,function(){var e,n,r,i;return vs(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===aA.PUSH_RECEIVED&&this.onMessageCallback(r),_A(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},EA.prototype.logEvent=function(n,r){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return e=function(){switch(n){case aA.NOTIFICATION_CLICKED:return"notification_open";case aA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[fA],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},EA);function EA(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var TA=(Object.defineProperty(IA.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),IA.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw zC.create("invalid-bg-handler");this.bgMessageHandler=t},IA.prototype.getToken=function(){var n,r;return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,iA(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:cA,t.label=2;case 2:return[2,gA(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},IA.prototype.deleteToken=function(){return mA(this.firebaseDependencies,self.registration)},IA.prototype.requestPermission=function(){throw zC.create("only-available-in-window")},IA.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zC.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zC.create("invalid-vapid-key");this.vapidKey=t},IA.prototype.useServiceWorker=function(){throw zC.create("only-available-in-window")},IA.prototype.onMessage=function(){throw zC.create("only-available-in-window")},IA.prototype.onTokenRefresh=function(){throw zC.create("only-available-in-window")},IA.prototype.onPush=function(c){return ds(this,void 0,void 0,function(){var s,a,u;return vs(this,function(t){switch(t.label){case 0:return(s=function(){var t=c.data;if(!t)return null;try{return t.json()}catch(t){return null}}())?[4,SA()]:[2];case 1:return(a=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r,i=NA(aA.PUSH_RECEIVED,e);try{for(var o=ys(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(a,s)]:(u=function(t){var e;if(t&&"object"==typeof t.notification){var n=ps({},t.notification);return n.data=ps(ps({},t.notification.data),((e={})[lA]=t,e)),n}}(s))?[4,(r=null!==(n=(e=u).title)&&void 0!==n?n:"",i=e.actions,o=Notification.maxActions,i&&o&&i.length>o&&console.warn("This browser only supports "+o+" actions. The remaining actions will not be displayed."),self.registration.showNotification(r,e))]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(s)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}var e,n,r,i,o})})},IA.prototype.onSubChange=function(n){var r,i;return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,mA(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,iA(this.firebaseDependencies)];case 3:return e=t.sent(),[4,mA(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,gA(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:cA)];case 5:return t.sent(),[2]}})})},IA.prototype.onNotificationClick=function(u){var c,h;return ds(this,void 0,void 0,function(){var i,o,s,a;return vs(this,function(t){switch(t.label){case 0:return!(i=null===(h=null===(c=u.notification)||void 0===c?void 0:c.data)||void 0===h?void 0:h[lA])||u.action?[2]:(u.stopImmediatePropagation(),u.notification.close(),(o=(null!==(n=null===(e=i.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=i.notification)||void 0===r?void 0:r.click_action)||(_A(i.data)?self.location.origin:null))?[4,function(u){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return vs(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href).href,[4,SA()];case 1:n=t.sent();try{for(r=ys(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===e)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(o)]:[2]);case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return s=t.sent(),[4,new Promise(function(t){setTimeout(t,3e3)})];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(a=NA(aA.NOTIFICATION_CLICKED,i),[2,s.postMessage(a)]):[2]}var e,n,r})})},IA);function IA(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function SA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function NA(t,e){return{firebaseMessaging:{type:t,payload:e}}}var CA={isSupported:AA};function AA(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Fl.INTERNAL.registerComponent(new ia("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw QC("App Configuration Object");if(!t.name)throw QC("App Name");var r=t.options;try{for(var i=ys(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw QC(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!AA())throw zC.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?TA:wA)(n)},"PUBLIC").setServiceProps(CA));var kA="firebasestorage.googleapis.com",RA=(OA.prototype.codeProp=function(){return this.code},OA.prototype.codeEquals=function(t){return DA(t)===this.codeProp()},OA.prototype.serverResponseProp=function(){return this.serverResponse_},OA.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(OA.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(OA.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(OA.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(OA.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),OA);function OA(t,e){this.code_=DA(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var PA={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function DA(t){return"storage/"+t}function xA(){return new RA(PA.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function LA(){return new RA(PA.CANCELED,"User canceled the upload/download.")}function MA(){return new RA(PA.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FA(t,e,n){return new RA(PA.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function UA(){return new RA(PA.APP_DELETED,"The Firebase app was deleted.")}function jA(t,e){return new RA(PA.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function VA(t){throw new RA(PA.INTERNAL_ERROR,"Internal error: "+t)}var qA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function BA(t){switch(t){case qA.RAW:case qA.BASE64:case qA.BASE64URL:case qA.DATA_URL:return;default:throw"Expected one of the event types: ["+qA.RAW+", "+qA.BASE64+", "+qA.BASE64URL+", "+qA.DATA_URL+"]."}}function WA(t,e){this.data=t,this.contentType=e||null}function KA(t,e){switch(t){case qA.RAW:return new WA(HA(e));case qA.BASE64:case qA.BASE64URL:return new WA(GA(t,e));case qA.DATA_URL:return new WA((n=new zA(e)).base64?GA(qA.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw jA(qA.DATA_URL,"Malformed data URL.")}return HA(e)}(n.rest),new zA(e).contentType)}var n;throw xA()}function HA(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function GA(t,e){switch(t){case qA.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw jA(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qA.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw jA(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw jA(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}function zA(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw jA(qA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",r.length>=n.length&&r.substring(r.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}var QA,YA,XA={STATE_CHANGED:"state_changed"},JA="running",$A="pausing",ZA="paused",tk="success",ek="canceling",nk="canceled",rk="error",ik={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ok(t){switch(t){case JA:case $A:case ek:return ik.RUNNING;case ZA:return ik.PAUSED;case tk:return ik.SUCCESS;case nk:return ik.CANCELED;case rk:default:return ik.ERROR}}function sk(t){return null!=t}function ak(t){return void 0!==t}function uk(t){return"function"==typeof t}function ck(t){return"object"==typeof t}function hk(t){return"string"==typeof t||t instanceof String}function lk(t){return"number"==typeof t||t instanceof Number}function fk(t){return pk()&&t instanceof Blob}function pk(){return"undefined"!=typeof Blob}(YA=QA=QA||{})[YA.NO_ERROR=0]="NO_ERROR",YA[YA.NETWORK_ERROR=1]="NETWORK_ERROR",YA[YA.ABORT=2]="ABORT";var dk=(vk.prototype.send=function(t,e,n,r){if(this.sent_)throw VA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),sk(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return sk(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},vk.prototype.getErrorCode=function(){if(!this.sent_)throw VA("cannot .getErrorCode() before sending");return this.errorCode_},vk.prototype.getStatus=function(){if(!this.sent_)throw VA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},vk.prototype.getResponseText=function(){if(!this.sent_)throw VA("cannot .getResponseText() before sending");return this.xhr_.responseText},vk.prototype.abort=function(){this.xhr_.abort()},vk.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},vk.prototype.addUploadProgressListener=function(t){sk(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},vk.prototype.removeUploadProgressListener=function(t){sk(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},vk);function vk(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=QA.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=QA.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=QA.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var yk=(gk.prototype.createXhrIo=function(){return new dk},gk);function gk(){}var mk=(bk.prototype.size=function(){return this.size_},bk.prototype.type=function(){return this.type_},bk.prototype.slice=function(t,e){if(fk(this.data_)){var n=(i=t,o=e,(r=this.data_).webkitSlice?r.webkitSlice(i,o):r.mozSlice?r.mozSlice(i,o):r.slice?r.slice(i,o):null);return null===n?null:new bk(n)}var r,i,o;return new bk(new Uint8Array(this.data_.buffer,t,e-t),!0)},bk.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(pk()){var n=t.map(function(t){return t instanceof bk?t.data_:t});return new bk(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(pk())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,n))}var r=t.map(function(t){return hk(t)?KA(qA.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new bk(o,!0)},bk.prototype.uploadData=function(){return this.data_},bk);function bk(t,e){var n=0,r="";fk(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var _k=(Object.defineProperty(wk.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(wk.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),wk.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},wk.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},wk.makeFromBucketSpec=function(t){var e;try{e=wk.makeFromUrl(t)}catch(e){return new wk(t,"")}if(""===e.path)return e;throw new RA(PA.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},wk.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=kA.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){var h=c[u.indices.bucket],l=c[u.indices.path];e=new wk(h,l=l||""),u.postModify(e);break}}if(null==e)throw new RA(PA.INVALID_URL,"Invalid URL '"+t+"'.");return e},wk);function wk(t,e){this.bucket=t,this.path_=e}function Ek(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return ck(n=e)&&!Array.isArray(n)?e:null}function Tk(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Ik(t){return"https://"+kA+"/v0"+t}function Sk(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"="+e(t[r]))+"&");return n.slice(0,-1)}function Nk(t,e){return e}function Ck(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Nk}var Ak=null;function kk(t,e,n){var r=Ek(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return a=r,u=t,Object.defineProperty(a,"ref",{get:function(){var t=a.bucket,e=a.fullPath,n=new _k(t,e);return u.makeStorageReference(n)}}),r;var a,u}(t,r,n)}function Rk(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Ok(t){if(!ck(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!ck(n))throw"Expected object for 'customMetadata' mapping."}else if(ck(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var Pk="maxResults",Dk="pageToken",xk="prefixes",Lk="items";function Mk(t){if(!ck(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===Pk){if(!lk(n=t[Pk])||!Number.isInteger(n)||t[Pk]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[Pk])throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==Dk)throw"Unknown option: "+e;if(t[Dk]&&!hk(t[Dk]))throw"Expected pageToken to be string."}var n}function Fk(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}function Uk(t){if(!t)throw xA()}function jk(r,i){return function(t,e){var n=kk(r,e,i);return Uk(null!==n),n}}function Vk(s,a){return function(t,e){var n,r,i,o=(n=s,r=a,null===(i=Ek(e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[xk])for(var i=0,o=n[xk];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new _k(e,s));r.prefixes.push(a)}if(n[Lk])for(var u=0,c=n[Lk];u<c.length;u++){var h=c[u];a=t.makeStorageReference(new _k(e,h.name)),r.items.push(a)}return r}(n,r,i));return Uk(null!==o),o}}function qk(o){return function(t,e){var n,r,i;return(n=401===t.getStatus()?new RA(PA.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=o.bucket,new RA(PA.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=o.path,new RA(PA.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e).setServerResponseProp(e.serverResponseProp()),n}}function Bk(i){var o=qk(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new RA(PA.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function Wk(t,e,n){var r=Ik(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Fk(r,"GET",jk(t,n),i);return o.errorHandler=Bk(e),o}function Kk(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=null&&null.contentType||e&&e.type()||"application/octet-stream"),r}function Hk(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}function Gk(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Uk(!1)}return Uk(!!n&&-1!==(e||["active"]).indexOf(n)),n}function zk(t,e,n){if(uk(t)||sk(e)||sk(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}function Qk(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}function Yk(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var s,a,u;if(!(r<=n.length&&n.length<=i))throw s=n.length,u=r===i?1===(a=r)?"argument":"arguments":(a="between "+r+" and "+i,"arguments"),new RA(PA.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+a+" "+u+", received "+s+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?FA(o,t,e.message):FA(o,t,e)}}function Xk(e,t){var n=this;this.validator=function(t){n.optional&&!ak(t)||e(t)},this.optional=!!t}function Jk(t,e){function n(t){if(!hk(t))throw"Expected string."}var r,i,o;return r=t?(i=n,o=t,function(t){i(t),o(t)}):n,new Xk(r,e)}function $k(t){return new Xk(Ok,t)}function Zk(){return new Xk(function(t){if(!(lk(t)&&0<=t))throw"Expected a number 0 or greater."})}function tR(e,t){return new Xk(function(t){if(!(null===t||sk(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function eR(t){return new Xk(function(t){if(null!==t&&!uk(t))throw"Expected a Function."},t)}function nR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var rR=(iR.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},iR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},iR.prototype.start_=function(){this.state_===JA&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},iR.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case JA:e(t);break;case ek:n.transition_(nk);break;case $A:n.transition_(ZA)}})},iR.prototype.createResumable_=function(){var y=this;this.resolveToken_(function(t){var e,n,r,i,o,s,a,u,c,h,l,f,p,d=(e=y.authWrapper_,n=y.location_,r=y.mappings_,i=y.blob_,o=y.metadata_,s=n.bucketOnlyServerUrl(),a=Kk(n,i,o),u={name:a.fullPath},c=Ik(s),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Rk(a,r),f=e.maxUploadRetryTime(),(p=new Fk(c,"POST",function(t){var e;Gk(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Uk(!1)}return Uk(hk(e)),e},f)).urlParams=u,p.headers=h,p.body=l,p.errorHandler=qk(n),p),v=y.authWrapper_.makeRequest(d,t);(y.request_=v).getPromise().then(function(t){y.request_=null,y.uploadUrl_=t,y.needToFetchStatus_=!1,y.completeTransitions_()},y.errorHandler_)})},iR.prototype.fetchStatus_=function(){var c=this,h=this.uploadUrl_;this.resolveToken_(function(t){var e,n,r,i,o,s,a=(e=c.authWrapper_,n=c.location_,r=h,i=c.blob_,o=e.maxUploadRetryTime(),(s=new Fk(r,"POST",function(t){var e=Gk(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Uk(!1)}n||Uk(!1);var r=Number(n);return Uk(!isNaN(r)),new Hk(r,i.size(),"final"===e)},o)).headers={"X-Goog-Upload-Command":"query"},s.errorHandler=qk(n),s),u=c.authWrapper_.makeRequest(a,t);(c.request_=u).getPromise().then(function(t){t=t,c.request_=null,c.updateProgress_(t.current),c.needToFetchStatus_=!1,t.finalized&&(c.needToFetchMetadata_=!0),c.completeTransitions_()},c.errorHandler_)})},iR.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new Hk(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=function(t,s,e,a,n,u,r,i){var c=new Hk(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new RA(PA.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw MA();var v=s.maxUploadRetryTime(),y=new Fk(e,"POST",function(t,e){var n,r=Gk(t,["active","final"]),i=c.current+h,o=a.size();return n="final"===r?jk(s,u)(t,e):null,new Hk(i,o,"final"===r,n)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=qk(t),y}(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(rk)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(tk)):r.completeTransitions_()},r.errorHandler_)})},iR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},iR.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=Wk(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(tk)},r.metadataErrorHandler_)})},iR.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Kk(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Rk(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=mk.getBlob(c,r,h);if(null===l)throw MA();var f={name:u.fullPath},p=Ik(o),d=t.maxUploadRetryTime(),v=new Fk(p,"POST",jk(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=qk(e),v}(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(tk)},r.errorHandler_)})},iR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},iR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case ek:case $A:this.state_=t,null!==this.request_&&this.request_.cancel();break;case JA:var e=this.state_===ZA;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case ZA:this.state_=t,this.notifyObservers_();break;case nk:this.error_=LA(),this.state_=t,this.notifyObservers_();break;case rk:case tk:this.state_=t,this.notifyObservers_()}},iR.prototype.completeTransitions_=function(){switch(this.state_){case $A:this.transition_(ZA);break;case ek:this.transition_(nk);break;case JA:this.start_()}},Object.defineProperty(iR.prototype,"snapshot",{get:function(){var t=ok(this.state_);return new Qk(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),iR.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=eR(!0).validator,s=tR(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(ak(t.next)||ak(t.error)||ak(t.complete)))throw"";return}catch(t){throw r}}Yk("on",[Jk(function(){if(t!==XA.STATE_CHANGED)throw"Expected one of the event types: ["+XA.STATE_CHANGED+"]."}),tR(a,!0),eR(!0),eR(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&Yk("on",i,arguments);var r=new zk(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[tR(function(t){if(null===t)throw r;a(t)}),eR(!0),eR(!0)];return ak(e)||ak(n)||ak(o)?c(null)(e,n,o):c(h)},iR.prototype.then=function(t,e){return this.promise_.then(t,e)},iR.prototype.catch=function(t){return this.then(null,t)},iR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},iR.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},iR.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},iR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(ok(this.state_)){case ik.SUCCESS:nR(this.resolve_.bind(null,this.snapshot))();break;case ik.CANCELED:case ik.ERROR:nR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},iR.prototype.notifyObserver_=function(t){switch(ok(this.state_)){case ik.RUNNING:case ik.PAUSED:t.next&&nR(t.next.bind(t,this.snapshot))();break;case ik.SUCCESS:t.complete&&nR(t.complete.bind(t))();break;case ik.CANCELED:case ik.ERROR:t.error&&nR(t.error.bind(t,this.error_))();break;default:t.error&&nR(t.error.bind(t,this.error_))()}},iR.prototype.resume=function(){Yk("resume",[],arguments);var t=this.state_===ZA||this.state_===$A;return t&&this.transition_(JA),t},iR.prototype.pause=function(){Yk("pause",[],arguments);var t=this.state_===JA;return t&&this.transition_($A),t},iR.prototype.cancel=function(){Yk("cancel",[],arguments);var t=this.state_===JA||this.state_===$A;return t&&this.transition_(ek),t},iR);function iR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=JA,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(PA.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(rk))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(PA.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(rk))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var oR=(sR.prototype.toString=function(){return Yk("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},sR.prototype.newRef=function(t,e){return new sR(t,e)},sR.prototype.mappings=function(){return function(){if(Ak)return Ak;var t=[];t.push(new Ck("bucket")),t.push(new Ck("generation")),t.push(new Ck("metageneration")),t.push(new Ck("name","fullPath",!0));var e=new Ck("name");e.xform=function(t,e){return!hk(n=e)||n.length<2?n:Tk(n);var n},t.push(e);var n=new Ck("size");return n.xform=function(t,e){return sk(e)?Number(e):e},t.push(n),t.push(new Ck("timeCreated")),t.push(new Ck("updated")),t.push(new Ck("md5Hash",null,!0)),t.push(new Ck("cacheControl",null,!0)),t.push(new Ck("contentDisposition",null,!0)),t.push(new Ck("contentEncoding",null,!0)),t.push(new Ck("contentLanguage",null,!0)),t.push(new Ck("contentType",null,!0)),t.push(new Ck("metadata","customMetadata",!0)),Ak=t}()},sR.prototype.child=function(t){Yk("child",[Jk()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new _k(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(sR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new _k(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(sR.prototype,"root",{get:function(){var t=new _k(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(sR.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(sR.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(sR.prototype,"name",{get:function(){return Tk(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(sR.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),sR.prototype.put=function(t,e){return void 0===e&&(e=null),Yk("put",[new Xk(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||pk()&&t instanceof Blob))throw"Expected Blob or File."}),$k(!0)],arguments),this.throwIfRoot_("put"),new rR(this,this.authWrapper,this.location,this.mappings(),new mk(t),e)},sR.prototype.putString=function(t,e,n){void 0===e&&(e=qA.RAW),Yk("putString",[Jk(),Jk(BA,!0),$k(!0)],arguments),this.throwIfRoot_("putString");var r=KA(e,t),i=Object.assign({},n);return!sk(i.contentType)&&sk(r.contentType)&&(i.contentType=r.contentType),new rR(this,this.authWrapper,this.location,this.mappings(),new mk(r.data,!0),i)},sR.prototype.delete=function(){var a=this;return Yk("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.authWrapper,r=Ik((n=a.location).fullServerUrl()),i=e.maxOperationRetryTime(),(o=new Fk(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=Bk(n),o);return a.authWrapper.makeRequest(s,t).getPromise()})},sR.prototype.listAll=function(){Yk("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},sR.prototype.listAllHelper=function(o,s){return ds(this,void 0,void 0,function(){var e,n,r,i;return vs(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},sR.prototype.list=function(r){Yk("list",[new Xk(Mk,!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r){var i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",0<"/".length&&(i.delimiter="/"),n&&(i.pageToken=n),r&&(i.maxResults=r);var o=Ik(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime(),a=new Fk(o,"GET",Vk(t,e.bucket),s);return a.urlParams=i,a.errorHandler=qk(e),a}(i.authWrapper,i.location,e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},sR.prototype.getMetadata=function(){var n=this;return Yk("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=Wk(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},sR.prototype.updateMetadata=function(h){var l=this;return Yk("updateMetadata",[$k()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=Ik(n.fullServerUrl()),s=Rk(r,i),a=e.maxOperationRetryTime(),(u=new Fk(o,"PATCH",jk(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=Bk(n),u);return l.authWrapper.makeRequest(c,t).getPromise()})},sR.prototype.getDownloadURL=function(){var h=this;return Yk("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=h.authWrapper,n=h.location,r=h.mappings(),i=Ik(n.fullServerUrl()),o=e.maxOperationRetryTime(),(s=new Fk(i,"GET",(a=e,u=r,function(t,n){var e=kk(a,n,u);return Uk(null!==e),function(r){var t=Ek(n);if(null===t)return null;if(!hk(t.downloadTokens))return null;var e=t.downloadTokens;if(0===e.length)return null;var i=encodeURIComponent;return e.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return Ik("/b/"+i(e)+"/o/"+i(n))+Sk({alt:"media",token:t})})[0]}(e)}),o)).errorHandler=Bk(n),s);return h.authWrapper.makeRequest(c,t).getPromise().then(function(t){if(null===t)throw new RA(PA.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},sR.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw new RA(PA.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},sR);function sR(t,e){this.authWrapper=t,this.location=e instanceof _k?e:_k.makeFromUrl(e)}var aR=(uR.prototype.getPromise=function(){return this.promise_},uR.prototype.cancel=function(t){},uR);function uR(t){this.promise_=Promise.reject(t)}var cR=(hR.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},hR.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},hR);function hR(){this.map=new Map,this.id=-9007199254740991}var lR=(fR.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:_k.makeFromBucketSpec(e).bucket},fR.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},fR.prototype.bucket=function(){if(this.deleted_)throw UA();return this.bucket_},fR.prototype.service=function(){return this.service_},fR.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},fR.prototype.makeRequest=function(t,e){if(this.deleted_)return new aR(UA());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},fR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},fR.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},fR.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},fR.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},fR.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},fR);function fR(t,e,n,r,i,o){var s;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;sk(a)&&(this.bucket_=fR.extractBucket_(a),this.appId_=null!==(s=a.appId)&&void 0!==s?s:null)}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new cR}var pR=(dR.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());ak(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=xA()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?UA:LA)()):i(n=new RA(PA.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,bs([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new vR(!1,null,!0)):this.backoffId_=(e=function(o,t){if(t)o(!1,new vR(!1,null,!0));else{var e=c.pool_.createXhrIo();c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e=(t=t).getErrorCode()===QA.NO_ERROR,n=t.getStatus();if(e&&!c.isRetryStatusCode_(n)){var r=-1!==c.successCodes_.indexOf(n);o(!0,new vR(r,t))}else{var i=t.getErrorCode()===QA.ABORT;o(!1,new vR(!1,null,i))}})}function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},dR.prototype.getPromise=function(){return this.promise_},dR.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},dR.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},dR);function dR(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var vR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function yR(t,e,n,r){var i,o=Sk(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return e&&(a["X-Firebase-GMPID"]=e),null!==n&&0<n.length&&(a.Authorization="Firebase "+n),i=void 0!==Fl?Fl.SDK_VERSION:"AppManager",a["X-Firebase-Storage-Version"]="webjs/"+i,new pR(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var gR=(mR.prototype.ref=function(t){if(Yk("ref",[Jk(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new oR(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},mR.prototype.refFromURL=function(t){return Yk("refFromURL",[Jk(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{_k.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new oR(this.authWrapper_,t)},Object.defineProperty(mR.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),mR.prototype.setMaxUploadRetryTime=function(t){Yk("setMaxUploadRetryTime",[Zk()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},mR.prototype.setMaxOperationRetryTime=function(t){Yk("setMaxOperationRetryTime",[Zk()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(mR.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(mR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),mR);function mR(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new lR(t,e,function(t,e){return new oR(t,e)},yR,this,n),this.app_=t,null!=r)this.bucket_=_k.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new _k(i,""))}this.internals_=new wR(this)}var bR,_R,wR=(ER.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},ER);function ER(t){this.service_=t}_R={TaskState:ik,TaskEvent:XA,StringFormat:qA,Storage:gR,Reference:oR},(bR=Fl).INTERNAL.registerComponent(new ia("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new gR(n,r,new yk,e)},"PUBLIC").setServiceProps(_R).setMultipleInstances(!0)),bR.registerVersion("@firebase/storage","0.3.32-0");var TR,IR,SR,NR,CR="0.3.1-0",AR=CR,kR="FB-PERF-TRACE-MEASURE",RR="@firebase/performance/config",OR="@firebase/performance/configexpire",PR="Performance",DR=((TR={})["trace started"]="Trace {$traceName} was started before.",TR["trace stopped"]="Trace {$traceName} is not running.",TR["no window"]="Window is not available.",TR["no app id"]="App id is not available.",TR["no project id"]="Project id is not available.",TR["no api key"]="Api key is not available.",TR["invalid cc log"]="Attempted to queue invalid cc event",TR["FB not default"]="Performance can only start when Firebase app instance is the default one.",TR["RC response not ok"]="RC response is not ok",TR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",TR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",TR["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",TR["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",TR),xR=new Fs("performance",PR,DR),LR=(MR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},MR.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},MR.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},MR.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},MR.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},MR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},MR.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},MR.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},MR.getInstance=function(){return void 0===IR&&(IR=new MR(SR)),IR},MR);function MR(t){if(!(this.window=t))throw xR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function FR(t,e){var n=t.length-e.length;if(n<0||1<n)throw xR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var UR,jR,VR,qR=(BR.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw xR.create("no app id");return t},BR.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw xR.create("no project id");return t},BR.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw xR.create("no api key");return t},BR.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},BR.getInstance=function(){return void 0===NR&&(NR=new BR),NR},BR);function BR(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=FR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=FR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.shouldSendToFl=!1,this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function WR(){return UR}(VR=jR=jR||{})[VR.UNKNOWN=0]="UNKNOWN",VR[VR.VISIBLE=1]="VISIBLE",VR[VR.HIDDEN=2]="HIDDEN";var KR=["firebase_","google_","ga_"],HR=new RegExp("^[a-zA-Z]\\w*$");function GR(){switch(LR.getInstance().document.visibilityState){case"visible":return jR.VISIBLE;case"hidden":return jR.HIDDEN;default:return jR.UNKNOWN}}var zR=new wa(PR);zR.logLevel=pa.INFO;var QR="0.0.1",YR={loggingEnabled:!0,shouldSendToFl:!0},XR={shouldSendToFl:!1},JR="FIREBASE_INSTALLATIONS_AUTH";function $R(e){var r,t,n=function(){var t=LR.getInstance().localStorage;if(t){var e=t.getItem(OR);if(e&&Number(e)>Date.now()){var n=t.getItem(RR);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return n?(tO(e,n),Promise.resolve()):(r=e,(t=qR.getInstance().installationsService.getToken()).then(function(t){}),t.then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+qR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+qR.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:JR+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:qR.getInstance().getAppId(),app_version:AR,sdk_version:QR})});return fetch(n).then(function(t){if(t.ok)return t.json();throw xR.create("RC response not ok")})}).catch(function(){zR.info(ZR)}).then(function(t){return tO(e,t)}).then(function(t){return e=t,n=LR.getInstance().localStorage,void(e&&n&&(n.setItem(RR,JSON.stringify(e)),n.setItem(OR,String(Date.now()+60*qR.getInstance().configTimeToLive*60*1e3))));var e,n},function(){}))}var ZR="Could not fetch config, will use default configs";function tO(t,e){if(!e)return e;var n,r,i=qR.getInstance(),o=e.entries||{},s=e.state;return i.loggingEnabled=void 0!==o.fpr_enabled?"true"===String(o.fpr_enabled):YR.loggingEnabled,o.fpr_log_source&&(i.logSource=Number(o.fpr_log_source)),o.fpr_log_endpoint_url&&(i.logEndPointUrl=o.fpr_log_endpoint_url),o.fpr_log_transport_key&&(i.transportKey=o.fpr_log_transport_key),i.shouldSendToFl=void 0===s||"INSTANCE_STATE_UNSPECIFIED"===s||"NO_TEMPLATE"===s?XR.shouldSendToFl:o.fpr_log_transport_web_percent?(n=t,r=Number(o.fpr_log_transport_web_percent),0!==n.length&&function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<3)+e-t.charCodeAt(n);return Math.abs(e%100)}(n)<r):YR.shouldSendToFl,void 0!==o.fpr_vc_network_request_sampling_rate&&(i.networkRequestsSamplingRate=Number(o.fpr_vc_network_request_sampling_rate)),void 0!==o.fpr_vc_trace_sampling_rate&&(i.tracesSamplingRate=Number(o.fpr_vc_trace_sampling_rate)),i.logTraceAfterSampling=eO(i.tracesSamplingRate),i.logNetworkAfterSampling=eO(i.networkRequestsSamplingRate),e}function eO(t){return Math.random()<=t}var nO,rO=1;function iO(){return rO=2,nO=nO||(n=LR.getInstance().document,new Promise(function(t){if(n&&"complete"!==n.readyState){var e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()}).then(function(){return(t=qR.getInstance().installationsService.getId()).then(function(t){UR=t}),t;var t}).then(function(t){return $R(t)}).then(function(){return oO()},function(){return oO()}));var n}function oO(){rO=3}var sO,aO=1e4,uO=3,cO=uO,hO=[],lO=!1;function fO(t){setTimeout(function(){if(0!==cO)return hO.length?void function(){var t=bs(hO);hO=[];var e,n,r,i,o,s,a=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:qR.getInstance().logSource,log_event:a},n=t,(qR.getInstance().shouldSendToFl?(i=n,o=e,s=qR.getInstance().getFlTransportFullUrl(),fetch(s,{method:"POST",body:JSON.stringify(o)}).then(function(t){return t.ok||zR.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=aO;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(hO=bs(i,hO),zR.info("Retry transport request later.")),cO=uO,fO(n)})):(r=e,fetch(qR.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then(function(t){return t.ok||zR.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.next_request_wait_millis),n=isNaN(e)?aO:Math.max(aO,e);cO=uO,fO(n)}))).catch(function(){hO=bs(t,hO),cO--,zR.info("Tries left: "+cO+"."),fO(aO)})}():fO(aO)},t)}function pO(t,e){var n;(sO=sO||(n=yO,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw xR.create("invalid cc log");hO=bs(hO,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}))(t,e)}function dO(t){var e=qR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&LR.getInstance().requiredApisAvailable()&&(t.isAuto&&GR()!==jR.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===rO?vO(t):iO().then(function(){return vO(t)},function(){return vO(t)})))}function vO(t){WR()&&setTimeout(function(){return pO(t,1)},0)}function yO(t,e){return 0===e?(n={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},r={application_info:gO(),network_request_metric:n},JSON.stringify(r)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:gO(),trace_metric:e};return JSON.stringify(r)}(t);var n,r}function gO(){return{google_app_id:qR.getInstance().getAppId(),app_instance_id:WR(),web_app_info:{sdk_version:AR,page_url:LR.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=LR.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:GR(),effective_connection_type:function(){var t=LR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var mO=["_fp","_fcp","_fid"],bO=(_O.prototype.start=function(){if(1!==this.state)throw xR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},_O.prototype.stop=function(){if(2!==this.state)throw xR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),dO(this)},_O.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=ps({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}dO(this)},_O.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},_O.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<mO.indexOf(n))&&n.startsWith("_"))throw xR.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},_O.prototype.getMetric=function(t){return this.counters[t]||0},_O.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length||KR.some(function(t){return n.startsWith(t)})||!n.match(HR)),i=0!==e.length&&e.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw xR.create("invalid attribute name",{attributeName:t});if(!i)throw xR.create("invalid attribute value",{attributeValue:e})}},_O.prototype.getAttribute=function(t){return this.customAttributes[t]},_O.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},_O.prototype.getAttributes=function(){return ps({},this.customAttributes)},_O.prototype.setStartTime=function(t){this.startTimeUs=t},_O.prototype.setDuration=function(t){this.durationUs=t},_O.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},_O.createOobTrace=function(t,e,n){var r=LR.getInstance().getUrl();if(r){var i=new _O("_wt_"+r,!0),o=Math.floor(1e3*LR.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var s=e.find(function(t){return"first-paint"===t.name});s&&s.startTime&&i.putMetric("_fp",Math.floor(1e3*s.startTime));var a=e.find(function(t){return"first-contentful-paint"===t.name});a&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}dO(i)}},_O.createUserTimingTrace=function(t){dO(new _O(t,!1,t))},_O);function _O(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=LR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||kR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function wO(t){var e=t;if(e&&void 0!==e.responseStart){var n=LR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=qR.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return pO(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var EO=5e3;function TO(){WR()&&(setTimeout(function(){return function(){var t=LR.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){bO.createOobTrace(e,n),r=void 0},EO);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),bO.createOobTrace(e,n,t))})}else bO.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=LR.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)wO(n[e]);t.setupObserver("resource",wO)}()},0),setTimeout(function(){return function(){for(var t=LR.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)IO(n[e]);t.setupObserver("measure",IO)}()},0))}function IO(t){var e=t.name;e.substring(0,kR.length)!==kR&&bO.createUserTimingTrace(e)}var SO,NO=(CO.prototype.trace=function(t){return new bO(t)},Object.defineProperty(CO.prototype,"instrumentationEnabled",{get:function(){return qR.getInstance().instrumentationEnabled},set:function(t){qR.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(CO.prototype,"dataCollectionEnabled",{get:function(){return qR.getInstance().dataCollectionEnabled},set:function(t){qR.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),CO);function CO(t){this.app=t,LR.getInstance().requiredApisAvailable()?(lO||(fO(5500),lO=!0),iO().then(TO,TO)):zR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}(SO=Fl).INTERNAL.registerComponent(new ia("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw xR.create("FB not default");if("undefined"==typeof window)throw xR.create("no window");return SR=window,qR.getInstance().firebaseAppInstance=t,qR.getInstance().installationsService=e,new NO(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),SO.registerVersion("@firebase/performance",CR);var AO,kO,RO,OO,PO="measurementId",DO="https://www.googletagmanager.com/gtag/js";(kO=AO=AO||{}).EVENT="event",kO.SET="set",kO.CONFIG="config",(OO=RO=RO||{}).ADD_SHIPPING_INFO="add_shipping_info",OO.ADD_PAYMENT_INFO="add_payment_info",OO.ADD_TO_CART="add_to_cart",OO.ADD_TO_WISHLIST="add_to_wishlist",OO.BEGIN_CHECKOUT="begin_checkout",OO.CHECKOUT_PROGRESS="checkout_progress",OO.EXCEPTION="exception",OO.GENERATE_LEAD="generate_lead",OO.LOGIN="login",OO.PAGE_VIEW="page_view",OO.PURCHASE="purchase",OO.REFUND="refund",OO.REMOVE_FROM_CART="remove_from_cart",OO.SCREEN_VIEW="screen_view",OO.SEARCH="search",OO.SELECT_CONTENT="select_content",OO.SELECT_ITEM="select_item",OO.SELECT_PROMOTION="select_promotion",OO.SET_CHECKOUT_OPTION="set_checkout_option",OO.SHARE="share",OO.SIGN_UP="sign_up",OO.TIMING_COMPLETE="timing_complete",OO.VIEW_CART="view_cart",OO.VIEW_ITEM="view_item",OO.VIEW_ITEM_LIST="view_item_list",OO.VIEW_PROMOTION="view_promotion",OO.VIEW_SEARCH_RESULTS="view_search_results";var xO,LO=new wa("@firebase/analytics");var MO,FO,UO=((xO={})["no-ga-id"]='"'+PO+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',xO["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",xO["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",xO["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",xO),jO=new Fs("analytics","Analytics",UO),VO={},qO="dataLayer",BO="gtag",WO=!1;function KO(t,e){var n,r,i,o,s,a,u,f,p,c,h=t.options[PO];if(!h)throw jO.create("no-ga-id");if(null!=VO[h])throw jO.create("already-exists",{id:h});if(!WO){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(DO))return r}}()&&(i=qO,(o=document.createElement("script")).src=DO+"?l="+i,o.async=!0,document.head.appendChild(o)),n=qO,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var l=(s=VO,a=qO,u=BO,c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[a].push(arguments)},window[u]&&"function"==typeof window[u]&&(c=window[u]),window[u]=(f=c,p=s,function(t,e,n){if(t===AO.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(AO.EVENT,e,n||{})}).catch(function(t){return LO.error(t)})}else t===AO.CONFIG?(p[e]||Promise.resolve()).then(function(){f(AO.CONFIG,e,n)}).catch(function(t){return LO.error(t)}):f(AO.SET,e)}),{gtagCore:c,wrappedGtag:window[u]});FO=l.wrappedGtag,MO=l.gtagCore,WO=!0}return VO[h]=function(r,i,o){return ds(this,void 0,void 0,function(){var e,n;return vs(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(AO.CONFIG,r.options[PO],((n={}).firebase_id=e,n.origin="firebase",n.update=!0,n)),[2]}})})}(t,e,MO),{app:t,logEvent:function(t,e,n){return r=FO,i=h,o=t,s=e||{},n&&n.global||(s=ps(ps({},e),{send_to:i})),void r(AO.EVENT,o,s||{});var r,i,o,s},setCurrentScreen:function(t,e){return n=FO,r=h,i=t,void(e&&e.global?n(AO.SET,{screen_name:i}):n(AO.CONFIG,r,{update:!0,screen_name:i}));var n,r,i},setUserId:function(t,e){return n=FO,r=h,i=t,void(e&&e.global?n(AO.SET,{user_id:i}):n(AO.CONFIG,r,{update:!0,user_id:i}));var n,r,i},setUserProperties:function(t,a){return function(t,e,n){if(a&&a.global){for(var r={},i=0,o=Object.keys(n);i<o.length;i++){var s=o[i];r["user_properties."+s]=n[s]}t(AO.SET,r)}else t(AO.CONFIG,e,{update:!0,user_properties:n})}(FO,h,t)},setAnalyticsCollectionEnabled:function(t){window["ga-disable-"+h]=!t}}}var HO,GO="analytics";(HO=Fl).INTERNAL.registerComponent(new ia(GO,function(t){return KO(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(t){if(WO)throw jO.create("already-initialized");t.dataLayerName&&(qO=t.dataLayerName),t.gtagName&&(BO=t.gtagName)},EventName:RO})),HO.INTERNAL.registerComponent(new ia("analytics-internal",function(t){try{return{logEvent:t.getProvider(GO).getImmediate().logEvent}}catch(t){throw jO.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),HO.registerVersion("@firebase/analytics","0.3.3-0");var zO,QO=(YO.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},YO.prototype.fetch=function(s){return ds(this,void 0,void 0,function(){var e,n,r,i,o;return vs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},YO);function YO(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var XO=((zO={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",zO["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",zO["registration-api-key"]="Undefined API key. Check Firebase app initialization.",zO["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",zO["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",zO["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",zO["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",zO["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",zO["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",zO["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',zO["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',zO["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",zO["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",zO),JO=new Fs("remoteconfig","Remote Config",XO),$O=(ZO.prototype.fetch=function(w){return ds(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,_;return vs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){w.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),JO.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw _=t.sent(),JO.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw JO.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},ZO);function ZO(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var tP=(eP.prototype.addEventListener=function(t){this.listeners.push(t)},eP.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},eP);function eP(){this.listeners=[]}var nP=["1","true","t","yes","y","on"],rP=(iP.prototype.asString=function(){return this._value},iP.prototype.asBoolean=function(){return"static"!==this._source&&0<=nP.indexOf(this._value.toLowerCase())},iP.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},iP.prototype.getSource=function(){return this._source},iP);function iP(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var oP=(sP.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=pa.DEBUG;break;case"silent":this._logger.logLevel=pa.SILENT;break;default:this._logger.logLevel=pa.ERROR}},Object.defineProperty(sP.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(sP.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),sP.prototype.activate=function(){return ds(this,void 0,void 0,function(){var e,n,r;return vs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},sP.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},sP.prototype.fetch=function(){return ds(this,void 0,void 0,function(){var e,n,r,i=this;return vs(this,function(t){switch(t.label){case 0:e=new tP,setTimeout(function(){return ds(i,void 0,void 0,function(){return vs(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=n instanceof Ls&&-1!==n.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},sP.prototype.fetchAndActivate=function(){return ds(this,void 0,void 0,function(){return vs(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},sP.prototype.getAll=function(){var t,e,n=this;return t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(ps(ps({},t),e)).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},sP.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},sP.prototype.getNumber=function(t){return this.getValue(t).asNumber()},sP.prototype.getString=function(t){return this.getValue(t).asString()},sP.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new rP("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new rP("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new rP("static"))},sP);function sP(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function aP(t,e){var n=t.target.error||void 0;return JO.create(e,{originalErrorMessage:n&&n.message})}var uP="app_namespace_store",cP=(hP.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},hP.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},hP.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},hP.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},hP.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},hP.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},hP.prototype.getActiveConfig=function(){return this.get("active_config")},hP.prototype.setActiveConfig=function(t){return this.set("active_config",t)},hP.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},hP.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},hP.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},hP.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},hP.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},hP.prototype.get=function(a){return ds(this,void 0,void 0,function(){var o,s=this;return vs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([uP],"readonly").objectStore(uP),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(aP(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(JO.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},hP.prototype.set=function(a,u){return ds(this,void 0,void 0,function(){var o,s=this;return vs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([uP],"readwrite").objectStore(uP),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(aP(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(JO.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},hP.prototype.delete=function(a){return ds(this,void 0,void 0,function(){var o,s=this;return vs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([uP],"readwrite").objectStore(uP),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(aP(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(JO.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},hP.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},hP);function hP(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open("firebase_remote_config",1);t.onerror=function(t){n(aP(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(uP,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var lP=(fP.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},fP.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},fP.prototype.getActiveConfig=function(){return this.activeConfig},fP.prototype.loadFromStorage=function(){return ds(this,void 0,void 0,function(){var e,n,r,i,o,s;return vs(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},fP.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},fP.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},fP.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},fP);function fP(t){this.storage=t}var pP=(dP.prototype.fetch=function(n){return ds(this,void 0,void 0,function(){var e;return vs(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},dP.prototype.attemptFetch=function(u,t){var c=t.throttleEndTimeMillis,h=t.backoffCount;return ds(this,void 0,void 0,function(){var r,s,a;return vs(this,function(t){switch(t.label){case 0:return[4,(i=u.signal,o=c,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(JO.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(u)];case 3:return r=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,r];case 5:if(!function(t){if(t instanceof Ls){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(s=t.sent()))throw s;return a={throttleEndTimeMillis:Date.now()+(e=1e3*Math.pow(2,h),n=Math.round(.5*e*(Math.random()-.5)*2),Math.min(144e5,e+n)),backoffCount:h+1},[4,this.storage.setThrottleMetadata(a)];case 6:return t.sent(),[2,this.attemptFetch(u,a)];case 7:return[2]}var e,n,i,o})})},dP);function dP(t,e){this.client=t,this.storage=e}var vP,yP="@firebase/remote-config";return(vP=Fl).INTERNAL.registerComponent(new ia("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw JO.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw JO.create("registration-project-id");if(!s)throw JO.create("registration-api-key");if(!a)throw JO.create("registration-app-id");e=e||"firebase";var u=new cP(a,n.name,e),c=new lP(u),h=new wa(yP);h.logLevel=pa.ERROR;var l=new $O(r,vP.SDK_VERSION,e,o,s,a),f=new pP(l,u),p=new QO(f,u,c,h),d=new oP(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),vP.registerVersion(yP,"0.1.19-0"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Fl.registerVersion("firebase","7.14.1-0","cdn"),Fl});